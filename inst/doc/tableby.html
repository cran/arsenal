<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Beth Atkinson, Jason Sinnwell, Shannon McDonnell and Greg Dougherty" />


<title>The tableby function</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">The tableby function</h1>
<h4 class="author"><em>Beth Atkinson, Jason Sinnwell, Shannon McDonnell and Greg Dougherty</em></h4>
<h4 class="date"><em>09 March, 2017</em></h4>


<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#simple-example">Simple Example</a><ul>
<li><a href="#pretty-text-version-of-table">Pretty text version of table</a></li>
<li><a href="#pretty-rmarkdown-version-of-table">Pretty Rmarkdown version of table</a></li>
<li><a href="#data-frame-version-of-table">Data frame version of table</a></li>
<li><a href="#summaries-using-standard-r-code">Summaries using standard R code</a></li>
</ul></li>
<li><a href="#modifying-output">Modifying Output</a><ul>
<li><a href="#add-labels">Add labels</a></li>
<li><a href="#change-summary-statistics-globally">Change summary statistics globally</a></li>
<li><a href="#change-summary-statistics-within-the-formula">Change summary statistics within the formula</a></li>
<li><a href="#modifying-the-look-feel-in-word-documents">Modifying the look &amp; feel in Word documents</a></li>
</ul></li>
<li><a href="#additional-examples">Additional Examples</a><ul>
<li><a href="#summarize-without-a-groupby-variable">1. Summarize without a group/by variable</a></li>
<li><a href="#display-footnotes-indicating-which-test-was-used">2. Display footnotes indicating which “test” was used</a></li>
<li><a href="#summarize-an-ordered-factor">3. Summarize an ordered factor</a></li>
<li><a href="#summarize-a-survival-variable">4. Summarize a survival variable</a></li>
<li><a href="#summarize-date-variables">5. Summarize date variables</a></li>
<li><a href="#summarize-multiple-variables-without-typing-them-out">6. Summarize multiple variables without typing them out</a></li>
<li><a href="#subset-the-dataset-used-in-the-analysis">7. Subset the dataset used in the analysis</a></li>
<li><a href="#create-combinations-of-variables-on-the-fly">8. Create combinations of variables on the fly</a></li>
<li><a href="#transform-variables-on-the-fly">9. Transform variables on the fly</a></li>
<li><a href="#change-the-ordering-of-the-variables-or-delete-a-variable">10. Change the ordering of the variables or delete a variable</a></li>
<li><a href="#merge-two-tableby-objects-together">11. Merge two <code>tableby</code> objects together</a></li>
<li><a href="#add-a-title-to-the-table">12. Add a title to the table</a></li>
<li><a href="#modify-how-missing-values-are-displayed">13. Modify how missing values are displayed</a></li>
<li><a href="#modify-the-number-of-digits-used">14. Modify the number of digits used</a></li>
<li><a href="#create-a-user-defined-summary-statistic">15. Create a user-defined summary statistic</a></li>
<li><a href="#use-case-weights-for-creating-summary-statistics">16. Use case-weights for creating summary statistics</a></li>
<li><a href="#create-your-own-p-value-and-add-it-to-the-table">17. Create your own p-value and add it to the table</a></li>
<li><a href="#for-two-level-categorical-variables-only-display-one-level.">18. For two-level categorical variables, only display one level.</a></li>
<li><a href="#use-tableby-within-an-sweave-document">19. Use <code>tableby</code> within an Sweave document</a></li>
<li><a href="#export-tableby-object-to-a-.csv-file">20. Export <code>tableby</code> object to a .CSV file</a></li>
<li><a href="#write-tableby-object-to-a-separate-word-or-html-file">21. Write <code>tableby</code> object to a separate Word or HTML file</a></li>
</ul></li>
<li><a href="#available-function-options">Available Function Options</a><ul>
<li><a href="#summary-statistics">Summary statistics</a></li>
<li><a href="#testing-options">Testing options</a></li>
<li><a href="#tableby.control-settings"><code>tableby.control</code> settings</a></li>
<li><a href="#summary.tableby-settings"><code>summary.tableby</code> settings</a></li>
</ul></li>
</ul>
</div>

<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>One of the most common tables in medical literature includes summary statistics for a set of variables, often stratified by some group (e.g. treatment arm). Locally at Mayo, the SAS macros <code>%table</code> and <code>%summary</code> were written to create summary tables with a single call. With the increasing interest in R, we have developed the function <code>tableby</code> to create similar tables within the R environment.</p>
<p>In developing the <code>tableby</code> function, the goal was to bring the best features of these macros into an R function. However, the task was not simply to duplicate all the functionality, but rather to make use of R’s strengths (modeling, method dispersion, flexibility in function definition and output format) and make a tool that fits the needs of R users. Additionally, the results needed to fit within the general reproducible research framework so the tables could be displayed within an R markdown report.</p>
<p>This report provides step-by-step directions for using the functions associated with <code>tableby</code>. All functions presented here are available within the <code>arsenal</code> package. An assumption is made that users are somewhat familiar with R markdown documents. For those who are new to the topic, a good initial resource is available at <a href="http://rmarkdown.rstudio.com">rmarkdown.rstudio.com</a>.</p>
</div>
<div id="simple-example" class="section level1">
<h1>Simple Example</h1>
<p>The first step when using the <code>tableby</code> function is to load the <code>arsenal</code> package. All the examples in this report use a dataset called <code>mockstudy</code> made available by Paul Novotny which includes a variety of types of variables (character, numeric, factor, ordered factor, survival) to use as examples.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(arsenal)
<span class="kw">require</span>(knitr)
<span class="kw">require</span>(survival)
<span class="kw">data</span>(mockstudy) ##load data
<span class="kw">dim</span>(mockstudy)  ##look at how many subjects and variables are in the dataset </code></pre></div>
<pre><code>## [1] 1499   14</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># help(mockstudy) ##learn more about the dataset and variables</span>
<span class="kw">str</span>(mockstudy) ##quick look at the data</code></pre></div>
<pre><code>## 'data.frame':    1499 obs. of  14 variables:
##  $ case       : int  110754 99706 105271 105001 112263 86205 99508 90158 88989 90515 ...
##  $ age        : atomic  67 74 50 71 69 56 50 57 51 63 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Age in Years&quot;
##  $ arm        : atomic  F: FOLFOX A: IFL A: IFL G: IROX ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Treatment Arm&quot;
##  $ sex        : Factor w/ 2 levels &quot;Male&quot;,&quot;Female&quot;: 1 2 2 2 2 1 1 1 2 1 ...
##  $ race       : atomic  Caucasian Caucasian Caucasian Caucasian ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Race&quot;
##  $ fu.time    : int  922 270 175 128 233 120 369 421 387 363 ...
##  $ fu.stat    : int  2 2 2 2 2 2 2 2 2 2 ...
##  $ ps         : int  0 1 1 1 0 0 0 0 1 1 ...
##  $ hgb        : num  11.5 10.7 11.1 12.6 13 10.2 13.3 12.1 13.8 12.1 ...
##  $ bmi        : atomic  25.1 19.5 NA 29.4 26.4 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Body Mass Index (kg/m^2)&quot;
##  $ alk.phos   : int  160 290 700 771 350 569 162 152 231 492 ...
##  $ ast        : int  35 52 100 68 35 27 16 12 25 18 ...
##  $ mdquality.s: int  NA 1 1 1 NA 1 1 1 1 1 ...
##  $ age.ord    : Ord.factor w/ 8 levels &quot;10-19&quot;&lt;&quot;20-29&quot;&lt;..: 6 7 4 7 6 5 4 5 5 6 ...</code></pre>
<p>To create a simple table stratified by treament arm, use a formula statement to specify the variables that you want summarized. The example below uses age (a continuous variable) and sex (a factor).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm ~<span class="st"> </span>sex +<span class="st"> </span>age, <span class="dt">data=</span>mockstudy)</code></pre></div>
<p>If you want to take a quick look at the table, you can use <code>summary</code> on your tableby object and the table will print out as text in your R console window. If you use <code>summary</code> without any options you will see a number of <span class="math inline">\(\&amp;nbsp;\)</span> statements which translates to “space” in HTML.</p>
<div id="pretty-text-version-of-table" class="section level2">
<h2>Pretty text version of table</h2>
<p>If you want a nicer version in your console window then add the <code>text=TRUE</code> option.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(tab1, <span class="dt">text=</span><span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## 
## ---------------------------------------------------------------------------------------------------------------------------
##                          A: IFL (N=428)      F: FOLFOX (N=691)   G: IROX (N=380)     Total (N=1499)      p value           
## ----------------------- ------------------- ------------------- ------------------- ------------------- -------------------
## Sex                                                                                                                   0.190
##    Male                 277 (64.7%)         411 (59.5%)         228 (60%)           916 (61.1%)        
##    Female               151 (35.3%)         280 (40.5%)         152 (40%)           583 (38.9%)        
## Age in Years                                                                                                          0.614
##    Mean (SD)            59.7 (11.4)         60.3 (11.6)         59.8 (11.5)         60 (11.5)          
##    Q1, Q3               53, 68              52, 69              52, 68              52, 68             
##    Range                27 - 88             19 - 88             26 - 85             19 - 88            
## ---------------------------------------------------------------------------------------------------------------------------</code></pre>
</div>
<div id="pretty-rmarkdown-version-of-table" class="section level2">
<h2>Pretty Rmarkdown version of table</h2>
<p>In order for the report to look nice within an R markdown (knitr) report, you just need to specify <code>results=&quot;asis&quot;</code> when creating the r chunk. This changes the layout slightly (compresses it) and bolds the variable names.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(tab1)</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Sex</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.190</td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60%)</td>
<td align="center">916 (61.1%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40%)</td>
<td align="center">583 (38.9%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.614</td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">59.7 (11.4)</td>
<td align="center">60.3 (11.6)</td>
<td align="center">59.8 (11.5)</td>
<td align="center">60 (11.5)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">53, 68</td>
<td align="center">52, 69</td>
<td align="center">52, 68</td>
<td align="center">52, 68</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">27 - 88</td>
<td align="center">19 - 88</td>
<td align="center">26 - 85</td>
<td align="center">19 - 88</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="data-frame-version-of-table" class="section level2">
<h2>Data frame version of table</h2>
<p>If you want a data.frame version, simply use <code>as.data.frame</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.data.frame</span>(tab1)</code></pre></div>
<pre><code>##           term variable A: IFL (N=428) F: FOLFOX (N=691) G: IROX (N=380) Total (N=1499) p value
## 1          Sex      sex                                                                   0.190
## 2         Male      sex    277 (64.7%)       411 (59.5%)       228 (60%)    916 (61.1%)        
## 3       Female      sex    151 (35.3%)       280 (40.5%)       152 (40%)    583 (38.9%)        
## 4 Age in Years      age                                                                   0.614
## 5    Mean (SD)      age    59.7 (11.4)       60.3 (11.6)     59.8 (11.5)      60 (11.5)        
## 6       Q1, Q3      age         53, 68            52, 69          52, 68         52, 68        
## 7        Range      age        27 - 88           19 - 88         26 - 85        19 - 88</code></pre>
</div>
<div id="summaries-using-standard-r-code" class="section level2">
<h2>Summaries using standard R code</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## base R frequency example
tmp &lt;-<span class="st"> </span><span class="kw">table</span>(<span class="dt">Gender=</span>mockstudy$sex, <span class="st">&quot;Study Arm&quot;</span>=mockstudy$arm)
tmp</code></pre></div>
<pre><code>##         Study Arm
## Gender   A: IFL F: FOLFOX G: IROX
##   Male      277       411     228
##   Female    151       280     152</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Note: The continuity correction is applied by default in R (not used in %table)</span>
<span class="kw">chisq.test</span>(tmp) </code></pre></div>
<pre><code>## 
##  Pearson's Chi-squared test
## 
## data:  tmp
## X-squared = 3.3168, df = 2, p-value = 0.1904</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## gmodels frequency example
<span class="co">#require(gmodels)</span>
<span class="co">#CrossTable(mockstudy$sex, mockstudy$arm, prop.r=F, prop.t=F, </span>
<span class="co">#           prop.chisq=F, chisq=T, dnn=c('Gender','Study Arm'))</span>

## base R numeric summary example
<span class="kw">tapply</span>(mockstudy$age, mockstudy$arm, summary)</code></pre></div>
<pre><code>## $`A: IFL`
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   27.00   53.00   61.00   59.67   68.00   88.00 
## 
## $`F: FOLFOX`
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    19.0    52.0    61.0    60.3    69.0    88.0 
## 
## $`G: IROX`
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   26.00   52.00   61.00   59.76   68.00   85.00</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">aov</span>(age ~<span class="st"> </span>arm, <span class="dt">data=</span>mockstudy))</code></pre></div>
<pre><code>##               Df Sum Sq Mean Sq F value Pr(&gt;F)
## arm            2    129    64.7   0.487  0.614
## Residuals   1496 198628   132.8</code></pre>
</div>
</div>
<div id="modifying-output" class="section level1">
<h1>Modifying Output</h1>
<div id="add-labels" class="section level2">
<h2>Add labels</h2>
<p>In the above example, age is shown with a label (Age in Years), but sex is listed “as is” with lower case letters. This is because the data was created in SAS and in the SAS dataset, age had a label but sex did not. The label is stored as an attribute within R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Look at one variable's label
<span class="kw">attr</span>(mockstudy$age,<span class="st">'label'</span>)</code></pre></div>
<pre><code>## [1] &quot;Age in Years&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## See all the variables with a label
<span class="kw">unlist</span>(<span class="kw">lapply</span>(mockstudy,<span class="st">'attr'</span>,<span class="st">'label'</span>))</code></pre></div>
<pre><code>##                        age                        arm                       race 
##             &quot;Age in Years&quot;            &quot;Treatment Arm&quot;                     &quot;Race&quot; 
##                        bmi 
## &quot;Body Mass Index (kg/m^2)&quot;</code></pre>
<p>If you want to add labels to other variables, there are a couple of options. First, you could add labels to the variables in your dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attr</span>(mockstudy$sex,<span class="st">'label'</span>)  &lt;-<span class="st"> 'Gender'</span>

tab1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm ~<span class="st"> </span>sex +<span class="st"> </span>age, <span class="dt">data=</span>mockstudy)
<span class="kw">summary</span>(tab1)</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.190</td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60%)</td>
<td align="center">916 (61.1%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40%)</td>
<td align="center">583 (38.9%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.614</td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">59.7 (11.4)</td>
<td align="center">60.3 (11.6)</td>
<td align="center">59.8 (11.5)</td>
<td align="center">60 (11.5)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">53, 68</td>
<td align="center">52, 69</td>
<td align="center">52, 68</td>
<td align="center">52, 68</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">27 - 88</td>
<td align="center">19 - 88</td>
<td align="center">26 - 85</td>
<td align="center">19 - 88</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p>Another option is to add labels after you have created the table</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mylabels &lt;-<span class="st"> </span><span class="kw">list</span>( <span class="dt">sex =</span> <span class="st">&quot;SEX&quot;</span>, <span class="dt">age =</span><span class="st">&quot;Age, yrs&quot;</span>)
<span class="kw">summary</span>(tab1, <span class="dt">labelTranslations =</span> mylabels)</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>SEX</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.190</td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60%)</td>
<td align="center">916 (61.1%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40%)</td>
<td align="center">583 (38.9%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.614</td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">59.7 (11.4)</td>
<td align="center">60.3 (11.6)</td>
<td align="center">59.8 (11.5)</td>
<td align="center">60 (11.5)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">53, 68</td>
<td align="center">52, 69</td>
<td align="center">52, 68</td>
<td align="center">52, 68</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">27 - 88</td>
<td align="center">19 - 88</td>
<td align="center">26 - 85</td>
<td align="center">19 - 88</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p>Alternatively, you can check the variable labels and manipulate them with a function called labels, which works on the tableby object.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">labels</span>(tab1)</code></pre></div>
<pre><code>##             arm             sex             age 
## &quot;Treatment Arm&quot;        &quot;Gender&quot;  &quot;Age in Years&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">labels</span>(tab1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">arm=</span><span class="st">&quot;Treatment Assignment&quot;</span>, <span class="dt">age=</span><span class="st">&quot;Baseline Age (yrs)&quot;</span>)
<span class="kw">labels</span>(tab1)</code></pre></div>
<pre><code>##                    arm                    sex                    age 
## &quot;Treatment Assignment&quot;               &quot;Gender&quot;   &quot;Baseline Age (yrs)&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(tab1)</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.190</td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60%)</td>
<td align="center">916 (61.1%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40%)</td>
<td align="center">583 (38.9%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>Baseline Age (yrs)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.614</td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">59.7 (11.4)</td>
<td align="center">60.3 (11.6)</td>
<td align="center">59.8 (11.5)</td>
<td align="center">60 (11.5)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">53, 68</td>
<td align="center">52, 69</td>
<td align="center">52, 68</td>
<td align="center">52, 68</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">27 - 88</td>
<td align="center">19 - 88</td>
<td align="center">26 - 85</td>
<td align="center">19 - 88</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="change-summary-statistics-globally" class="section level2">
<h2>Change summary statistics globally</h2>
<p>Currently the default behavior is to summarize continuous variables with: Number of missing values, Mean (SD), 25th - 75th quantiles, and Minimum-Maximum values with an ANOVA (t-test with equal variances) p-value. For categorical variables the default is to show: Number of missing values and count (column percent) with a chi-square p-value. This behavior can be modified using the tableby.control function. In fact, you can save your standard settings and use that for future tables. Note that <code>test=FALSE</code> and <code>total=FALSE</code> results in the total column and p-value column not being printed.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mycontrols  &lt;-<span class="st"> </span><span class="kw">tableby.control</span>(<span class="dt">test=</span><span class="ot">FALSE</span>, <span class="dt">total=</span><span class="ot">FALSE</span>,
                               <span class="dt">numeric.test=</span><span class="st">&quot;kwt&quot;</span>, <span class="dt">cat.test=</span><span class="st">&quot;chisq&quot;</span>,
                               <span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;N&quot;</span>, <span class="st">&quot;median&quot;</span>, <span class="st">&quot;q1q3&quot;</span>),
                               <span class="dt">cat.stats=</span><span class="kw">c</span>(<span class="st">&quot;countpct&quot;</span>),
                               <span class="dt">stats.labels=</span><span class="kw">list</span>(<span class="dt">N=</span><span class="st">'Count'</span>, <span class="dt">median=</span><span class="st">'Median'</span>, <span class="dt">q1q3=</span><span class="st">'Q1,Q3'</span>))
tab2 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm ~<span class="st"> </span>sex +<span class="st"> </span>age, <span class="dt">data=</span>mockstudy, <span class="dt">control=</span>mycontrols)
<span class="kw">summary</span>(tab2)</code></pre></div>
<table>
<colgroup>
<col width="28%"></col>
<col width="23%"></col>
<col width="23%"></col>
<col width="23%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60%)</td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40%)</td>
</tr>
<tr class="even">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Count</td>
<td align="center">428</td>
<td align="center">691</td>
<td align="center">380</td>
</tr>
<tr class="even">
<td>    Median</td>
<td align="center">61</td>
<td align="center">61</td>
<td align="center">61</td>
</tr>
<tr class="odd">
<td>    Q1,Q3</td>
<td align="center">53, 68</td>
<td align="center">52, 69</td>
<td align="center">52, 68</td>
</tr>
</tbody>
</table>
<p>You can also change these settings directly in the tableby call.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab3 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm ~<span class="st"> </span>sex +<span class="st"> </span>age, <span class="dt">data=</span>mockstudy, <span class="dt">test=</span><span class="ot">FALSE</span>, <span class="dt">total=</span><span class="ot">FALSE</span>, 
                <span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;median&quot;</span>,<span class="st">&quot;q1q3&quot;</span>), <span class="dt">numeric.test=</span><span class="st">&quot;kwt&quot;</span>)
<span class="kw">summary</span>(tab3)</code></pre></div>
<table>
<colgroup>
<col width="28%"></col>
<col width="23%"></col>
<col width="23%"></col>
<col width="23%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60%)</td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40%)</td>
</tr>
<tr class="even">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    median</td>
<td align="center">61</td>
<td align="center">61</td>
<td align="center">61</td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">53, 68</td>
<td align="center">52, 69</td>
<td align="center">52, 68</td>
</tr>
</tbody>
</table>
</div>
<div id="change-summary-statistics-within-the-formula" class="section level2">
<h2>Change summary statistics within the formula</h2>
<p>In addition to modifying summary options globally, it is possible to modify the test and summary statistics for specific variables within the formula statement. For example, both the kwt (Kruskal-Wallis rank-based) and anova (asymptotic analysis of variance) tests apply to numeric variables and we can use one for the variable “age” and another for the variable “ast”. A list of all the options is shown at the end of the vignette.</p>
<p>The <code>tests</code> function can do a quick check on what tests were performed on each variable in tableby.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab.test &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm ~<span class="st"> </span><span class="kw">kwt</span>(age) +<span class="st"> </span><span class="kw">anova</span>(bmi) +<span class="st"> </span><span class="kw">kwt</span>(ast), <span class="dt">data=</span>mockstudy)
<span class="kw">tests</span>(tab.test)</code></pre></div>
<pre><code>##                     Variable    p.value                       Method
## age             Age in Years 0.63906143 Kruskal-Wallis rank sum test
## bmi Body Mass Index (kg/m^2) 0.89165522           Linear Model ANOVA
## ast                      ast 0.03902803 Kruskal-Wallis rank sum test</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(tab.test)</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.639</td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">59.7 (11.4)</td>
<td align="center">60.3 (11.6)</td>
<td align="center">59.8 (11.5)</td>
<td align="center">60 (11.5)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">53, 68</td>
<td align="center">52, 69</td>
<td align="center">52, 68</td>
<td align="center">52, 68</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">27 - 88</td>
<td align="center">19 - 88</td>
<td align="center">26 - 85</td>
<td align="center">19 - 88</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.892</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">27.3 (5.55)</td>
<td align="center">27.2 (5.17)</td>
<td align="center">27.1 (5.75)</td>
<td align="center">27.2 (5.43)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">23.6, 30.6</td>
<td align="center">23.7, 30.1</td>
<td align="center">23.2, 29.6</td>
<td align="center">23.5, 30.1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">14.1 - 53</td>
<td align="center">16.6 - 49.1</td>
<td align="center">15.4 - 60.2</td>
<td align="center">14.1 - 60.2</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.039</td>
</tr>
<tr class="odd">
<td>    N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">37.3 (28)</td>
<td align="center">35.2 (26.7)</td>
<td align="center">35.7 (25.8)</td>
<td align="center">35.9 (26.8)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">21, 42</td>
<td align="center">19, 40</td>
<td align="center">20, 41</td>
<td align="center">20, 41</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">10 - 205</td>
<td align="center">7 - 174</td>
<td align="center">5 - 176</td>
<td align="center">5 - 205</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p>Summary statistics for any individual variable can also be modified, but it must be done as secondary arguments to the test function. The function names must be strings that are functions already written for tableby, built-in R functions like mean and range, or user-defined functions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab.test &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm ~<span class="st"> </span><span class="kw">kwt</span>(ast, <span class="st">&quot;Nmiss2&quot;</span>,<span class="st">&quot;median&quot;</span>) +<span class="st"> </span><span class="kw">anova</span>(age, <span class="st">&quot;N&quot;</span>,<span class="st">&quot;mean&quot;</span>) +
<span class="st">                    </span><span class="kw">kwt</span>(bmi, <span class="st">&quot;Nmiss&quot;</span>,<span class="st">&quot;median&quot;</span>), <span class="dt">data=</span>mockstudy)
<span class="kw">summary</span>(tab.test)</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.039</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    median</td>
<td align="center">29</td>
<td align="center">25.5</td>
<td align="center">27</td>
<td align="center">27</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.614</td>
</tr>
<tr class="odd">
<td>    N</td>
<td align="center">428</td>
<td align="center">691</td>
<td align="center">380</td>
<td align="center">1499</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    mean</td>
<td align="center">59.7</td>
<td align="center">60.3</td>
<td align="center">59.8</td>
<td align="center">60</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.641</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    median</td>
<td align="center">26.2</td>
<td align="center">26.5</td>
<td align="center">26</td>
<td align="center">26.3</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="modifying-the-look-feel-in-word-documents" class="section level2">
<h2>Modifying the look &amp; feel in Word documents</h2>
<p>You can easily create Word versions of <code>tableby</code> output via an Rmarkdown report and the default options will give you a reasonable table in Word - just select the “Knit Word” option in RStudio.</p>
<p><strong>The functionality listed in this next paragraph is coming soon but needs an upgraded version of RStudio</strong> If you want to modify fonts used for the table, then you’ll need to add an extra line to your header at the beginning of your file. You can take the <code>WordStylesReference01.docx</code> file and modify the fonts (storing the format preferences in your project directory). To see how this works, run your report once using WordStylesReference01.docx and then WordStylesReference02.docx.</p>
<pre><code>output: word_document
  reference_docx: /projects/bsi/gentools/R/lib320/arsenal/doc/WordStylesReference01.docx </code></pre>
<p>For more informating on changing the look/feel of your Word document, see the <a href="http://rmarkdown.rstudio.com/word_document_format.html">Rmarkdown documentation</a> website.</p>
</div>
</div>
<div id="additional-examples" class="section level1">
<h1>Additional Examples</h1>
<p>Here are multiple examples showing how to use some of the different options.</p>
<div id="summarize-without-a-groupby-variable" class="section level2">
<h2>1. Summarize without a group/by variable</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab.noby &lt;-<span class="st"> </span><span class="kw">tableby</span>(~<span class="st"> </span>bmi +<span class="st"> </span>sex +<span class="st"> </span>age, <span class="dt">data=</span>mockstudy)
<span class="kw">summary</span>(tab.noby)</code></pre></div>
<table style="width:72%;">
<colgroup>
<col width="40%"></col>
<col width="31%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">Overall (N=1499)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">33</td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">27.2 (5.43)</td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">23.5, 30.1</td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">14.1 - 60.2</td>
</tr>
<tr class="even">
<td><strong>Gender</strong></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Male</td>
<td align="center">916 (61.1%)</td>
</tr>
<tr class="even">
<td>    Female</td>
<td align="center">583 (38.9%)</td>
</tr>
<tr class="odd">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">60 (11.5)</td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">52, 68</td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">19 - 88</td>
</tr>
</tbody>
</table>
</div>
<div id="display-footnotes-indicating-which-test-was-used" class="section level2">
<h2>2. Display footnotes indicating which “test” was used</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(tab.test) <span class="co">#, pfootnote=TRUE)</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.039</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    median</td>
<td align="center">29</td>
<td align="center">25.5</td>
<td align="center">27</td>
<td align="center">27</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.614</td>
</tr>
<tr class="odd">
<td>    N</td>
<td align="center">428</td>
<td align="center">691</td>
<td align="center">380</td>
<td align="center">1499</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    mean</td>
<td align="center">59.7</td>
<td align="center">60.3</td>
<td align="center">59.8</td>
<td align="center">60</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.641</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    median</td>
<td align="center">26.2</td>
<td align="center">26.5</td>
<td align="center">26</td>
<td align="center">26.3</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="summarize-an-ordered-factor" class="section level2">
<h2>3. Summarize an ordered factor</h2>
<p>When comparing groups of ordered data there are a couple of options. The <strong>default</strong> uses a general independence test available from the <code>coin</code> package. For two-group comparisons, this is essentially the Armitage trend test. The other option is to specify the Kruskal Wallis test. The example below shows both options.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mockstudy$age.ordnew &lt;-<span class="st"> </span><span class="kw">ordered</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="ot">NA</span>,<span class="kw">as.character</span>(mockstudy$age.ord[-(<span class="dv">1</span>:<span class="dv">2</span>)])))
<span class="kw">table</span>(mockstudy$age.ord, mockstudy$sex)</code></pre></div>
<pre><code>##        
##         Male Female
##   10-19    1      0
##   20-29    8     11
##   30-39   37     30
##   40-49  127     83
##   50-59  257    179
##   60-69  298    170
##   70-79  168    101
##   80-89   20      9</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(mockstudy$age.ordnew, mockstudy$sex)</code></pre></div>
<pre><code>##        
##         Male Female
##   10-19    1      0
##   20-29    8     11
##   30-39   37     30
##   40-49  127     83
##   50-59  257    179
##   60-69  297    170
##   70-79  168    100
##   80-89   20      9
##   a        1      0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(mockstudy$age.ord)</code></pre></div>
<pre><code>## [1] &quot;ordered&quot; &quot;factor&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex ~<span class="st"> </span>age.ordnew, <span class="dt">data =</span> mockstudy)) <span class="co">#, pfootnote = TRUE)</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="22%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>age.ordnew</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.040</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    10-19</td>
<td align="center">1 (0.109%)</td>
<td align="center">0 (0%)</td>
<td align="center">1 (0.067%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    20-29</td>
<td align="center">8 (0.873%)</td>
<td align="center">11 (1.89%)</td>
<td align="center">19 (1.27%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    30-39</td>
<td align="center">37 (4.04%)</td>
<td align="center">30 (5.15%)</td>
<td align="center">67 (4.47%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    40-49</td>
<td align="center">127 (13.9%)</td>
<td align="center">83 (14.3%)</td>
<td align="center">210 (14%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    50-59</td>
<td align="center">257 (28.1%)</td>
<td align="center">179 (30.8%)</td>
<td align="center">436 (29.1%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    60-69</td>
<td align="center">297 (32.4%)</td>
<td align="center">170 (29.2%)</td>
<td align="center">467 (31.2%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    70-79</td>
<td align="center">168 (18.3%)</td>
<td align="center">100 (17.2%)</td>
<td align="center">268 (17.9%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    80-89</td>
<td align="center">20 (2.18%)</td>
<td align="center">9 (1.55%)</td>
<td align="center">29 (1.94%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    a</td>
<td align="center">1 (0.109%)</td>
<td align="center">0 (0%)</td>
<td align="center">1 (0.067%)</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex ~<span class="st"> </span><span class="kw">kwt</span>(age.ord), <span class="dt">data =</span> mockstudy)) <span class="co">#) #, pfootnote = TRUE)</span></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="22%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>age.ord</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.067</td>
</tr>
<tr class="even">
<td>    10-19</td>
<td align="center">1 (0.109%)</td>
<td align="center">0 (0%)</td>
<td align="center">1 (0.067%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    20-29</td>
<td align="center">8 (0.873%)</td>
<td align="center">11 (1.89%)</td>
<td align="center">19 (1.27%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    30-39</td>
<td align="center">37 (4.04%)</td>
<td align="center">30 (5.15%)</td>
<td align="center">67 (4.47%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    40-49</td>
<td align="center">127 (13.9%)</td>
<td align="center">83 (14.2%)</td>
<td align="center">210 (14%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    50-59</td>
<td align="center">257 (28.1%)</td>
<td align="center">179 (30.7%)</td>
<td align="center">436 (29.1%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    60-69</td>
<td align="center">298 (32.5%)</td>
<td align="center">170 (29.2%)</td>
<td align="center">468 (31.2%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    70-79</td>
<td align="center">168 (18.3%)</td>
<td align="center">101 (17.3%)</td>
<td align="center">269 (17.9%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    80-89</td>
<td align="center">20 (2.18%)</td>
<td align="center">9 (1.54%)</td>
<td align="center">29 (1.93%)</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="summarize-a-survival-variable" class="section level2">
<h2>4. Summarize a survival variable</h2>
<p>First look at the information that is presented by the <code>survfit</code> function, then see how the same results can be seen with tableby. The default is to show the median survival (time at which the probability of survival = 50%).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">survfit</span>(<span class="kw">Surv</span>(fu.time, fu.stat)~sex, <span class="dt">data=</span>mockstudy)</code></pre></div>
<pre><code>## Call: survfit(formula = Surv(fu.time, fu.stat) ~ sex, data = mockstudy)
## 
##              n events median 0.95LCL 0.95UCL
## sex=Male   916    829    550     515     590
## sex=Female 583    527    543     511     575</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">survdiff</span>(<span class="kw">Surv</span>(fu.time, fu.stat)~sex, <span class="dt">data=</span>mockstudy)</code></pre></div>
<pre><code>## Call:
## survdiff(formula = Surv(fu.time, fu.stat) ~ sex, data = mockstudy)
## 
##              N Observed Expected (O-E)^2/E (O-E)^2/V
## sex=Male   916      829      830  0.000370  0.000956
## sex=Female 583      527      526  0.000583  0.000956
## 
##  Chisq= 0  on 1 degrees of freedom, p= 0.975</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex ~<span class="st"> </span><span class="kw">Surv</span>(fu.time, fu.stat), <span class="dt">data=</span>mockstudy))</code></pre></div>
<table>
<colgroup>
<col width="22%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Surv(fu.time, fu.stat)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.975</td>
</tr>
<tr class="even">
<td>    Events</td>
<td align="center">829</td>
<td align="center">527</td>
<td align="center">1356</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    medSurv</td>
<td align="center">550</td>
<td align="center">543</td>
<td align="center">546</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p>It is also possible to obtain summaries of the %survival at certain time points (say the probability of surviving 1-year).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">survfit</span>(<span class="kw">Surv</span>(fu.time/<span class="fl">365.25</span>, fu.stat)~sex, <span class="dt">data=</span>mockstudy), <span class="dt">times=</span><span class="dv">1</span>:<span class="dv">5</span>)</code></pre></div>
<pre><code>## Call: survfit(formula = Surv(fu.time/365.25, fu.stat) ~ sex, data = mockstudy)
## 
##                 sex=Male 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1    626     286   0.6870  0.0153       0.6576       0.7177
##     2    309     311   0.3437  0.0158       0.3142       0.3761
##     3    152     151   0.1748  0.0127       0.1516       0.2015
##     4     57      61   0.0941  0.0104       0.0759       0.1168
##     5     24      16   0.0628  0.0095       0.0467       0.0844
## 
##                 sex=Female 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1    380     202   0.6531  0.0197       0.6155        0.693
##     2    190     189   0.3277  0.0195       0.2917        0.368
##     3     95      90   0.1701  0.0157       0.1420        0.204
##     4     51      32   0.1093  0.0133       0.0861        0.139
##     5     18      12   0.0745  0.0126       0.0534        0.104</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex ~<span class="st"> </span><span class="kw">Surv</span>(fu.time/<span class="fl">365.25</span>, fu.stat), <span class="dt">data=</span>mockstudy, <span class="dt">times=</span><span class="dv">1</span>:<span class="dv">5</span>, <span class="dt">surv.stats=</span><span class="kw">c</span>(<span class="st">&quot;NeventsSurv&quot;</span>,<span class="st">&quot;NriskSurv&quot;</span>)))</code></pre></div>
<pre><code>## Warning in tableby(sex ~ Surv(fu.time/365.25, fu.stat), data = mockstudy, : unused arguments: times</code></pre>
<table>
<colgroup>
<col width="22%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Surv(fu.time/365.25, fu.stat)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.975</td>
</tr>
<tr class="even">
<td><strong>NeventsSurv</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.975</td>
</tr>
<tr class="odd">
<td>    1</td>
<td align="center">286 (68.7)</td>
<td align="center">202 (65.3)</td>
<td align="center">488 (67.4)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    2</td>
<td align="center">597 (34.4)</td>
<td align="center">391 (32.8)</td>
<td align="center">988 (33.7)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    3</td>
<td align="center">748 (17.5)</td>
<td align="center">481 (17)</td>
<td align="center">1229 (17.3)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    4</td>
<td align="center">809 (9.41)</td>
<td align="center">513 (10.9)</td>
<td align="center">1322 (10.1)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    5</td>
<td align="center">825 (6.28)</td>
<td align="center">525 (7.45)</td>
<td align="center">1350 (6.78)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>NriskSurv</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.975</td>
</tr>
<tr class="odd">
<td>    1</td>
<td align="center">626</td>
<td align="center">380</td>
<td align="center">1006</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    2</td>
<td align="center">309</td>
<td align="center">190</td>
<td align="center">499</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    3</td>
<td align="center">152</td>
<td align="center">95</td>
<td align="center">247</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    4</td>
<td align="center">57</td>
<td align="center">51</td>
<td align="center">108</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    5</td>
<td align="center">24</td>
<td align="center">18</td>
<td align="center">42</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="summarize-date-variables" class="section level2">
<h2>5. Summarize date variables</h2>
<p>Date variables by default are summarized with the number of missing values, the median, and the range. For example purposes we’ve created a random date. Missing values are introduced for impossible February dates.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">set.seed</span>(<span class="dv">100</span>)
N &lt;-<span class="st"> </span><span class="kw">nrow</span>(mockstudy)
mockstudy$dtentry &lt;-<span class="st"> </span><span class="kw">mdy.Date</span>(<span class="dt">month=</span><span class="kw">sample</span>(<span class="dv">1</span>:<span class="dv">12</span>,N,<span class="dt">replace=</span>T), <span class="dt">day=</span><span class="kw">sample</span>(<span class="dv">1</span>:<span class="dv">29</span>,N,<span class="dt">replace=</span>T), 
                              <span class="dt">year=</span><span class="kw">sample</span>(<span class="dv">2005</span>:<span class="dv">2009</span>,N,<span class="dt">replace=</span>T))
<span class="kw">summary</span>(<span class="kw">tableby</span>(sex ~<span class="st"> </span>dtentry, <span class="dt">data=</span>mockstudy))</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="22%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>dtentry</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.554</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">3</td>
<td align="center">2</td>
<td align="center">5</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    median</td>
<td align="center">2007-06-16</td>
<td align="center">2007-06-15</td>
<td align="center">2007-06-15</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">2005-01-03 - 2009-12-27</td>
<td align="center">2005-01-01 - 2009-12-28</td>
<td align="center">2005-01-01 - 2009-12-28</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="summarize-multiple-variables-without-typing-them-out" class="section level2">
<h2>6. Summarize multiple variables without typing them out</h2>
<p>Often one wants to summarize a number of variables. Instead of typing by hand each individual variable, an alternative approach is to create a formula using the <code>paste</code> command with the <code>collapse=&quot;+&quot;</code> option.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## create a vector specifying the variable names
myvars &lt;-<span class="st"> </span><span class="kw">names</span>(mockstudy)

## select the 8th through the last variables
## paste them together, separated by the + sign
RHS &lt;-<span class="st"> </span><span class="kw">paste</span>(myvars[<span class="dv">8</span>:<span class="dv">10</span>], <span class="dt">collapse=</span><span class="st">&quot;+&quot;</span>)
RHS</code></pre></div>
<p>[1] “ps+hgb+bmi”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## create a formula using the as.formula function
<span class="kw">as.formula</span>(<span class="kw">paste</span>(<span class="st">'arm ~ '</span>, RHS))</code></pre></div>
<p>arm ~ ps + hgb + bmi</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## use the formula in the tableby function
<span class="kw">summary</span>(<span class="kw">tableby</span>(<span class="kw">as.formula</span>(<span class="kw">paste</span>(<span class="st">'arm ~'</span>, RHS)), <span class="dt">data=</span>mockstudy))</code></pre></div>
<table>
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ps</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.903</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">0.529 (0.597)</td>
<td align="center">0.547 (0.595)</td>
<td align="center">0.537 (0.606)</td>
<td align="center">0.539 (0.598)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">0, 1</td>
<td align="center">0, 1</td>
<td align="center">0, 1</td>
<td align="center">0, 1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">0 - 2</td>
<td align="center">0 - 2</td>
<td align="center">0 - 2</td>
<td align="center">0 - 2</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.639</td>
</tr>
<tr class="odd">
<td>    N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">12.3 (1.69)</td>
<td align="center">12.4 (1.76)</td>
<td align="center">12.4 (1.68)</td>
<td align="center">12.3 (1.72)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">11, 13.4</td>
<td align="center">11.1, 13.6</td>
<td align="center">11.2, 13.6</td>
<td align="center">11.1, 13.5</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">9.06 - 17.3</td>
<td align="center">9 - 18.2</td>
<td align="center">9 - 17</td>
<td align="center">9 - 18.2</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.892</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">27.3 (5.55)</td>
<td align="center">27.2 (5.17)</td>
<td align="center">27.1 (5.75)</td>
<td align="center">27.2 (5.43)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">23.6, 30.6</td>
<td align="center">23.7, 30.1</td>
<td align="center">23.2, 29.6</td>
<td align="center">23.5, 30.1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">14.1 - 53</td>
<td align="center">16.6 - 49.1</td>
<td align="center">15.4 - 60.2</td>
<td align="center">14.1 - 60.2</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p>These steps can also be done using the <code>formulize</code> function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## The formulize function does the paste and as.formula steps
tmp &lt;-<span class="st"> </span><span class="kw">formulize</span>(<span class="st">'arm'</span>,myvars[<span class="dv">8</span>:<span class="dv">10</span>])
tmp</code></pre></div>
<p>arm ~ ps + hgb + bmi &lt;environment: 0x674d838&gt;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## More complex formulas could also be written using formulize
tmp2 &lt;-<span class="st"> </span><span class="kw">formulize</span>(<span class="st">'arm'</span>,<span class="kw">c</span>(<span class="st">'ps'</span>,<span class="st">'hgb^2'</span>,<span class="st">'bmi'</span>))

## use the formula in the tableby function
<span class="kw">summary</span>(<span class="kw">tableby</span>(tmp, <span class="dt">data=</span>mockstudy))</code></pre></div>
<table>
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ps</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.903</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">0.529 (0.597)</td>
<td align="center">0.547 (0.595)</td>
<td align="center">0.537 (0.606)</td>
<td align="center">0.539 (0.598)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">0, 1</td>
<td align="center">0, 1</td>
<td align="center">0, 1</td>
<td align="center">0, 1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">0 - 2</td>
<td align="center">0 - 2</td>
<td align="center">0 - 2</td>
<td align="center">0 - 2</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.639</td>
</tr>
<tr class="odd">
<td>    N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">12.3 (1.69)</td>
<td align="center">12.4 (1.76)</td>
<td align="center">12.4 (1.68)</td>
<td align="center">12.3 (1.72)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">11, 13.4</td>
<td align="center">11.1, 13.6</td>
<td align="center">11.2, 13.6</td>
<td align="center">11.1, 13.5</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">9.06 - 17.3</td>
<td align="center">9 - 18.2</td>
<td align="center">9 - 17</td>
<td align="center">9 - 18.2</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.892</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">27.3 (5.55)</td>
<td align="center">27.2 (5.17)</td>
<td align="center">27.1 (5.75)</td>
<td align="center">27.2 (5.43)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">23.6, 30.6</td>
<td align="center">23.7, 30.1</td>
<td align="center">23.2, 29.6</td>
<td align="center">23.5, 30.1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">14.1 - 53</td>
<td align="center">16.6 - 49.1</td>
<td align="center">15.4 - 60.2</td>
<td align="center">14.1 - 60.2</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="subset-the-dataset-used-in-the-analysis" class="section level2">
<h2>7. Subset the dataset used in the analysis</h2>
<p>Here are two ways to get the same result (limit the analysis to subjects age&gt;5 and in the F: FOLFOX treatment group).</p>
<ul>
<li>The first approach uses the subset function applied to the dataset <code>mockstudy</code>. This example also selects a subset of variables. The <code>tableby</code> function is then applied to this subsetted data.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">newdata &lt;-<span class="st"> </span><span class="kw">subset</span>(mockstudy, <span class="dt">subset=</span>age&gt;<span class="dv">50</span> &amp;<span class="st"> </span>arm==<span class="st">'F: FOLFOX'</span>, <span class="dt">select =</span> <span class="kw">c</span>(sex,ps:bmi))
<span class="kw">dim</span>(mockstudy)</code></pre></div>
<pre><code>## [1] 1499   16</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(mockstudy$arm)</code></pre></div>
<pre><code>## 
##    A: IFL F: FOLFOX   G: IROX 
##       428       691       380</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(newdata)</code></pre></div>
<pre><code>## [1] 557   4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(newdata)</code></pre></div>
<pre><code>## [1] &quot;sex&quot; &quot;ps&quot;  &quot;hgb&quot; &quot;bmi&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex ~<span class="st"> </span>., <span class="dt">data=</span>newdata))</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="22%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">Male (N=333)</th>
<th align="center">Female (N=224)</th>
<th align="center">Total (N=557)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ps</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.652</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">64</td>
<td align="center">44</td>
<td align="center">108</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">0.554 (0.6)</td>
<td align="center">0.528 (0.602)</td>
<td align="center">0.543 (0.6)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">0, 1</td>
<td align="center">0, 1</td>
<td align="center">0, 1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">0 - 2</td>
<td align="center">0 - 2</td>
<td align="center">0 - 2</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">&lt;0.001</td>
</tr>
<tr class="odd">
<td>    N-Miss</td>
<td align="center">64</td>
<td align="center">44</td>
<td align="center">108</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">12.7 (1.92)</td>
<td align="center">12.1 (1.4)</td>
<td align="center">12.5 (1.76)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">11.3, 14</td>
<td align="center">11, 12.9</td>
<td align="center">11.2, 13.7</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">9 - 18.2</td>
<td align="center">9.1 - 15.9</td>
<td align="center">9 - 18.2</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>bmi</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.650</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">9</td>
<td align="center">6</td>
<td align="center">15</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">27.5 (4.78)</td>
<td align="center">27.3 (5.51)</td>
<td align="center">27.5 (5.08)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">24.4, 30.2</td>
<td align="center">23.3, 30.4</td>
<td align="center">24, 30.4</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">17.9 - 47.5</td>
<td align="center">16.6 - 49.1</td>
<td align="center">16.6 - 49.1</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<ul>
<li>The second approach does the same analysis but uses the subset argument within <code>tableby</code> to subset the data.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex ~<span class="st"> </span>ps +<span class="st"> </span>hgb +<span class="st"> </span>bmi, <span class="dt">subset=</span>age&gt;<span class="dv">50</span> &amp;<span class="st"> </span>arm==<span class="st">&quot;F: FOLFOX&quot;</span>, <span class="dt">data=</span>mockstudy))</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="22%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">Male (N=333)</th>
<th align="center">Female (N=224)</th>
<th align="center">Total (N=557)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ps</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.652</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">64</td>
<td align="center">44</td>
<td align="center">108</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">0.554 (0.6)</td>
<td align="center">0.528 (0.602)</td>
<td align="center">0.543 (0.6)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">0, 1</td>
<td align="center">0, 1</td>
<td align="center">0, 1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">0 - 2</td>
<td align="center">0 - 2</td>
<td align="center">0 - 2</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">&lt;0.001</td>
</tr>
<tr class="odd">
<td>    N-Miss</td>
<td align="center">64</td>
<td align="center">44</td>
<td align="center">108</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">12.7 (1.92)</td>
<td align="center">12.1 (1.4)</td>
<td align="center">12.5 (1.76)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">11.3, 14</td>
<td align="center">11, 12.9</td>
<td align="center">11.2, 13.7</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">9 - 18.2</td>
<td align="center">9.1 - 15.9</td>
<td align="center">9 - 18.2</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>bmi</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.650</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">9</td>
<td align="center">6</td>
<td align="center">15</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">27.5 (4.78)</td>
<td align="center">27.3 (5.51)</td>
<td align="center">27.5 (5.08)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">24.4, 30.2</td>
<td align="center">23.3, 30.4</td>
<td align="center">24, 30.4</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">17.9 - 47.5</td>
<td align="center">16.6 - 49.1</td>
<td align="center">16.6 - 49.1</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="create-combinations-of-variables-on-the-fly" class="section level2">
<h2>8. Create combinations of variables on the fly</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## create a variable combining the levels of mdquality.s and sex
<span class="kw">with</span>(mockstudy, <span class="kw">table</span>(<span class="kw">interaction</span>(mdquality.s,sex)))</code></pre></div>
<pre><code>## 
##   0.Male   1.Male 0.Female 1.Female 
##       77      686       47      437</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">tableby</span>(arm ~<span class="st"> </span><span class="kw">interaction</span>(mdquality.s,sex), <span class="dt">data=</span>mockstudy))</code></pre></div>
<table>
<colgroup>
<col width="18%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>interaction(mdquality.s, sex)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.493</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">55</td>
<td align="center">156</td>
<td align="center">41</td>
<td align="center">252</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    0.Male</td>
<td align="center">29 (7.77%)</td>
<td align="center">31 (5.79%)</td>
<td align="center">17 (5.01%)</td>
<td align="center">77 (6.17%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    1.Male</td>
<td align="center">214 (57.4%)</td>
<td align="center">285 (53.3%)</td>
<td align="center">187 (55.2%)</td>
<td align="center">686 (55%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    0.Female</td>
<td align="center">12 (3.22%)</td>
<td align="center">21 (3.93%)</td>
<td align="center">14 (4.13%)</td>
<td align="center">47 (3.77%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    1.Female</td>
<td align="center">118 (31.6%)</td>
<td align="center">198 (37%)</td>
<td align="center">121 (35.7%)</td>
<td align="center">437 (35%)</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## create a new grouping variable with combined levels of arm and sex
<span class="kw">summary</span>(<span class="kw">tableby</span>(<span class="kw">interaction</span>(mdquality.s, sex) ~<span class="st">  </span>age +<span class="st"> </span>bmi, <span class="dt">data=</span>mockstudy, <span class="dt">subset=</span>arm==<span class="st">&quot;F: FOLFOX&quot;</span>))</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="16%"></col>
<col width="13%"></col>
<col width="13%"></col>
<col width="13%"></col>
<col width="13%"></col>
<col width="13%"></col>
<col width="13%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">0.Male (N=31)</th>
<th align="center">1.Male (N=285)</th>
<th align="center">0.Female (N=21)</th>
<th align="center">1.Female (N=198)</th>
<th align="center">Total (N=535)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Age</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.190</td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">63.1 (11.7)</td>
<td align="center">60.7 (11.8)</td>
<td align="center">60.8 (10.1)</td>
<td align="center">58.9 (11.4)</td>
<td align="center">60.2 (11.6)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">56, 72</td>
<td align="center">53, 69</td>
<td align="center">51, 67</td>
<td align="center">51, 68</td>
<td align="center">52, 69</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">41 - 82</td>
<td align="center">19 - 88</td>
<td align="center">42 - 81</td>
<td align="center">29 - 83</td>
<td align="center">19 - 88</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>bmi</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.894</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">0</td>
<td align="center">6</td>
<td align="center">1</td>
<td align="center">5</td>
<td align="center">12</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">26.6 (5.09)</td>
<td align="center">27.4 (4.7)</td>
<td align="center">27.4 (4.9)</td>
<td align="center">27.3 (5.67)</td>
<td align="center">27.3 (5.1)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">22.8, 29.2</td>
<td align="center">24.3, 30.2</td>
<td align="center">23.7, 29.6</td>
<td align="center">23.1, 30.4</td>
<td align="center">23.9, 30.3</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">20.2 - 41.8</td>
<td align="center">17.9 - 47.5</td>
<td align="center">19.8 - 39.4</td>
<td align="center">16.8 - 44.8</td>
<td align="center">16.8 - 47.5</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="transform-variables-on-the-fly" class="section level2">
<h2>9. Transform variables on the fly</h2>
<p>Certain transformations need to be surrounded by <code>I()</code> so that R knows to treat it as a variable transformation and not some special model feature. If the transformation includes any of the symbols <code>/ - + ^ *</code> then surround the new variable by <code>I()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">trans &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm ~<span class="st"> </span><span class="kw">I</span>(age/<span class="dv">10</span>) +<span class="st"> </span><span class="kw">log</span>(bmi) +<span class="st"> </span><span class="kw">factor</span>(mdquality.s, <span class="dt">levels=</span><span class="dv">0</span>:<span class="dv">1</span>, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">'N'</span>,<span class="st">'Y'</span>)),
                 <span class="dt">data=</span>mockstudy)
<span class="kw">summary</span>(trans)</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>I(age/10)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.614</td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">5.97 (1.14)</td>
<td align="center">6.03 (1.16)</td>
<td align="center">5.98 (1.15)</td>
<td align="center">6 (1.15)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">5.3, 6.8</td>
<td align="center">5.2, 6.9</td>
<td align="center">5.2, 6.8</td>
<td align="center">5.2, 6.8</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">2.7 - 8.8</td>
<td align="center">1.9 - 8.8</td>
<td align="center">2.6 - 8.5</td>
<td align="center">1.9 - 8.8</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>log(bmi)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.811</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">3.29 (0.197)</td>
<td align="center">3.29 (0.183)</td>
<td align="center">3.28 (0.2)</td>
<td align="center">3.28 (0.192)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">3.16, 3.42</td>
<td align="center">3.17, 3.41</td>
<td align="center">3.14, 3.39</td>
<td align="center">3.16, 3.41</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">2.64 - 3.97</td>
<td align="center">2.81 - 3.89</td>
<td align="center">2.74 - 4.1</td>
<td align="center">2.64 - 4.1</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>factor(mdquality.s, levels = 0:1, labels = c(“N”, “Y”))</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.694</td>
</tr>
<tr class="odd">
<td>    N-Miss</td>
<td align="center">55</td>
<td align="center">156</td>
<td align="center">41</td>
<td align="center">252</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    N</td>
<td align="center">41 (11%)</td>
<td align="center">52 (9.72%)</td>
<td align="center">31 (9.14%)</td>
<td align="center">124 (9.94%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Y</td>
<td align="center">332 (89%)</td>
<td align="center">483 (90.3%)</td>
<td align="center">308 (90.9%)</td>
<td align="center">1123 (90.1%)</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p>The labels for these variables isn’t exactly what we’d like so we can change modify those after the fact. Instead of typing out the very long variable names you can modify specific labels by position.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">labels</span>(trans)</code></pre></div>
<pre><code>##                                                           arm 
##                                               &quot;Treatment Arm&quot; 
##                                                     I(age/10) 
##                                                   &quot;I(age/10)&quot; 
##                                                      log(bmi) 
##                                                    &quot;log(bmi)&quot; 
##       factor(mdquality.s, levels = 0:1, labels = c(&quot;N&quot;, &quot;Y&quot;)) 
## &quot;factor(mdquality.s, levels = 0:1, labels = c(\&quot;N\&quot;, \&quot;Y\&quot;))&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">labels</span>(trans)[<span class="dv">2</span>:<span class="dv">4</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'Age per 10 yrs'</span>, <span class="st">'log(BMI)'</span>, <span class="st">'MD Quality'</span>)
<span class="kw">labels</span>(trans)</code></pre></div>
<pre><code>##                                                     arm 
##                                         &quot;Treatment Arm&quot; 
##                                               I(age/10) 
##                                        &quot;Age per 10 yrs&quot; 
##                                                log(bmi) 
##                                              &quot;log(BMI)&quot; 
## factor(mdquality.s, levels = 0:1, labels = c(&quot;N&quot;, &quot;Y&quot;)) 
##                                            &quot;MD Quality&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(trans)</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Age per 10 yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.614</td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">5.97 (1.14)</td>
<td align="center">6.03 (1.16)</td>
<td align="center">5.98 (1.15)</td>
<td align="center">6 (1.15)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">5.3, 6.8</td>
<td align="center">5.2, 6.9</td>
<td align="center">5.2, 6.8</td>
<td align="center">5.2, 6.8</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">2.7 - 8.8</td>
<td align="center">1.9 - 8.8</td>
<td align="center">2.6 - 8.5</td>
<td align="center">1.9 - 8.8</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>log(BMI)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.811</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">3.29 (0.197)</td>
<td align="center">3.29 (0.183)</td>
<td align="center">3.28 (0.2)</td>
<td align="center">3.28 (0.192)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">3.16, 3.42</td>
<td align="center">3.17, 3.41</td>
<td align="center">3.14, 3.39</td>
<td align="center">3.16, 3.41</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">2.64 - 3.97</td>
<td align="center">2.81 - 3.89</td>
<td align="center">2.74 - 4.1</td>
<td align="center">2.64 - 4.1</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>MD Quality</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.694</td>
</tr>
<tr class="odd">
<td>    N-Miss</td>
<td align="center">55</td>
<td align="center">156</td>
<td align="center">41</td>
<td align="center">252</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    N</td>
<td align="center">41 (11%)</td>
<td align="center">52 (9.72%)</td>
<td align="center">31 (9.14%)</td>
<td align="center">124 (9.94%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Y</td>
<td align="center">332 (89%)</td>
<td align="center">483 (90.3%)</td>
<td align="center">308 (90.9%)</td>
<td align="center">1123 (90.1%)</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p>Note that if we had not changed <code>mdquality.s</code> to a factor, it would have been summarized as though it were a continuous variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(mockstudy$mdquality.s)</code></pre></div>
<p>[1] “integer”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">tableby</span>(arm~mdquality.s, <span class="dt">data=</span>mockstudy))</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>mdquality.s</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.695</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">55</td>
<td align="center">156</td>
<td align="center">41</td>
<td align="center">252</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">0.89 (0.313)</td>
<td align="center">0.903 (0.297)</td>
<td align="center">0.909 (0.289)</td>
<td align="center">0.901 (0.299)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">1, 1</td>
<td align="center">1, 1</td>
<td align="center">1, 1</td>
<td align="center">1, 1</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">0 - 1</td>
<td align="center">0 - 1</td>
<td align="center">0 - 1</td>
<td align="center">0 - 1</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p>Another option would be to specify the test and summary statistics. In fact, if I had a set of variables coded 0/1 and that was all I was summarizing, then I could change the global option for continuous variables to use the chi-square test and show countpct.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">tableby</span>(arm ~<span class="st"> </span><span class="kw">chisq</span>(mdquality.s, <span class="st">&quot;Nmiss&quot;</span>,<span class="st">&quot;countpct&quot;</span>), <span class="dt">data=</span>mockstudy))</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>mdquality.s</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.694</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">55</td>
<td align="center">156</td>
<td align="center">41</td>
<td align="center">252</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    0</td>
<td align="center">41 (11)</td>
<td align="center">52 (9.72)</td>
<td align="center">31 (9.14)</td>
<td align="center">124 (9.94)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    1</td>
<td align="center">332 (89)</td>
<td align="center">483 (90.3)</td>
<td align="center">308 (90.9)</td>
<td align="center">1123 (90.1)</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="change-the-ordering-of-the-variables-or-delete-a-variable" class="section level2">
<h2>10. Change the ordering of the variables or delete a variable</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mytab &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm ~<span class="st"> </span>sex +<span class="st"> </span>alk.phos +<span class="st"> </span>age, <span class="dt">data=</span>mockstudy)
mytab2 &lt;-<span class="st"> </span>mytab[<span class="kw">c</span>(<span class="st">'age'</span>,<span class="st">'sex'</span>,<span class="st">'alk.phos'</span>)]
<span class="kw">summary</span>(mytab2)</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.614</td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">59.7 (11.4)</td>
<td align="center">60.3 (11.6)</td>
<td align="center">59.8 (11.5)</td>
<td align="center">60 (11.5)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">53, 68</td>
<td align="center">52, 69</td>
<td align="center">52, 68</td>
<td align="center">52, 68</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">27 - 88</td>
<td align="center">19 - 88</td>
<td align="center">26 - 85</td>
<td align="center">19 - 88</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.190</td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60%)</td>
<td align="center">916 (61.1%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40%)</td>
<td align="center">583 (38.9%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>alk.phos</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.226</td>
</tr>
<tr class="odd">
<td>    N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">176 (129)</td>
<td align="center">162 (122)</td>
<td align="center">174 (139)</td>
<td align="center">169 (128)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">89, 217</td>
<td align="center">85, 195</td>
<td align="center">87.8, 210</td>
<td align="center">86, 207</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">11 - 858</td>
<td align="center">10 - 1014</td>
<td align="center">7 - 982</td>
<td align="center">7 - 1014</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(mytab[<span class="kw">c</span>(<span class="st">'age'</span>,<span class="st">'sex'</span>)], <span class="dt">nsmall =</span> <span class="dv">2</span>)</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.614</td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">59.67 (11.36)</td>
<td align="center">60.3 (11.63)</td>
<td align="center">59.76 (11.5)</td>
<td align="center">59.99 (11.52)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">53, 68</td>
<td align="center">52, 69</td>
<td align="center">52, 68</td>
<td align="center">52, 68</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">27 - 88</td>
<td align="center">19 - 88</td>
<td align="center">26 - 85</td>
<td align="center">19 - 88</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.190</td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">277 (64.72%)</td>
<td align="center">411 (59.48%)</td>
<td align="center">228 (60%)</td>
<td align="center">916 (61.11%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">151 (35.28%)</td>
<td align="center">280 (40.52%)</td>
<td align="center">152 (40%)</td>
<td align="center">583 (38.89%)</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(mytab[<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>)], <span class="dt">nsmall =</span> <span class="dv">3</span>)</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.614</td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">53, 68</td>
<td align="center">52, 69</td>
<td align="center">52, 68</td>
<td align="center">52, 68</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">27 - 88</td>
<td align="center">19 - 88</td>
<td align="center">26 - 85</td>
<td align="center">19 - 88</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.190</td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">277 (64.72%)</td>
<td align="center">411 (59.479%)</td>
<td align="center">228 (60%)</td>
<td align="center">916 (61.107%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">151 (35.28%)</td>
<td align="center">280 (40.521%)</td>
<td align="center">152 (40%)</td>
<td align="center">583 (38.893%)</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="merge-two-tableby-objects-together" class="section level2">
<h2>11. Merge two <code>tableby</code> objects together</h2>
<p>It is possible to combine two tableby objects so that they print out together.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## demographics
tab1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm ~<span class="st"> </span>sex +<span class="st"> </span>age, <span class="dt">data=</span>mockstudy,
                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss&quot;</span>,<span class="st">&quot;meansd&quot;</span>), <span class="dt">total=</span><span class="ot">FALSE</span>))
## lab data
tab2 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm ~<span class="st"> </span>hgb +<span class="st"> </span>alk.phos, <span class="dt">data=</span>mockstudy,
                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss&quot;</span>,<span class="st">&quot;median&quot;</span>,<span class="st">&quot;q1q3&quot;</span>),
                                        <span class="dt">numeric.test=</span><span class="st">&quot;kwt&quot;</span>, <span class="dt">total=</span><span class="ot">FALSE</span>))
<span class="kw">names</span>(tab1$x)</code></pre></div>
<p>[1] “sex” “age”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(tab2$x)</code></pre></div>
<p>[1] “hgb” “alk.phos”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab12 &lt;-<span class="st"> </span><span class="kw">merge</span>(tab1,tab2)
<span class="kw">class</span>(tab12)</code></pre></div>
<p>[1] “tableby”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(tab12$x)</code></pre></div>
<p>[1] “sex” “age” “hgb” “alk.phos”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(tab12) <span class="co">#, pfootnote=TRUE)</span></code></pre></div>
<table>
<colgroup>
<col width="23%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.190</td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.614</td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">59.7 (11.4)</td>
<td align="center">60.3 (11.6)</td>
<td align="center">59.8 (11.5)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.570</td>
</tr>
<tr class="odd">
<td>    N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    median</td>
<td align="center">12.1</td>
<td align="center">12.2</td>
<td align="center">12.4</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">11, 13.4</td>
<td align="center">11.1, 13.6</td>
<td align="center">11.2, 13.6</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>alk.phos</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.104</td>
</tr>
<tr class="odd">
<td>    N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    median</td>
<td align="center">133</td>
<td align="center">116</td>
<td align="center">122</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">89, 217</td>
<td align="center">85, 195</td>
<td align="center">87.8, 210</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="add-a-title-to-the-table" class="section level2">
<h2>12. Add a title to the table</h2>
<p>When creating a pdf the tables are automatically numbered and the title appears below the table. In Word and HTML, the titles appear un-numbered and above the table.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm ~<span class="st"> </span>sex +<span class="st"> </span>age, <span class="dt">data=</span>mockstudy)
<span class="kw">summary</span>(t1, <span class="dt">title=</span><span class="st">'Demographics'</span>)</code></pre></div>
<table style="width:100%;">
<caption><strong>Demographics</strong></caption>
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.190</td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60%)</td>
<td align="center">916 (61.1%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40%)</td>
<td align="center">583 (38.9%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.614</td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">59.7 (11.4)</td>
<td align="center">60.3 (11.6)</td>
<td align="center">59.8 (11.5)</td>
<td align="center">60 (11.5)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">53, 68</td>
<td align="center">52, 69</td>
<td align="center">52, 68</td>
<td align="center">52, 68</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">27 - 88</td>
<td align="center">19 - 88</td>
<td align="center">26 - 85</td>
<td align="center">19 - 88</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="modify-how-missing-values-are-displayed" class="section level2">
<h2>13. Modify how missing values are displayed</h2>
<p>Depending on the report you are writing you have the following options:</p>
<ul>
<li><p>Show how many subjects have each variable</p></li>
<li><p>Show how many subjects are missing each variable</p></li>
<li><p>Show how many subjects are missing each variable only if there are any missing values</p></li>
<li><p>Don’t indicate missing values at all</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## look at how many missing values there are for each variable
<span class="kw">apply</span>(<span class="kw">is.na</span>(mockstudy),<span class="dv">2</span>,sum)</code></pre></div>
<pre><code>##        case         age         arm         sex        race     fu.time     fu.stat          ps 
##           0           0           0           0           7           0           0         266 
##         hgb         bmi    alk.phos         ast mdquality.s     age.ord  age.ordnew     dtentry 
##         266          33         266         266         252           0           1           5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Show how many subjects have each variable (non-missing)
<span class="kw">summary</span>(<span class="kw">tableby</span>(sex ~<span class="st"> </span>ast +<span class="st"> </span>age, <span class="dt">data=</span>mockstudy,
                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;N&quot;</span>,<span class="st">&quot;median&quot;</span>), <span class="dt">total=</span><span class="ot">FALSE</span>)))</code></pre></div>
<table style="width:99%;">
<colgroup>
<col width="27%"></col>
<col width="23%"></col>
<col width="23%"></col>
<col width="23%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.921</td>
</tr>
<tr class="even">
<td>    N</td>
<td align="center">754</td>
<td align="center">479</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    median</td>
<td align="center">27</td>
<td align="center">27</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.048</td>
</tr>
<tr class="odd">
<td>    N</td>
<td align="center">916</td>
<td align="center">583</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    median</td>
<td align="center">61</td>
<td align="center">60</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Always list the number of missing values
<span class="kw">summary</span>(<span class="kw">tableby</span>(sex ~<span class="st"> </span>ast +<span class="st"> </span>age, <span class="dt">data=</span>mockstudy,
                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss2&quot;</span>,<span class="st">&quot;median&quot;</span>), <span class="dt">total=</span><span class="ot">FALSE</span>)))</code></pre></div>
<table style="width:99%;">
<colgroup>
<col width="27%"></col>
<col width="23%"></col>
<col width="23%"></col>
<col width="23%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.921</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">162</td>
<td align="center">104</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    median</td>
<td align="center">27</td>
<td align="center">27</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.048</td>
</tr>
<tr class="odd">
<td>    N-Miss</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    median</td>
<td align="center">61</td>
<td align="center">60</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Only show the missing values if there are some (default)
<span class="kw">summary</span>(<span class="kw">tableby</span>(sex ~<span class="st"> </span>ast +<span class="st"> </span>age, <span class="dt">data=</span>mockstudy, 
                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss&quot;</span>,<span class="st">&quot;mean&quot;</span>),<span class="dt">total=</span><span class="ot">FALSE</span>)))</code></pre></div>
<table style="width:99%;">
<colgroup>
<col width="27%"></col>
<col width="23%"></col>
<col width="23%"></col>
<col width="23%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.921</td>
</tr>
<tr class="even">
<td>    N-Miss</td>
<td align="center">162</td>
<td align="center">104</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    mean</td>
<td align="center">35.9</td>
<td align="center">36</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.048</td>
</tr>
<tr class="odd">
<td>    mean</td>
<td align="center">60.5</td>
<td align="center">59.2</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Don't show N at all
<span class="kw">summary</span>(<span class="kw">tableby</span>(sex ~<span class="st"> </span>ast +<span class="st"> </span>age, <span class="dt">data=</span>mockstudy, 
                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;mean&quot;</span>),<span class="dt">total=</span><span class="ot">FALSE</span>)))</code></pre></div>
<table style="width:99%;">
<colgroup>
<col width="27%"></col>
<col width="23%"></col>
<col width="23%"></col>
<col width="23%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.921</td>
</tr>
<tr class="even">
<td>    mean</td>
<td align="center">35.9</td>
<td align="center">36</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.048</td>
</tr>
<tr class="even">
<td>    mean</td>
<td align="center">60.5</td>
<td align="center">59.2</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="modify-the-number-of-digits-used" class="section level2">
<h2>14. Modify the number of digits used</h2>
<p>Within tableby.control function there are 4 options for controlling the number of significant digits shown.</p>
<ul>
<li><p>digits: controls the number of significant digits (counting both before and after the decimal point) for continuous variables</p></li>
<li><p>nsmall: controls the number of digits after the decimal point for continous variables</p></li>
<li><p>nsmall.pct: controls the number of digits after the decimal point for percentages</p></li>
<li><p>digits.test: controls the number of digits after the decimal point for p-values (default=3)</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">tableby</span>(arm ~<span class="st"> </span>sex +<span class="st"> </span>age +<span class="st"> </span>fu.time, <span class="dt">data=</span>mockstudy), <span class="dt">digits=</span><span class="dv">4</span>, <span class="dt">digits.test=</span><span class="dv">2</span>, <span class="dt">nsmall.pct=</span><span class="dv">1</span>)</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.19</td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.61</td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">59.67 (11.36)</td>
<td align="center">60.3 (11.63)</td>
<td align="center">59.76 (11.5)</td>
<td align="center">59.99 (11.52)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">53, 68</td>
<td align="center">52, 69</td>
<td align="center">52, 68</td>
<td align="center">52, 68</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">27 - 88</td>
<td align="center">19 - 88</td>
<td align="center">26 - 85</td>
<td align="center">19 - 88</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>fu.time</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">&lt;0.01</td>
</tr>
<tr class="odd">
<td>    Mean (SD)</td>
<td align="center">553.6 (419.6)</td>
<td align="center">731.2 (487.7)</td>
<td align="center">607.2 (435.5)</td>
<td align="center">649.1 (462.5)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Q1, Q3</td>
<td align="center">255.5, 724.2</td>
<td align="center">345, 1046</td>
<td align="center">306.5, 807</td>
<td align="center">309.5, 878.5</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Range</td>
<td align="center">9 - 2170</td>
<td align="center">0 - 2472</td>
<td align="center">17 - 2118</td>
<td align="center">0 - 2472</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<p>It is important to understand how R treats the <code>digits</code> argument. Here are some summaries for the variable <code>pi</code>. Note that with 4 digits, the number after the decimal point changes after multiplying pi by 10 or 100. However, the <code>nsmall</code> option specifies the number of values after the decimal point. The two can be used together (see the help file for <code>format</code> for more details on how that works).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(pi, <span class="dt">digits=</span><span class="dv">1</span>)</code></pre></div>
<pre><code>## [1] &quot;3&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(pi, <span class="dt">digits=</span><span class="dv">3</span>)</code></pre></div>
<pre><code>## [1] &quot;3.14&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(pi, <span class="dt">digits=</span><span class="dv">4</span>)</code></pre></div>
<pre><code>## [1] &quot;3.142&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(pi*<span class="dv">10</span>, <span class="dt">digits=</span><span class="dv">4</span>)</code></pre></div>
<pre><code>## [1] &quot;31.42&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(pi*<span class="dv">100</span>, <span class="dt">digits=</span><span class="dv">4</span>)</code></pre></div>
<pre><code>## [1] &quot;314.2&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(pi*<span class="dv">100</span>, <span class="dt">nsmall=</span><span class="dv">4</span>)</code></pre></div>
<pre><code>## [1] &quot;314.1593&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(pi*<span class="dv">100</span>, <span class="dt">nsmall=</span><span class="dv">2</span>, <span class="dt">digits=</span><span class="dv">4</span>)</code></pre></div>
<pre><code>## [1] &quot;314.16&quot;</code></pre>
</div>
<div id="create-a-user-defined-summary-statistic" class="section level2">
<h2>15. Create a user-defined summary statistic</h2>
<p>For purposes of this example, the code below creates a trimmed mean function (trims 10%) and use that to summarize the data. Note the use of the <code>...</code> which tells R to pass extra arguments on - this is required for user-defined functions. In this case, <code>na.rm=T</code> is passed to <code>myfunc</code>. The <em>weights</em> argument is also required, even though it isn’t passed on to the internal function in this particular example.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myfunc &lt;-<span class="st"> </span>function(x, <span class="dt">weights=</span><span class="kw">rep</span>(<span class="dv">1</span>,<span class="kw">length</span>(x)), ...){
  <span class="kw">mean</span>(x, <span class="dt">trim=</span>.<span class="dv">1</span>, ...)
}

<span class="kw">summary</span>(<span class="kw">tableby</span>(sex ~<span class="st"> </span>hgb, <span class="dt">data=</span>mockstudy, 
                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss&quot;</span>,<span class="st">&quot;myfunc&quot;</span>), <span class="dt">numeric.test=</span><span class="st">&quot;kwt&quot;</span>,
                    <span class="dt">stats.labels=</span><span class="kw">list</span>(<span class="dt">Nmiss=</span><span class="st">'Missing values'</span>, <span class="dt">myfunc=</span><span class="st">&quot;Trimmed Mean, 10%&quot;</span>))))</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="22%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">&lt;0.001</td>
</tr>
<tr class="even">
<td>    Missing values</td>
<td align="center">162</td>
<td align="center">104</td>
<td align="center">266</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Trimmed Mean, 10%</td>
<td align="center">12.6</td>
<td align="center">11.9</td>
<td align="center">12.3</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="use-case-weights-for-creating-summary-statistics" class="section level2">
<h2>16. Use case-weights for creating summary statistics</h2>
<p>When comparing groups, they are often unbalanced when it comes to nuisances such as age and sex. The <code>tableby</code> function allows you to create weighted summary statistics. If this option us used then p-values are not calculated (<code>test=FALSE</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">##create fake group that is not balanced by age/sex 
<span class="kw">set.seed</span>(<span class="dv">200</span>)
mockstudy$fake_arm &lt;-<span class="st"> </span><span class="kw">ifelse</span>(mockstudy$age&gt;<span class="dv">60</span> &amp;<span class="st"> </span>mockstudy$sex==<span class="st">'Female'</span>,<span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">'A'</span>,<span class="st">'B'</span>),<span class="dt">replace=</span>T, <span class="dt">prob=</span><span class="kw">c</span>(.<span class="dv">2</span>,.<span class="dv">8</span>)),
                            <span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">'A'</span>,<span class="st">'B'</span>),<span class="dt">replace=</span>T, <span class="dt">prob=</span><span class="kw">c</span>(.<span class="dv">8</span>,.<span class="dv">4</span>)))

mockstudy$agegp &lt;-<span class="st"> </span><span class="kw">cut</span>(mockstudy$age, <span class="dt">breaks=</span><span class="kw">c</span>(<span class="dv">18</span>,<span class="dv">50</span>,<span class="dv">60</span>,<span class="dv">70</span>,<span class="dv">90</span>), <span class="dt">right=</span><span class="ot">FALSE</span>)

## create weights based on agegp and sex distribution
tab1 &lt;-<span class="st"> </span><span class="kw">with</span>(mockstudy,<span class="kw">table</span>(agegp, sex))
tab2 &lt;-<span class="st"> </span><span class="kw">with</span>(mockstudy, <span class="kw">table</span>(agegp, sex, fake_arm))
tab2</code></pre></div>
<pre><code>## , , fake_arm = A
## 
##          sex
## agegp     Male Female
##   [18,50)   73     62
##   [50,60)  128     94
##   [60,70)  139      7
##   [70,90)  102      0
## 
## , , fake_arm = B
## 
##          sex
## agegp     Male Female
##   [18,50)   79     48
##   [50,60)  130     84
##   [60,70)  156    166
##   [70,90)  109    122</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gpwts &lt;-<span class="st"> </span><span class="kw">rep</span>(tab1, <span class="kw">length</span>(<span class="kw">unique</span>(mockstudy$fake_arm)))/tab2
gpwts[gpwts&gt;<span class="dv">50</span>] &lt;-<span class="st"> </span><span class="dv">30</span>

## apply weights to subjects
index &lt;-<span class="st"> </span><span class="kw">with</span>(mockstudy, <span class="kw">cbind</span>(<span class="kw">as.numeric</span>(agegp), <span class="kw">as.numeric</span>(sex), <span class="kw">as.numeric</span>(<span class="kw">as.factor</span>(fake_arm)))) 
mockstudy$wts &lt;-<span class="st"> </span>gpwts[index]

## show weights by treatment arm group
<span class="kw">tapply</span>(mockstudy$wts,mockstudy$fake_arm, summary)</code></pre></div>
<pre><code>## $A
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   1.774   1.894   2.069   2.276   2.082  24.710 
## 
## $B
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   1.000   1.042   1.924   1.677   1.985   2.292</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">orig &lt;-<span class="st"> </span><span class="kw">tableby</span>(fake_arm ~<span class="st"> </span>age +<span class="st"> </span>sex +<span class="st"> </span><span class="kw">Surv</span>(fu.time/<span class="dv">365</span>, fu.stat), <span class="dt">data=</span>mockstudy, <span class="dt">test=</span><span class="ot">FALSE</span>)
<span class="kw">summary</span>(orig, <span class="dt">title=</span><span class="st">'No Case Weights used'</span>)</code></pre></div>
<table>
<caption><strong>No Case Weights used</strong></caption>
<colgroup>
<col width="28%"></col>
<col width="23%"></col>
<col width="23%"></col>
<col width="23%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A (N=605)</th>
<th align="center">B (N=894)</th>
<th align="center">Total (N=1499)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">57.4 (11.6)</td>
<td align="center">61.7 (11.1)</td>
<td align="center">60 (11.5)</td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">50, 66</td>
<td align="center">55, 70</td>
<td align="center">52, 68</td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">22 - 85</td>
<td align="center">19 - 88</td>
<td align="center">19 - 88</td>
</tr>
<tr class="odd">
<td><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">442 (73.1%)</td>
<td align="center">474 (53%)</td>
<td align="center">916 (61.1%)</td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">163 (26.9%)</td>
<td align="center">420 (47%)</td>
<td align="center">583 (38.9%)</td>
</tr>
<tr class="even">
<td><strong>Surv(fu.time/365, fu.stat)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Events</td>
<td align="center">554</td>
<td align="center">802</td>
<td align="center">1356</td>
</tr>
<tr class="even">
<td>    medSurv</td>
<td align="center">1.5</td>
<td align="center">1.49</td>
<td align="center">1.5</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(fake_arm ~<span class="st"> </span>age +<span class="st"> </span>sex +<span class="st"> </span><span class="kw">Surv</span>(fu.time/<span class="dv">365</span>, fu.stat), <span class="dt">data=</span>mockstudy, <span class="dt">weights=</span>wts)
<span class="kw">summary</span>(tab1, <span class="dt">title=</span><span class="st">'Case Weights used'</span>)</code></pre></div>
<table>
<caption><strong>Case Weights used</strong></caption>
<colgroup>
<col width="28%"></col>
<col width="23%"></col>
<col width="23%"></col>
<col width="23%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A (N=605)</th>
<th align="center">B (N=894)</th>
<th align="center">Total (N=1499)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">58 (10.9)</td>
<td align="center">60.2 (11.4)</td>
<td align="center">59.1 (11.2)</td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">51, 65</td>
<td align="center">53, 68</td>
<td align="center">52, 67</td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">22 - 85</td>
<td align="center">19 - 88</td>
<td align="center">19 - 88</td>
</tr>
<tr class="odd">
<td><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">916 (66.5%)</td>
<td align="center">916 (61.1%)</td>
<td align="center">1832 (63.7%)</td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">461 (33.5%)</td>
<td align="center">583 (38.9%)</td>
<td align="center">1044 (36.3%)</td>
</tr>
<tr class="even">
<td><strong>Surv(fu.time/365, fu.stat)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Events</td>
<td align="center">1252</td>
<td align="center">1348</td>
<td align="center">2599</td>
</tr>
<tr class="even">
<td>    medSurv</td>
<td align="center">1.53</td>
<td align="center">1.5</td>
<td align="center">1.53</td>
</tr>
</tbody>
</table>
</div>
<div id="create-your-own-p-value-and-add-it-to-the-table" class="section level2">
<h2>17. Create your own p-value and add it to the table</h2>
<p>When using weighted summary statistics, it is often desirable to then show a p-value from a model that corresponds to the weighted analysis. It is possible to add your own p-value and modify the column title for that new p-value. Another use for this would be to add standardized differences or confidence intervals instead of a p-value.</p>
<p>To add the p-value you simply need to create a data frame and use the function <code>modpval.tableby</code>. The first 2 columns in the dataframe are required and are the variable name and the new p-value. The third column can be used to indicate what method was used to calculate the p-value. If you specify <code>use.pname=TRUE</code> then the column name indicating the p-value will be also be used in the tableby summary.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mypval &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">variable=</span><span class="kw">c</span>(<span class="st">'age'</span>,<span class="st">'sex'</span>,<span class="st">'Surv(fu.time/365, fu.stat)'</span>), 
                     <span class="dt">adj.pvalue=</span><span class="kw">c</span>(.<span class="dv">953</span>,.<span class="dv">811</span>,.<span class="dv">01</span>), 
                     <span class="dt">method=</span><span class="kw">c</span>(<span class="st">'Age/Sex adjusted model results'</span>))
tab2 &lt;-<span class="st"> </span><span class="kw">modpval.tableby</span>(tab1, mypval, <span class="dt">use.pname=</span><span class="ot">TRUE</span>)
<span class="kw">summary</span>(tab2, <span class="dt">title=</span><span class="st">'Case Weights used, p-values added'</span>) <span class="co">#, pfootnote=TRUE)</span></code></pre></div>
<table>
<caption><strong>Case Weights used, p-values added</strong></caption>
<colgroup>
<col width="22%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
<col width="19%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A (N=605)</th>
<th align="center">B (N=894)</th>
<th align="center">Total (N=1499)</th>
<th align="center">adj.pvalue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.953</td>
</tr>
<tr class="even">
<td>    Mean (SD)</td>
<td align="center">58 (10.9)</td>
<td align="center">60.2 (11.4)</td>
<td align="center">59.1 (11.2)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Q1, Q3</td>
<td align="center">51, 65</td>
<td align="center">53, 68</td>
<td align="center">52, 67</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    Range</td>
<td align="center">22 - 85</td>
<td align="center">19 - 88</td>
<td align="center">19 - 88</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.811</td>
</tr>
<tr class="even">
<td>    Male</td>
<td align="center">916 (66.5%)</td>
<td align="center">916 (61.1%)</td>
<td align="center">1832 (63.7%)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td>    Female</td>
<td align="center">461 (33.5%)</td>
<td align="center">583 (38.9%)</td>
<td align="center">1044 (36.3%)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td><strong>Surv(fu.time/365, fu.stat)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.010</td>
</tr>
<tr class="odd">
<td>    Events</td>
<td align="center">1252</td>
<td align="center">1348</td>
<td align="center">2599</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    medSurv</td>
<td align="center">1.53</td>
<td align="center">1.5</td>
<td align="center">1.53</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="for-two-level-categorical-variables-only-display-one-level." class="section level2">
<h2>18. For two-level categorical variables, only display one level.</h2>
<p>If the <code>cat.simplify</code> option is set to TRUE then only the second level of the group. In the example below sex has the levels and “Female” is the second level, hence only the %female is shown in the table. Similarly, “mdquality.s” was turned to a factor and “1” is the second level, hence</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(mockstudy$sex)</code></pre></div>
<p>[1] “Male” “Female”</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">table2 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm~sex +<span class="st"> </span><span class="kw">factor</span>(mdquality.s), <span class="dt">data=</span>mockstudy, <span class="dt">cat.simplify=</span><span class="ot">TRUE</span>)
<span class="kw">summary</span>(table2, <span class="dt">labelTranslations=</span><span class="kw">c</span>(<span class="dt">sex=</span><span class="st">&quot;Female&quot;</span>, <span class="st">&quot;factor(mdquality.s)&quot;</span>=<span class="st">&quot;MD Quality&quot;</span>))</code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="19%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
</colgroup>
<thead>
<tr class="header">
<th></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Female</strong></td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40%)</td>
<td align="center">583 (38.9%)</td>
<td align="center">0.190</td>
</tr>
<tr class="even">
<td><strong>MD Quality</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.694</td>
</tr>
<tr class="odd">
<td>    N-Miss</td>
<td align="center">55</td>
<td align="center">156</td>
<td align="center">41</td>
<td align="center">252</td>
<td align="center"></td>
</tr>
<tr class="even">
<td>    1</td>
<td align="center">332 (89%)</td>
<td align="center">483 (90.3%)</td>
<td align="center">308 (90.9%)</td>
<td align="center">1123 (90.1%)</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
<div id="use-tableby-within-an-sweave-document" class="section level2">
<h2>19. Use <code>tableby</code> within an Sweave document</h2>
<p>For those users who wish to create tables within an Sweave document, the following code seems to work.</p>
<pre><code>\documentclass{article}

\usepackage{longtable}
\usepackage{pdfpages}

\begin{document}

\section{Read in Data}
&lt;&lt;echo=TRUE&gt;&gt;=
require(arsenal)
require(knitr)
require(rmarkdown)
data(mockstudy)

tab1 &lt;- tableby(arm~sex+age, data=mockstudy)
@

\section{Convert Summary.Tableby to LaTeX}
&lt;&lt;echo=TRUE, results='hide', message=FALSE&gt;&gt;=
capture.output(summary(tab1), file=&quot;Test.md&quot;)

## Convert R Markdown Table to LaTeX
render(&quot;Test.md&quot;, pdf_document(keep_tex=TRUE))
@ 

\includepdf{Test.pdf}

\end{document}</code></pre>
</div>
<div id="export-tableby-object-to-a-.csv-file" class="section level2">
<h2>20. Export <code>tableby</code> object to a .CSV file</h2>
<p>When looking at multiple variables it is sometimes useful to export the results to a csv file. The <code>as.data.frame</code> function creates a data frame object that can be exported or further manipulated within R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm~sex+age, <span class="dt">data=</span>mockstudy)
<span class="kw">summary</span>(tab1, <span class="dt">text=</span>T)</code></pre></div>
<pre><code>## 
## ---------------------------------------------------------------------------------------------------------------------------
##                          A: IFL (N=428)      F: FOLFOX (N=691)   G: IROX (N=380)     Total (N=1499)      p value           
## ----------------------- ------------------- ------------------- ------------------- ------------------- -------------------
## Gender                                                                                                                0.190
##    Male                 277 (64.7%)         411 (59.5%)         228 (60%)           916 (61.1%)        
##    Female               151 (35.3%)         280 (40.5%)         152 (40%)           583 (38.9%)        
## Age in Years                                                                                                          0.614
##    Mean (SD)            59.7 (11.4)         60.3 (11.6)         59.8 (11.5)         60 (11.5)          
##    Q1, Q3               53, 68              52, 69              52, 68              52, 68             
##    Range                27 - 88             19 - 88             26 - 85             19 - 88            
## ---------------------------------------------------------------------------------------------------------------------------</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tmp &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(tab1)
tmp</code></pre></div>
<pre><code>##           term variable A: IFL (N=428) F: FOLFOX (N=691) G: IROX (N=380) Total (N=1499) p value
## 1       Gender      sex                                                                   0.190
## 2         Male      sex    277 (64.7%)       411 (59.5%)       228 (60%)    916 (61.1%)        
## 3       Female      sex    151 (35.3%)       280 (40.5%)       152 (40%)    583 (38.9%)        
## 4 Age in Years      age                                                                   0.614
## 5    Mean (SD)      age    59.7 (11.4)       60.3 (11.6)     59.8 (11.5)      60 (11.5)        
## 6       Q1, Q3      age         53, 68            52, 69          52, 68         52, 68        
## 7        Range      age        27 - 88           19 - 88         26 - 85        19 - 88</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># write.csv(tmp, '/my/path/here/mymodel.csv')</span></code></pre></div>
</div>
<div id="write-tableby-object-to-a-separate-word-or-html-file" class="section level2">
<h2>21. Write <code>tableby</code> object to a separate Word or HTML file</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## write to an HTML document
tab1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm ~<span class="st"> </span>sex +<span class="st"> </span>age, <span class="dt">data=</span>mockstudy)
<span class="kw">write2html</span>(tab1, <span class="st">&quot;~/trash.html&quot;</span>)

## write to a Word document
<span class="kw">write2word</span>(tab1, <span class="st">&quot;~/trash.doc&quot;</span>, <span class="dt">title=</span><span class="st">&quot;My table in Word&quot;</span>)</code></pre></div>
</div>
</div>
<div id="available-function-options" class="section level1">
<h1>Available Function Options</h1>
<div id="summary-statistics" class="section level2">
<h2>Summary statistics</h2>
<p>The <strong>default</strong> summary statistics, by varible type, are:</p>
<ul>
<li><code>cont</code>: Continuous variables will show by default <code>Nmiss, meansd, q1q3, range</code></li>
<li><code>cat</code>: Categorical and factor variables will show by default <code>Nmiss, countpct</code></li>
<li><code>ordered</code>: Ordered factors will show by default <code>Nmiss, countpct</code></li>
<li><code>surv</code>: Survival variables will show by default <code>Nmiss, Nevents, medsurv</code></li>
<li><code>date</code>: Date variables will show by default <code>Nmiss, median, range</code></li>
<li><code>group</code>: The grouping variable will show by default <code>countpct</code></li>
</ul>
<p>Any summary statistics standardly defined in R (e.g. mean, median, sd, med, range) can be specified, however there are a number of extra functions defined specifically for the tableby function.</p>
<ul>
<li><code>N</code>: a count of the number of observations for a particular group</li>
<li><code>Nmiss</code>: always show a count of the number of missing values for a variable within each group</li>
<li><code>Nmiss2</code>: only show the count of the number of missing values if there are some missing values(not developed yet)</li>
<li><code>meansd</code>: print the mean and standard deviation in the format <code>mean(sd)</code></li>
<li><code>countpct</code>: print the number of values in a category plus the percentage in the format <code>N (%)</code></li>
<li><code>medianq1q3</code>: print the median, 25th, and 75th quantiles <code>median (Q1, Q3)</code></li>
<li><code>q1q3</code>: print the 25th and 75th quantiles <code>Q1, Q3</code></li>
<li><code>medianrange</code>: print the median, minimum and maximum values <code>median (minimum, maximum)</code></li>
<li><code>Nevents</code>: print number of events for a survival object within each grouping level</li>
<li><code>medsurv</code>: print the median survival</li>
</ul>
</div>
<div id="testing-options" class="section level2">
<h2>Testing options</h2>
<p>The tests used to calculate p-values differ by the variable type, but can be specified explicitly in the formula statement or in the control function.</p>
<p>The following tests are accepted:</p>
<ul>
<li><p><code>anova</code>: analysis of variance test; the default test for continuous variables. When the grouping variable has two levels, it is equivalent to the two-sample t-test with equal variance.</p></li>
<li><p><code>kwt</code>: Kruskal-Wallis test, optional test for continuous variables. When the grouping variable has two levels, it is equivalent to the Wilcoxon Rank Sum test.</p></li>
<li><p><code>chisq</code>: chi-square goodness of fit test for equal counts of a categorical variable across categories; the default for categorical or factor variables</p></li>
<li><p><code>fe</code>: Fisher’s exact test for categorical variables; optional</p></li>
<li><p><code>logrank</code>: log-rank test, the default test for time-to-event variables</p></li>
<li><p><code>trend</code>: The <code>independence_test</code> function from the <code>coin</code> is used to test for trends. Whenthe grouping variable has two levels, it is equivalent to the Armitage trend test. This is the default for ordered factors</p></li>
</ul>
</div>
<div id="tableby.control-settings" class="section level2">
<h2><code>tableby.control</code> settings</h2>
<p>A quick way to see what arguments are possible to utilize in a function is to use the <code>args()</code> command. Settings involving the number of digits can be set in <code>tableby.control</code> or in <code>summary.tableby</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">args</span>(tableby.control)</code></pre></div>
<pre><code>## function (test = TRUE, total = TRUE, test.pname = NULL, cat.simplify = FALSE, 
##     numeric.test = &quot;anova&quot;, cat.test = &quot;chisq&quot;, ordered.test = &quot;trend&quot;, 
##     surv.test = &quot;logrank&quot;, date.test = &quot;kwt&quot;, numeric.stats = c(&quot;Nmiss&quot;, 
##         &quot;meansd&quot;, &quot;q1q3&quot;, &quot;range&quot;), cat.stats = c(&quot;Nmiss&quot;, &quot;countpct&quot;), 
##     ordered.stats = c(&quot;Nmiss&quot;, &quot;countpct&quot;), surv.stats = c(&quot;Nevents&quot;, 
##         &quot;medSurv&quot;), date.stats = c(&quot;Nmiss&quot;, &quot;median&quot;, &quot;range&quot;), 
##     stats.labels = list(Nmiss = &quot;N-Miss&quot;, Nmiss2 = &quot;N-Miss&quot;, 
##         meansd = &quot;Mean (SD)&quot;, q1q3 = &quot;Q1, Q3&quot;, range = &quot;Range&quot;, 
##         countpct = &quot;Count (Pct)&quot;, Nevents = &quot;Events&quot;, medsurv = &quot;Median Survival&quot;), 
##     digits = 3, digits.test = NULL, nsmall = NULL, nsmall.pct = NULL, 
##     ...) 
## NULL</code></pre>
<p>Settings:</p>
<ul>
<li>test=TRUE (show p-values in table)</li>
<li>total=TRUE (show summaries for entire dataset in addition to doing it by the group)</li>
<li>test.pname=NULL (column name used when supplying own “p-value” or other summary value to the report)</li>
<li>cat.simplify (for dichotomous variables, only show statistics for 2nd level)</li>
<li>digits=3 (number of significant digits for continuous variables)</li>
<li>digits.test=3 (number of significant digits for p-values)</li>
<li>nsmall=NULL (number of digits after the decimal point for continous variables)</li>
<li>nsmall.pct=2 (number of digits after the decimal for percentages)</li>
<li>test.pname=NULL (use column name other than “P-Value” )</li>
<li>numeric.test, numeric.stats</li>
<li>cat.test, cat.stats</li>
<li>ordered.test, ordered.stats</li>
<li>surv.test, surv.stats</li>
</ul>
</div>
<div id="summary.tableby-settings" class="section level2">
<h2><code>summary.tableby</code> settings</h2>
<p>The <code>summary.tableby</code> function has options that modify how the table appears (such as adding a title or modifying labels).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">args</span>(arsenal:::summary.tableby)</code></pre></div>
<pre><code>## function (object, title = NULL, labelTranslations = NULL, digits = NA, 
##     nsmall = NA, nsmall.pct = NA, digits.test = NA, text = FALSE, 
##     removeBlanks = text, labelSize = 1.2, test = NA, test.pname = NA, 
##     pfootnote = NA, total = NA, ...) 
## NULL</code></pre>
<p>Settings:</p>
<ul>
<li>digits</li>
<li>digits.test</li>
<li>nsmall</li>
<li>nsmall.pct</li>
<li>test.pname</li>
<li>title=NULL</li>
<li>labelTranslations (allows user to modify variable labels)</li>
<li>text=FALSE</li>
<li>removeBlanks=FALSE (used on conjunction with text=TRUE to clean up output)</li>
<li>labelSize=1.2</li>
<li>pfootnote</li>
</ul>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
