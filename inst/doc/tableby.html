<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Beth Atkinson, Ethan Heinzen, Jason Sinnwell, Shannon McDonnell and Greg Dougherty" />


<title>The tableby function</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">The tableby function</h1>
<h4 class="author">Beth Atkinson, Ethan Heinzen, Jason Sinnwell, Shannon McDonnell and Greg Dougherty</h4>


<div id="TOC">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#simple-example">Simple Example</a><ul>
<li><a href="#pretty-text-version-of-table">Pretty text version of table</a></li>
<li><a href="#pretty-rmarkdown-version-of-table">Pretty Rmarkdown version of table</a></li>
<li><a href="#data-frame-version-of-table">Data frame version of table</a></li>
<li><a href="#summaries-using-standard-r-code">Summaries using standard R code</a></li>
</ul></li>
<li><a href="#modifying-output">Modifying Output</a><ul>
<li><a href="#add-labels">Add labels</a></li>
<li><a href="#change-summary-statistics-globally">Change summary statistics globally</a></li>
<li><a href="#change-summary-statistics-within-the-formula">Change summary statistics within the formula</a></li>
<li><a href="#controlling-options-for-categorical-tests-chisq-and-fishers">Controlling Options for Categorical Tests (Chisq and Fisher’s)</a></li>
<li><a href="#modifying-the-look-feel-in-word-documents">Modifying the look &amp; feel in Word documents</a></li>
</ul></li>
<li><a href="#additional-examples">Additional Examples</a><ul>
<li><a href="#summarize-without-a-groupby-variable">1. Summarize without a group/by variable</a></li>
<li><a href="#display-footnotes-indicating-which-test-was-used">2. Display footnotes indicating which “test” was used</a></li>
<li><a href="#summarize-an-ordered-factor">3. Summarize an ordered factor</a></li>
<li><a href="#summarize-a-survival-variable">4. Summarize a survival variable</a></li>
<li><a href="#summarize-date-variables">5. Summarize date variables</a></li>
<li><a href="#summarize-multiple-variables-without-typing-them-out">6. Summarize multiple variables without typing them out</a></li>
<li><a href="#subset-the-dataset-used-in-the-analysis">7. Subset the dataset used in the analysis</a></li>
<li><a href="#create-combinations-of-variables-on-the-fly">8. Create combinations of variables on the fly</a></li>
<li><a href="#transform-variables-on-the-fly">9. Transform variables on the fly</a></li>
<li><a href="#subsetting-change-the-ordering-of-the-variables-delete-a-variable-sort-by-p-value-filter-by-p-value">10. Subsetting (change the ordering of the variables, delete a variable, sort by p-value, filter by p-value)</a></li>
<li><a href="#merge-two-tableby-objects-together">11. Merge two <code>tableby</code> objects together</a></li>
<li><a href="#add-a-title-to-the-table">12. Add a title to the table</a></li>
<li><a href="#modify-how-missing-values-are-displayed">13. Modify how missing values are displayed</a></li>
<li><a href="#modify-the-number-of-digits-used">14. Modify the number of digits used</a></li>
<li><a href="#create-a-user-defined-summary-statistic">15. Create a user-defined summary statistic</a></li>
<li><a href="#use-case-weights-for-creating-summary-statistics">16. Use case-weights for creating summary statistics</a></li>
<li><a href="#create-your-own-p-value-and-add-it-to-the-table">17. Create your own p-value and add it to the table</a></li>
<li><a href="#for-two-level-categorical-variables-or-one-line-numeric-variables-simplify-the-output.">18. For two-level categorical variables or one-line numeric variables, simplify the output.</a></li>
<li><a href="#use-tableby-within-an-sweave-document">19. Use <code>tableby</code> within an Sweave document</a></li>
<li><a href="#export-tableby-object-to-a-.csv-file">20. Export <code>tableby</code> object to a .CSV file</a></li>
<li><a href="#write-tableby-object-to-a-separate-word-or-html-file">21. Write <code>tableby</code> object to a separate Word or HTML file</a></li>
<li><a href="#use-tableby-in-r-shiny">22. Use <code>tableby</code> in R Shiny</a></li>
<li><a href="#use-tableby-in-bookdown">23. Use <code>tableby</code> in bookdown</a></li>
<li><a href="#adjust-tableby-for-multiple-p-values">24. Adjust <code>tableby</code> for multiple p-values</a></li>
<li><a href="#tabulate-multiple-endpoints">25. Tabulate multiple endpoints</a></li>
<li><a href="#tabulate-data-by-a-non-test-group-strata">26. Tabulate data by a non-test group (strata)</a></li>
</ul></li>
<li><a href="#available-function-options">Available Function Options</a><ul>
<li><a href="#summary-statistics">Summary statistics</a></li>
<li><a href="#testing-options">Testing options</a></li>
<li><a href="#tableby.control-settings"><code>tableby.control</code> settings</a></li>
<li><a href="#summary.tableby-settings"><code>summary.tableby</code> settings</a></li>
</ul></li>
</ul>
</div>

<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>One of the most common tables in medical literature includes summary statistics for a set of variables, often stratified by some group (e.g. treatment arm). Locally at Mayo, the SAS macros <code>%table</code> and <code>%summary</code> were written to create summary tables with a single call. With the increasing interest in R, we have developed the function <code>tableby</code> to create similar tables within the R environment.</p>
<p>In developing the <code>tableby()</code> function, the goal was to bring the best features of these macros into an R function. However, the task was not simply to duplicate all the functionality, but rather to make use of R’s strengths (modeling, method dispersion, flexibility in function definition and output format) and make a tool that fits the needs of R users. Additionally, the results needed to fit within the general reproducible research framework so the tables could be displayed within an R markdown report.</p>
<p>This report provides step-by-step directions for using the functions associated with <code>tableby()</code>. All functions presented here are available within the <code>arsenal</code> package. An assumption is made that users are somewhat familiar with R Markdown documents. For those who are new to the topic, a good initial resource is available at <a href="http://rmarkdown.rstudio.com">rmarkdown.rstudio.com</a>.</p>
</div>
<div id="simple-example" class="section level1">
<h1>Simple Example</h1>
<p>The first step when using the <code>tableby</code> function is to load the <code>arsenal</code> package. All the examples in this report use a dataset called <code>mockstudy</code> made available by Paul Novotny which includes a variety of types of variables (character, numeric, factor, ordered factor, survival) to use as examples.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(arsenal)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">require</span>(knitr)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">require</span>(survival)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">data</span>(mockstudy) <span class="co">##load data</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw">dim</span>(mockstudy)  <span class="co">##look at how many subjects and variables are in the dataset </span></a></code></pre></div>
<pre><code>## [1] 1499   14</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># help(mockstudy) ##learn more about the dataset and variables</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">str</span>(mockstudy) <span class="co">##quick look at the data</span></a></code></pre></div>
<pre><code>## 'data.frame':    1499 obs. of  14 variables:
##  $ case       : int  110754 99706 105271 105001 112263 86205 99508 90158 88989 90515 ...
##  $ age        : int  67 74 50 71 69 56 50 57 51 63 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Age in Years&quot;
##  $ arm        : chr  &quot;F: FOLFOX&quot; &quot;A: IFL&quot; &quot;A: IFL&quot; &quot;G: IROX&quot; ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Treatment Arm&quot;
##  $ sex        : Factor w/ 2 levels &quot;Male&quot;,&quot;Female&quot;: 1 2 2 2 2 1 1 1 2 1 ...
##  $ race       : chr  &quot;Caucasian&quot; &quot;Caucasian&quot; &quot;Caucasian&quot; &quot;Caucasian&quot; ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Race&quot;
##  $ fu.time    : int  922 270 175 128 233 120 369 421 387 363 ...
##  $ fu.stat    : int  2 2 2 2 2 2 2 2 2 2 ...
##  $ ps         : int  0 1 1 1 0 0 0 0 1 1 ...
##  $ hgb        : num  11.5 10.7 11.1 12.6 13 10.2 13.3 12.1 13.8 12.1 ...
##  $ bmi        : num  25.1 19.5 NA 29.4 26.4 ...
##   ..- attr(*, &quot;label&quot;)= chr &quot;Body Mass Index (kg/m^2)&quot;
##  $ alk.phos   : int  160 290 700 771 350 569 162 152 231 492 ...
##  $ ast        : int  35 52 100 68 35 27 16 12 25 18 ...
##  $ mdquality.s: int  NA 1 1 1 NA 1 1 1 1 1 ...
##  $ age.ord    : Ord.factor w/ 8 levels &quot;10-19&quot;&lt;&quot;20-29&quot;&lt;..: 6 7 4 7 6 5 4 5 5 6 ...</code></pre>
<p>To create a simple table stratified by treatment arm, use a formula statement to specify the variables that you want summarized. The example below uses age (a continuous variable) and sex (a factor).</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">tab1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy)</a></code></pre></div>
<p>If you want to take a quick look at the table, you can use <code>summary()</code> on your tableby object and the table will print out as text in your R console window. If you use <code>summary()</code> without any options you will see a number of <span class="math inline">\(\&amp;nbsp;\)</span> statements which translates to “space” in HTML.</p>
<div id="pretty-text-version-of-table" class="section level2">
<h2>Pretty text version of table</h2>
<p>If you want a nicer version in your console window then add the <code>text=TRUE</code> option.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">summary</span>(tab1, <span class="dt">text=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## 
## 
## |             | A: IFL (N=428)  | F: FOLFOX (N=691) | G: IROX (N=380) | Total (N=1499)  | p value|
## |:------------|:---------------:|:-----------------:|:---------------:|:---------------:|-------:|
## |sex          |                 |                   |                 |                 |   0.190|
## |-  Male      |   277 (64.7%)   |    411 (59.5%)    |   228 (60.0%)   |   916 (61.1%)   |        |
## |-  Female    |   151 (35.3%)   |    280 (40.5%)    |   152 (40.0%)   |   583 (38.9%)   |        |
## |Age in Years |                 |                   |                 |                 |   0.614|
## |-  Mean (SD) | 59.673 (11.365) |  60.301 (11.632)  | 59.763 (11.499) | 59.985 (11.519) |        |
## |-  Range     | 27.000 - 88.000 |  19.000 - 88.000  | 26.000 - 85.000 | 19.000 - 88.000 |        |</code></pre>
</div>
<div id="pretty-rmarkdown-version-of-table" class="section level2">
<h2>Pretty Rmarkdown version of table</h2>
<p>In order for the report to look nice within an R markdown (knitr) report, you just need to specify <code>results=&quot;asis&quot;</code> when creating the R chunk. This changes the layout slightly (compresses it) and bolds the variable names.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">summary</span>(tab1)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>sex</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="even">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">27.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">26.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="data-frame-version-of-table" class="section level2">
<h2>Data frame version of table</h2>
<p>If you want a data.frame version, simply use <code>as.data.frame</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">as.data.frame</span>(tab1)</a></code></pre></div>
<pre><code>##   group.term   group.label strata.term variable     term        label variable.type
## 1        arm Treatment Arm                  sex      sex          sex   categorical
## 2        arm Treatment Arm                  sex countpct         Male   categorical
## 3        arm Treatment Arm                  sex countpct       Female   categorical
## 4        arm Treatment Arm                  age      age Age in Years       numeric
## 5        arm Treatment Arm                  age   meansd    Mean (SD)       numeric
## 6        arm Treatment Arm                  age    range        Range       numeric
##                A: IFL           F: FOLFOX            G: IROX              Total
## 1                                                                              
## 2 277.00000, 64.71963 411.00000, 59.47902            228, 60  916.0000, 61.1074
## 3 151.00000, 35.28037 280.00000, 40.52098            152, 40  583.0000, 38.8926
## 4                                                                              
## 5  59.67290, 11.36454  60.30101, 11.63225 59.76316, 11.49930 59.98532, 11.51877
## 6              27, 88              19, 88             26, 85             19, 88
##                         test   p.value
## 1 Pearson's Chi-squared test 0.1904388
## 2 Pearson's Chi-squared test 0.1904388
## 3 Pearson's Chi-squared test 0.1904388
## 4         Linear Model ANOVA 0.6143859
## 5         Linear Model ANOVA 0.6143859
## 6         Linear Model ANOVA 0.6143859</code></pre>
</div>
<div id="summaries-using-standard-r-code" class="section level2">
<h2>Summaries using standard R code</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co">## base R frequency example</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">tmp &lt;-<span class="st"> </span><span class="kw">table</span>(<span class="dt">Gender=</span>mockstudy<span class="op">$</span>sex, <span class="st">&quot;Study Arm&quot;</span>=mockstudy<span class="op">$</span>arm)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">tmp</a></code></pre></div>
<pre><code>##         Study Arm
## Gender   A: IFL F: FOLFOX G: IROX
##   Male      277       411     228
##   Female    151       280     152</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># Note: The continuity correction is applied by default in R (not used in %table)</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="kw">chisq.test</span>(tmp)</a></code></pre></div>
<pre><code>## 
##  Pearson's Chi-squared test
## 
## data:  tmp
## X-squared = 3.3168, df = 2, p-value = 0.1904</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co">## base R numeric summary example</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="kw">tapply</span>(mockstudy<span class="op">$</span>age, mockstudy<span class="op">$</span>arm, summary)</a></code></pre></div>
<pre><code>## $`A: IFL`
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   27.00   53.00   61.00   59.67   68.00   88.00 
## 
## $`F: FOLFOX`
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    19.0    52.0    61.0    60.3    69.0    88.0 
## 
## $`G: IROX`
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   26.00   52.00   61.00   59.76   68.00   85.00</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">aov</span>(age <span class="op">~</span><span class="st"> </span>arm, <span class="dt">data=</span>mockstudy))</a></code></pre></div>
<pre><code>##               Df Sum Sq Mean Sq F value Pr(&gt;F)
## arm            2    129    64.7   0.487  0.614
## Residuals   1496 198628   132.8</code></pre>
</div>
</div>
<div id="modifying-output" class="section level1">
<h1>Modifying Output</h1>
<div id="add-labels" class="section level2">
<h2>Add labels</h2>
<p>In the above example, age is shown with a label (Age in Years), but sex is listed “as is” with lower case letters. This is because the data was created in SAS and in the SAS dataset, age had a label but sex did not. The label is stored as an attribute within R.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co">## Look at one variable's label</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="kw">attr</span>(mockstudy<span class="op">$</span>age,<span class="st">'label'</span>)</a></code></pre></div>
<pre><code>## [1] &quot;Age in Years&quot;</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co">## See all the variables with a label</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="kw">unlist</span>(<span class="kw">lapply</span>(mockstudy,<span class="st">'attr'</span>,<span class="st">'label'</span>))</a></code></pre></div>
<pre><code>##                        age                        arm                       race 
##             &quot;Age in Years&quot;            &quot;Treatment Arm&quot;                     &quot;Race&quot; 
##                        bmi 
## &quot;Body Mass Index (kg/m^2)&quot;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="co"># Can also use labels(mockstudy)</span></a></code></pre></div>
<p>If you want to add labels to other variables, there are a couple of options. First, you could add labels to the variables in your dataset.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw">attr</span>(mockstudy<span class="op">$</span>sex,<span class="st">'label'</span>)  &lt;-<span class="st"> 'Gender'</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2"></a>
<a class="sourceLine" id="cb24-3" data-line-number="3">tab1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy)</a>
<a class="sourceLine" id="cb24-4" data-line-number="4"><span class="kw">summary</span>(tab1)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="even">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age in Years</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">27.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">26.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>You can also use the built-in <code>data.frame</code> method for <code>labels&lt;-</code>:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">labels</span>(mockstudy)  &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">age =</span> <span class="st">'Age, yrs'</span>, <span class="dt">sex =</span> <span class="st">&quot;Gender&quot;</span>)</a>
<a class="sourceLine" id="cb25-2" data-line-number="2"></a>
<a class="sourceLine" id="cb25-3" data-line-number="3">tab1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy)</a>
<a class="sourceLine" id="cb25-4" data-line-number="4"><span class="kw">summary</span>(tab1)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="even">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">27.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">26.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>Another option is to add labels after you have created the table</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">mylabels &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">sex =</span> <span class="st">&quot;SEX&quot;</span>, <span class="dt">age =</span> <span class="st">&quot;Age, yrs&quot;</span>)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="kw">summary</span>(tab1, <span class="dt">labelTranslations =</span> mylabels)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>SEX</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="even">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">27.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">26.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>Alternatively, you can check the variable labels and manipulate them with a function called <code>labels</code>, which works on the <code>tableby</code> object.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">labels</span>(tab1)</a></code></pre></div>
<pre><code>##             arm             sex             age 
## &quot;Treatment Arm&quot;        &quot;Gender&quot;      &quot;Age, yrs&quot;</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw">labels</span>(tab1) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">arm=</span><span class="st">&quot;Treatment Assignment&quot;</span>, <span class="dt">age=</span><span class="st">&quot;Baseline Age (yrs)&quot;</span>)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="kw">labels</span>(tab1)</a></code></pre></div>
<pre><code>##                    arm                    sex                    age 
## &quot;Treatment Assignment&quot;               &quot;Gender&quot;   &quot;Baseline Age (yrs)&quot;</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">summary</span>(tab1)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="even">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Baseline Age (yrs)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">27.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">26.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="change-summary-statistics-globally" class="section level2">
<h2>Change summary statistics globally</h2>
<p>Currently the default behavior is to summarize continuous variables with: Number of missing values, Mean (SD), 25th - 75th quantiles, and Minimum-Maximum values with an ANOVA (t-test with equal variances) p-value. For categorical variables the default is to show: Number of missing values and count (column percent) with a chi-square p-value. This behavior can be modified using the tableby.control function. In fact, you can save your standard settings and use that for future tables. Note that <code>test=FALSE</code> and <code>total=FALSE</code> results in the total column and p-value column not being printed.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">mycontrols  &lt;-<span class="st"> </span><span class="kw">tableby.control</span>(<span class="dt">test=</span><span class="ot">FALSE</span>, <span class="dt">total=</span><span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb32-2" data-line-number="2">                               <span class="dt">numeric.test=</span><span class="st">&quot;kwt&quot;</span>, <span class="dt">cat.test=</span><span class="st">&quot;chisq&quot;</span>,</a>
<a class="sourceLine" id="cb32-3" data-line-number="3">                               <span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;N&quot;</span>, <span class="st">&quot;median&quot;</span>, <span class="st">&quot;q1q3&quot;</span>),</a>
<a class="sourceLine" id="cb32-4" data-line-number="4">                               <span class="dt">cat.stats=</span><span class="kw">c</span>(<span class="st">&quot;countpct&quot;</span>),</a>
<a class="sourceLine" id="cb32-5" data-line-number="5">                               <span class="dt">stats.labels=</span><span class="kw">list</span>(<span class="dt">N=</span><span class="st">'Count'</span>, <span class="dt">median=</span><span class="st">'Median'</span>, <span class="dt">q1q3=</span><span class="st">'Q1,Q3'</span>))</a>
<a class="sourceLine" id="cb32-6" data-line-number="6">tab2 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy, <span class="dt">control=</span>mycontrols)</a>
<a class="sourceLine" id="cb32-7" data-line-number="7"><span class="kw">summary</span>(tab2)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
</tr>
<tr class="odd">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">   Count</td>
<td align="center">428</td>
<td align="center">691</td>
<td align="center">380</td>
</tr>
<tr class="even">
<td align="left">   Median</td>
<td align="center">61.000</td>
<td align="center">61.000</td>
<td align="center">61.000</td>
</tr>
<tr class="odd">
<td align="left">   Q1,Q3</td>
<td align="center">53.000, 68.000</td>
<td align="center">52.000, 69.000</td>
<td align="center">52.000, 68.000</td>
</tr>
</tbody>
</table>
<p>You can also change these settings directly in the tableby call.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">tab3 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy, <span class="dt">test=</span><span class="ot">FALSE</span>, <span class="dt">total=</span><span class="ot">FALSE</span>, </a>
<a class="sourceLine" id="cb33-2" data-line-number="2">                <span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;median&quot;</span>,<span class="st">&quot;q1q3&quot;</span>), <span class="dt">numeric.test=</span><span class="st">&quot;kwt&quot;</span>)</a>
<a class="sourceLine" id="cb33-3" data-line-number="3"><span class="kw">summary</span>(tab3)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
</tr>
<tr class="odd">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">   Median</td>
<td align="center">61.000</td>
<td align="center">61.000</td>
<td align="center">61.000</td>
</tr>
<tr class="even">
<td align="left">   Q1, Q3</td>
<td align="center">53.000, 68.000</td>
<td align="center">52.000, 69.000</td>
<td align="center">52.000, 68.000</td>
</tr>
</tbody>
</table>
</div>
<div id="change-summary-statistics-within-the-formula" class="section level2">
<h2>Change summary statistics within the formula</h2>
<p>In addition to modifying summary options globally, it is possible to modify the test and summary statistics for specific variables within the formula statement. For example, both the kwt (Kruskal-Wallis rank-based) and anova (asymptotic analysis of variance) tests apply to numeric variables, and we can use one for the variable “age”, another for the variable “bmi”, and no test for the variable “ast”. A list of all the options is shown at the end of the vignette.</p>
<p>The <code>tests</code> function can do a quick check on what tests were performed on each variable in tableby.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">tab.test &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span><span class="kw">kwt</span>(age) <span class="op">+</span><span class="st"> </span><span class="kw">anova</span>(bmi) <span class="op">+</span><span class="st"> </span><span class="kw">notest</span>(ast), <span class="dt">data=</span>mockstudy)</a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="kw">tests</span>(tab.test)</a></code></pre></div>
<pre><code>##           Group Variable   p.value                       Method
## 1 Treatment Arm      age 0.6390614 Kruskal-Wallis rank sum test
## 2 Treatment Arm      bmi 0.8916552           Linear Model ANOVA
## 3 Treatment Arm      ast        NA                      No test</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1"><span class="kw">summary</span>(tab.test)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.639</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">27.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">26.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.892</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">27.290 (5.552)</td>
<td align="center">27.210 (5.173)</td>
<td align="center">27.106 (5.751)</td>
<td align="center">27.206 (5.432)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">14.053 - 53.008</td>
<td align="center">16.649 - 49.130</td>
<td align="center">15.430 - 60.243</td>
<td align="center">14.053 - 60.243</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">37.292 (28.036)</td>
<td align="center">35.202 (26.659)</td>
<td align="center">35.670 (25.807)</td>
<td align="center">35.933 (26.843)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">10.000 - 205.000</td>
<td align="center">7.000 - 174.000</td>
<td align="center">5.000 - 176.000</td>
<td align="center">5.000 - 205.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>Summary statistics for any individual variable can also be modified, but it must be done as secondary arguments to the test function. The function names must be strings that are functions already written for tableby, built-in R functions like mean and range, or user-defined functions.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">tab.test &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span><span class="kw">kwt</span>(ast, <span class="st">&quot;Nmiss2&quot;</span>,<span class="st">&quot;median&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">anova</span>(age, <span class="st">&quot;N&quot;</span>,<span class="st">&quot;mean&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="st">                    </span><span class="kw">notest</span>(bmi, <span class="st">&quot;Nmiss&quot;</span>,<span class="st">&quot;median&quot;</span>), <span class="dt">data=</span>mockstudy)</a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="kw">summary</span>(tab.test)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.039</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Median</td>
<td align="center">29.000</td>
<td align="center">25.500</td>
<td align="center">27.000</td>
<td align="center">27.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="odd">
<td align="left">   N</td>
<td align="center">428</td>
<td align="center">691</td>
<td align="center">380</td>
<td align="center">1499</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean</td>
<td align="center">59.673</td>
<td align="center">60.301</td>
<td align="center">59.763</td>
<td align="center">59.985</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Median</td>
<td align="center">26.234</td>
<td align="center">26.525</td>
<td align="center">25.978</td>
<td align="center">26.325</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="controlling-options-for-categorical-tests-chisq-and-fishers" class="section level2">
<h2>Controlling Options for Categorical Tests (Chisq and Fisher’s)</h2>
<p>The formal tests for categorical variables against the levels of the by variable, chisq and fe, have options to simulate p-values. We show how to turn on the simulations for these with 500 replicates for the Fisher’s test (fe).</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb38-2" data-line-number="2">tab.catsim &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>race, <span class="dt">cat.test=</span><span class="st">&quot;fe&quot;</span>, <span class="dt">simulate.p.value=</span><span class="ot">TRUE</span>, <span class="dt">B=</span><span class="dv">500</span>, <span class="dt">data=</span>mockstudy)</a>
<a class="sourceLine" id="cb38-3" data-line-number="3"><span class="kw">tests</span>(tab.catsim)</a></code></pre></div>
<pre><code>      Group Variable   p.value</code></pre>
<p>1 Treatment Arm sex 0.2195609 2 Treatment Arm race 0.3093812 Method 1 Fisher’s Exact Test for Count Data with simulated p-valuebased on 500 replicates) 2 Fisher’s Exact Test for Count Data with simulated p-valuebased on 500 replicates)</p>
<p>The chi-square test on 2x2 tables applies Yates’ continuity correction by default, so we provide an option to turn off the correction. We show the results with and without the correction that is applied to treatment arm by sex, if we use subset to ignore one of the three treatment arms.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">cat.correct &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>race, <span class="dt">cat.test=</span><span class="st">&quot;chisq&quot;</span>, <span class="dt">subset =</span> <span class="op">!</span><span class="kw">grepl</span>(<span class="st">&quot;^F&quot;</span>, arm), <span class="dt">data=</span>mockstudy)</a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="kw">tests</span>(cat.correct)</a></code></pre></div>
<pre><code>      Group Variable   p.value                     Method</code></pre>
<p>1 Treatment Arm sex 0.1666280 Pearson’s Chi-squared test 2 Treatment Arm race 0.8108543 Pearson’s Chi-squared test</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1">cat.nocorrect &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>race, <span class="dt">cat.test=</span><span class="st">&quot;chisq&quot;</span>, <span class="dt">subset =</span> <span class="op">!</span><span class="kw">grepl</span>(<span class="st">&quot;^F&quot;</span>, arm),</a>
<a class="sourceLine" id="cb42-2" data-line-number="2">     <span class="dt">chisq.correct=</span><span class="ot">FALSE</span>, <span class="dt">data=</span>mockstudy)</a>
<a class="sourceLine" id="cb42-3" data-line-number="3"><span class="kw">tests</span>(cat.nocorrect)</a></code></pre></div>
<pre><code>      Group Variable   p.value                     Method</code></pre>
<p>1 Treatment Arm sex 0.1666280 Pearson’s Chi-squared test 2 Treatment Arm race 0.8108543 Pearson’s Chi-squared test</p>
</div>
<div id="modifying-the-look-feel-in-word-documents" class="section level2">
<h2>Modifying the look &amp; feel in Word documents</h2>
<p>You can easily create Word versions of <code>tableby</code> output via an Rmarkdown report and the default options will give you a reasonable table in Word - just select the “Knit Word” option in RStudio.</p>
<p><strong>The functionality listed in this next paragraph is coming soon but needs an upgraded version of RStudio</strong> If you want to modify fonts used for the table, then you’ll need to add an extra line to your header at the beginning of your file. You can take the <code>WordStylesReference01.docx</code> file and modify the fonts (storing the format preferences in your project directory). To see how this works, run your report once using WordStylesReference01.docx and then WordStylesReference02.docx.</p>
<pre><code>output: word_document
  reference_docx: /projects/bsi/gentools/R/lib320/arsenal/doc/WordStylesReference01.docx </code></pre>
<p>For more informating on changing the look/feel of your Word document, see the <a href="http://rmarkdown.rstudio.com/word_document_format.html">Rmarkdown documentation</a> website.</p>
</div>
</div>
<div id="additional-examples" class="section level1">
<h1>Additional Examples</h1>
<p>Here are multiple examples showing how to use some of the different options.</p>
<div id="summarize-without-a-groupby-variable" class="section level2">
<h2>1. Summarize without a group/by variable</h2>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">tab.noby &lt;-<span class="st"> </span><span class="kw">tableby</span>(<span class="op">~</span><span class="st"> </span>bmi <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy)</a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="kw">summary</span>(tab.noby)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Overall (N=1499)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">33</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">27.206 (5.432)</td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">14.053 - 60.243</td>
</tr>
<tr class="odd">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">   Male</td>
<td align="center">916 (61.1%)</td>
</tr>
<tr class="odd">
<td align="left">   Female</td>
<td align="center">583 (38.9%)</td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">59.985 (11.519)</td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">19.000 - 88.000</td>
</tr>
</tbody>
</table>
</div>
<div id="display-footnotes-indicating-which-test-was-used" class="section level2">
<h2>2. Display footnotes indicating which “test” was used</h2>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="kw">summary</span>(tab.test, <span class="dt">pfootnote=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.039<sup>1</sup></td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Median</td>
<td align="center">29.000</td>
<td align="center">25.500</td>
<td align="center">27.000</td>
<td align="center">27.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614<sup>2</sup></td>
</tr>
<tr class="odd">
<td align="left">   N</td>
<td align="center">428</td>
<td align="center">691</td>
<td align="center">380</td>
<td align="center">1499</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean</td>
<td align="center">59.673</td>
<td align="center">60.301</td>
<td align="center">59.763</td>
<td align="center">59.985</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Median</td>
<td align="center">26.234</td>
<td align="center">26.525</td>
<td align="center">25.978</td>
<td align="center">26.325</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<ol style="list-style-type: decimal">
<li>Kruskal-Wallis rank sum test</li>
<li>Linear Model ANOVA</li>
</ol>
</div>
<div id="summarize-an-ordered-factor" class="section level2">
<h2>3. Summarize an ordered factor</h2>
<p>When comparing groups of ordered data there are a couple of options. The <strong>default</strong> uses a general independence test available from the <code>coin</code> package. For two-group comparisons, this is essentially the Armitage trend test. The other option is to specify the Kruskal Wallis test. The example below shows both options.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">mockstudy<span class="op">$</span>age.ordnew &lt;-<span class="st"> </span><span class="kw">ordered</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>,<span class="ot">NA</span>,<span class="kw">as.character</span>(mockstudy<span class="op">$</span>age.ord[<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)])))</a>
<a class="sourceLine" id="cb47-2" data-line-number="2"><span class="kw">table</span>(mockstudy<span class="op">$</span>age.ord, mockstudy<span class="op">$</span>sex)</a></code></pre></div>
<pre><code>##        
##         Male Female
##   10-19    1      0
##   20-29    8     11
##   30-39   37     30
##   40-49  127     83
##   50-59  257    179
##   60-69  298    170
##   70-79  168    101
##   80-89   20      9</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1"><span class="kw">table</span>(mockstudy<span class="op">$</span>age.ordnew, mockstudy<span class="op">$</span>sex)</a></code></pre></div>
<pre><code>##        
##         Male Female
##   10-19    1      0
##   20-29    8     11
##   30-39   37     30
##   40-49  127     83
##   50-59  257    179
##   60-69  297    170
##   70-79  168    100
##   80-89   20      9
##   a        1      0</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1"><span class="kw">class</span>(mockstudy<span class="op">$</span>age.ord)</a></code></pre></div>
<pre><code>## [1] &quot;ordered&quot; &quot;factor&quot;</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>age.ordnew, <span class="dt">data =</span> mockstudy), <span class="dt">pfootnote =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>age.ordnew</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.040<sup>1</sup></td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">1</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   10-19</td>
<td align="center">1 (0.1%)</td>
<td align="center">0 (0.0%)</td>
<td align="center">1 (0.1%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   20-29</td>
<td align="center">8 (0.9%)</td>
<td align="center">11 (1.9%)</td>
<td align="center">19 (1.3%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   30-39</td>
<td align="center">37 (4.0%)</td>
<td align="center">30 (5.2%)</td>
<td align="center">67 (4.5%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   40-49</td>
<td align="center">127 (13.9%)</td>
<td align="center">83 (14.3%)</td>
<td align="center">210 (14.0%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   50-59</td>
<td align="center">257 (28.1%)</td>
<td align="center">179 (30.8%)</td>
<td align="center">436 (29.1%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   60-69</td>
<td align="center">297 (32.4%)</td>
<td align="center">170 (29.2%)</td>
<td align="center">467 (31.2%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   70-79</td>
<td align="center">168 (18.3%)</td>
<td align="center">100 (17.2%)</td>
<td align="center">268 (17.9%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   80-89</td>
<td align="center">20 (2.2%)</td>
<td align="center">9 (1.5%)</td>
<td align="center">29 (1.9%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   a</td>
<td align="center">1 (0.1%)</td>
<td align="center">0 (0.0%)</td>
<td align="center">1 (0.1%)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<ol style="list-style-type: decimal">
<li>Trend test for ordinal variables</li>
</ol>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>age.ord, <span class="dt">data =</span> mockstudy), <span class="dt">pfootnote =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>age.ord</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.049<sup>1</sup></td>
</tr>
<tr class="even">
<td align="left">   10-19</td>
<td align="center">1 (0.1%)</td>
<td align="center">0 (0.0%)</td>
<td align="center">1 (0.1%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   20-29</td>
<td align="center">8 (0.9%)</td>
<td align="center">11 (1.9%)</td>
<td align="center">19 (1.3%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   30-39</td>
<td align="center">37 (4.0%)</td>
<td align="center">30 (5.1%)</td>
<td align="center">67 (4.5%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   40-49</td>
<td align="center">127 (13.9%)</td>
<td align="center">83 (14.2%)</td>
<td align="center">210 (14.0%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   50-59</td>
<td align="center">257 (28.1%)</td>
<td align="center">179 (30.7%)</td>
<td align="center">436 (29.1%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   60-69</td>
<td align="center">298 (32.5%)</td>
<td align="center">170 (29.2%)</td>
<td align="center">468 (31.2%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   70-79</td>
<td align="center">168 (18.3%)</td>
<td align="center">101 (17.3%)</td>
<td align="center">269 (17.9%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   80-89</td>
<td align="center">20 (2.2%)</td>
<td align="center">9 (1.5%)</td>
<td align="center">29 (1.9%)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<ol style="list-style-type: decimal">
<li>Trend test for ordinal variables</li>
</ol>
</div>
<div id="summarize-a-survival-variable" class="section level2">
<h2>4. Summarize a survival variable</h2>
<p>First look at the information that is presented by the <code>survfit()</code> function, then see how the same results can be seen with tableby. The default is to show the median survival (time at which the probability of survival = 50%).</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="kw">survfit</span>(<span class="kw">Surv</span>(fu.time, fu.stat)<span class="op">~</span>sex, <span class="dt">data=</span>mockstudy)</a></code></pre></div>
<pre><code>## Call: survfit(formula = Surv(fu.time, fu.stat) ~ sex, data = mockstudy)
## 
##              n events median 0.95LCL 0.95UCL
## sex=Male   916    829    550     515     590
## sex=Female 583    527    543     511     575</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1"><span class="kw">survdiff</span>(<span class="kw">Surv</span>(fu.time, fu.stat)<span class="op">~</span>sex, <span class="dt">data=</span>mockstudy)</a></code></pre></div>
<pre><code>## Call:
## survdiff(formula = Surv(fu.time, fu.stat) ~ sex, data = mockstudy)
## 
##              N Observed Expected (O-E)^2/E (O-E)^2/V
## sex=Male   916      829      830  0.000370  0.000956
## sex=Female 583      527      526  0.000583  0.000956
## 
##  Chisq= 0  on 1 degrees of freedom, p= 1</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span><span class="kw">Surv</span>(fu.time, fu.stat), <span class="dt">data=</span>mockstudy))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Surv(fu.time, fu.stat)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.975</td>
</tr>
<tr class="even">
<td align="left">   Events</td>
<td align="center">829</td>
<td align="center">527</td>
<td align="center">1356</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Median Survival</td>
<td align="center">550.000</td>
<td align="center">543.000</td>
<td align="center">546.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>It is also possible to obtain summaries of the % survival at certain time points (say the probability of surviving 1-year).</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">survfit</span>(<span class="kw">Surv</span>(fu.time<span class="op">/</span><span class="fl">365.25</span>, fu.stat)<span class="op">~</span>sex, <span class="dt">data=</span>mockstudy), <span class="dt">times=</span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>)</a></code></pre></div>
<pre><code>## Call: survfit(formula = Surv(fu.time/365.25, fu.stat) ~ sex, data = mockstudy)
## 
##                 sex=Male 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1    626     286   0.6870  0.0153       0.6576       0.7177
##     2    309     311   0.3437  0.0158       0.3142       0.3761
##     3    152     151   0.1748  0.0127       0.1516       0.2015
##     4     57      61   0.0941  0.0104       0.0759       0.1168
##     5     24      16   0.0628  0.0095       0.0467       0.0844
## 
##                 sex=Female 
##  time n.risk n.event survival std.err lower 95% CI upper 95% CI
##     1    380     202   0.6531  0.0197       0.6155        0.693
##     2    190     189   0.3277  0.0195       0.2917        0.368
##     3     95      90   0.1701  0.0157       0.1420        0.204
##     4     51      32   0.1093  0.0133       0.0861        0.139
##     5     18      12   0.0745  0.0126       0.0534        0.104</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span><span class="kw">Surv</span>(fu.time<span class="op">/</span><span class="fl">365.25</span>, fu.stat), <span class="dt">data=</span>mockstudy, <span class="dt">times=</span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">surv.stats=</span><span class="kw">c</span>(<span class="st">&quot;NeventsSurv&quot;</span>,<span class="st">&quot;NriskSurv&quot;</span>)))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Surv(fu.time/365.25, fu.stat)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.975</td>
</tr>
<tr class="even">
<td align="left">   time = 1</td>
<td align="center">286 (68.7)</td>
<td align="center">202 (65.3)</td>
<td align="center">488 (67.4)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   time = 2</td>
<td align="center">597 (34.4)</td>
<td align="center">391 (32.8)</td>
<td align="center">988 (33.7)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   time = 3</td>
<td align="center">748 (17.5)</td>
<td align="center">481 (17.0)</td>
<td align="center">1229 (17.3)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   time = 4</td>
<td align="center">809 (9.4)</td>
<td align="center">513 (10.9)</td>
<td align="center">1322 (10.1)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   time = 5</td>
<td align="center">825 (6.3)</td>
<td align="center">525 (7.4)</td>
<td align="center">1350 (6.8)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   time = 1</td>
<td align="center">626 (68.7)</td>
<td align="center">380 (65.3)</td>
<td align="center">1006 (67.4)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   time = 2</td>
<td align="center">309 (34.4)</td>
<td align="center">190 (32.8)</td>
<td align="center">499 (33.7)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   time = 3</td>
<td align="center">152 (17.5)</td>
<td align="center">95 (17.0)</td>
<td align="center">247 (17.3)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   time = 4</td>
<td align="center">57 (9.4)</td>
<td align="center">51 (10.9)</td>
<td align="center">108 (10.1)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   time = 5</td>
<td align="center">24 (6.3)</td>
<td align="center">18 (7.4)</td>
<td align="center">42 (6.8)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="summarize-date-variables" class="section level2">
<h2>5. Summarize date variables</h2>
<p>Date variables by default are summarized with the number of missing values, the median, and the range. For example purposes we’ve created a random date. Missing values are introduced for impossible February dates.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb63-2" data-line-number="2">N &lt;-<span class="st"> </span><span class="kw">nrow</span>(mockstudy)</a>
<a class="sourceLine" id="cb63-3" data-line-number="3">mockstudy<span class="op">$</span>dtentry &lt;-<span class="st"> </span><span class="kw">mdy.Date</span>(<span class="dt">month=</span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>,N,<span class="dt">replace=</span>T), <span class="dt">day=</span><span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">29</span>,N,<span class="dt">replace=</span>T), </a>
<a class="sourceLine" id="cb63-4" data-line-number="4">                              <span class="dt">year=</span><span class="kw">sample</span>(<span class="dv">2005</span><span class="op">:</span><span class="dv">2009</span>,N,<span class="dt">replace=</span>T))</a>
<a class="sourceLine" id="cb63-5" data-line-number="5"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>dtentry, <span class="dt">data=</span>mockstudy))</a></code></pre></div>
<table>
<colgroup>
<col width="23%"></col>
<col width="23%"></col>
<col width="23%"></col>
<col width="23%"></col>
<col width="7%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>dtentry</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.661</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">2</td>
<td align="center">3</td>
<td align="center">5</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Median</td>
<td align="center">2007-05-25</td>
<td align="center">2007-05-08</td>
<td align="center">2007-05-22</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">2005-01-02 - 2009-12-28</td>
<td align="center">2005-01-01 - 2009-12-25</td>
<td align="center">2005-01-01 - 2009-12-28</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="summarize-multiple-variables-without-typing-them-out" class="section level2">
<h2>6. Summarize multiple variables without typing them out</h2>
<p>Often one wants to summarize a number of variables. Instead of typing by hand each individual variable, an alternative approach is to create a formula using the <code>paste</code> command with the <code>collapse=&quot;+&quot;</code> option.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1"><span class="co">## create a vector specifying the variable names</span></a>
<a class="sourceLine" id="cb64-2" data-line-number="2">myvars &lt;-<span class="st"> </span><span class="kw">names</span>(mockstudy)</a>
<a class="sourceLine" id="cb64-3" data-line-number="3"></a>
<a class="sourceLine" id="cb64-4" data-line-number="4"><span class="co">## select the 8th through the last variables</span></a>
<a class="sourceLine" id="cb64-5" data-line-number="5"><span class="co">## paste them together, separated by the + sign</span></a>
<a class="sourceLine" id="cb64-6" data-line-number="6">RHS &lt;-<span class="st"> </span><span class="kw">paste</span>(myvars[<span class="dv">8</span><span class="op">:</span><span class="dv">10</span>], <span class="dt">collapse=</span><span class="st">&quot;+&quot;</span>)</a>
<a class="sourceLine" id="cb64-7" data-line-number="7">RHS</a></code></pre></div>
<p>[1] “ps+hgb+bmi”</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1"><span class="co">## create a formula using the as.formula function</span></a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="kw">as.formula</span>(<span class="kw">paste</span>(<span class="st">'arm ~ '</span>, RHS))</a></code></pre></div>
<p>arm ~ ps + hgb + bmi</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1"><span class="co">## use the formula in the tableby function</span></a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="kw">summary</span>(<span class="kw">tableby</span>(<span class="kw">as.formula</span>(<span class="kw">paste</span>(<span class="st">'arm ~'</span>, RHS)), <span class="dt">data=</span>mockstudy))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>ps</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.903</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">0.529 (0.597)</td>
<td align="center">0.547 (0.595)</td>
<td align="center">0.537 (0.606)</td>
<td align="center">0.539 (0.598)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">0.000 - 2.000</td>
<td align="center">0.000 - 2.000</td>
<td align="center">0.000 - 2.000</td>
<td align="center">0.000 - 2.000</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.639</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">12.276 (1.686)</td>
<td align="center">12.381 (1.763)</td>
<td align="center">12.373 (1.680)</td>
<td align="center">12.348 (1.719)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">9.060 - 17.300</td>
<td align="center">9.000 - 18.200</td>
<td align="center">9.000 - 17.000</td>
<td align="center">9.000 - 18.200</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.892</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">27.290 (5.552)</td>
<td align="center">27.210 (5.173)</td>
<td align="center">27.106 (5.751)</td>
<td align="center">27.206 (5.432)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">14.053 - 53.008</td>
<td align="center">16.649 - 49.130</td>
<td align="center">15.430 - 60.243</td>
<td align="center">14.053 - 60.243</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>These steps can also be done using the <code>formulize</code> function.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1"><span class="co">## The formulize function does the paste and as.formula steps</span></a>
<a class="sourceLine" id="cb67-2" data-line-number="2">tmp &lt;-<span class="st"> </span><span class="kw">formulize</span>(<span class="st">'arm'</span>,myvars[<span class="dv">8</span><span class="op">:</span><span class="dv">10</span>])</a>
<a class="sourceLine" id="cb67-3" data-line-number="3">tmp</a></code></pre></div>
<p>arm ~ ps + hgb + bmi</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1"><span class="co">## More complex formulas could also be written using formulize</span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2">tmp2 &lt;-<span class="st"> </span><span class="kw">formulize</span>(<span class="st">'arm'</span>,<span class="kw">c</span>(<span class="st">'ps'</span>,<span class="st">'hgb^2'</span>,<span class="st">'bmi'</span>))</a>
<a class="sourceLine" id="cb68-3" data-line-number="3"></a>
<a class="sourceLine" id="cb68-4" data-line-number="4"><span class="co">## use the formula in the tableby function</span></a>
<a class="sourceLine" id="cb68-5" data-line-number="5"><span class="kw">summary</span>(<span class="kw">tableby</span>(tmp, <span class="dt">data=</span>mockstudy))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>ps</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.903</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">0.529 (0.597)</td>
<td align="center">0.547 (0.595)</td>
<td align="center">0.537 (0.606)</td>
<td align="center">0.539 (0.598)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">0.000 - 2.000</td>
<td align="center">0.000 - 2.000</td>
<td align="center">0.000 - 2.000</td>
<td align="center">0.000 - 2.000</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.639</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">12.276 (1.686)</td>
<td align="center">12.381 (1.763)</td>
<td align="center">12.373 (1.680)</td>
<td align="center">12.348 (1.719)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">9.060 - 17.300</td>
<td align="center">9.000 - 18.200</td>
<td align="center">9.000 - 17.000</td>
<td align="center">9.000 - 18.200</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.892</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">27.290 (5.552)</td>
<td align="center">27.210 (5.173)</td>
<td align="center">27.106 (5.751)</td>
<td align="center">27.206 (5.432)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">14.053 - 53.008</td>
<td align="center">16.649 - 49.130</td>
<td align="center">15.430 - 60.243</td>
<td align="center">14.053 - 60.243</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>To change summary statistics or statistical tests en masse, consider using <code>paste0()</code> together with <code>formulize()</code>:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1">varlist1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'age'</span>,<span class="st">'sex'</span>,<span class="st">'hgb'</span>)</a>
<a class="sourceLine" id="cb69-2" data-line-number="2">varlist2 &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;anova(&quot;</span>, <span class="kw">c</span>(<span class="st">'bmi'</span>,<span class="st">'alk.phos'</span>,<span class="st">'ast'</span>), <span class="st">&quot;, 'meansd')&quot;</span>)</a>
<a class="sourceLine" id="cb69-3" data-line-number="3"></a>
<a class="sourceLine" id="cb69-4" data-line-number="4"><span class="kw">summary</span>(<span class="kw">tableby</span>(<span class="kw">formulize</span>(<span class="st">&quot;arm&quot;</span>, <span class="kw">c</span>(varlist1, varlist2)),</a>
<a class="sourceLine" id="cb69-5" data-line-number="5">                <span class="dt">data =</span> mockstudy, <span class="dt">numeric.test =</span> <span class="st">&quot;kwt&quot;</span>), <span class="dt">pfootnote =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="25%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="7%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.639<sup>1</sup></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">27.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">26.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190<sup>2</sup></td>
</tr>
<tr class="odd">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.570<sup>1</sup></td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">12.276 (1.686)</td>
<td align="center">12.381 (1.763)</td>
<td align="center">12.373 (1.680)</td>
<td align="center">12.348 (1.719)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">9.060 - 17.300</td>
<td align="center">9.000 - 18.200</td>
<td align="center">9.000 - 17.000</td>
<td align="center">9.000 - 18.200</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.892<sup>3</sup></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">27.290 (5.552)</td>
<td align="center">27.210 (5.173)</td>
<td align="center">27.106 (5.751)</td>
<td align="center">27.206 (5.432)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>alk.phos</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.226<sup>3</sup></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">175.577 (128.608)</td>
<td align="center">161.984 (121.978)</td>
<td align="center">173.506 (138.564)</td>
<td align="center">168.969 (128.492)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.507<sup>3</sup></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">37.292 (28.036)</td>
<td align="center">35.202 (26.659)</td>
<td align="center">35.670 (25.807)</td>
<td align="center">35.933 (26.843)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<ol style="list-style-type: decimal">
<li>Kruskal-Wallis rank sum test</li>
<li>Pearson’s Chi-squared test</li>
<li>Linear Model ANOVA</li>
</ol>
</div>
<div id="subset-the-dataset-used-in-the-analysis" class="section level2">
<h2>7. Subset the dataset used in the analysis</h2>
<p>Here are two ways to get the same result (limit the analysis to subjects age&gt;5 and in the F: FOLFOX treatment group).</p>
<ul>
<li>The first approach uses the subset function applied to the dataset <code>mockstudy</code>. This example also selects a subset of variables. The <code>tableby</code> function is then applied to this subsetted data.</li>
</ul>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1">newdata &lt;-<span class="st"> </span><span class="kw">subset</span>(mockstudy, <span class="dt">subset=</span>age<span class="op">&gt;</span><span class="dv">50</span> <span class="op">&amp;</span><span class="st"> </span>arm<span class="op">==</span><span class="st">'F: FOLFOX'</span>, <span class="dt">select =</span> <span class="kw">c</span>(sex,ps<span class="op">:</span>bmi))</a>
<a class="sourceLine" id="cb70-2" data-line-number="2"><span class="kw">dim</span>(mockstudy)</a></code></pre></div>
<pre><code>## [1] 1499   16</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1"><span class="kw">table</span>(mockstudy<span class="op">$</span>arm)</a></code></pre></div>
<pre><code>## 
##    A: IFL F: FOLFOX   G: IROX 
##       428       691       380</code></pre>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1"><span class="kw">dim</span>(newdata)</a></code></pre></div>
<pre><code>## [1] 557   4</code></pre>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1"><span class="kw">names</span>(newdata)</a></code></pre></div>
<pre><code>## [1] &quot;sex&quot; &quot;ps&quot;  &quot;hgb&quot; &quot;bmi&quot;</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>., <span class="dt">data=</span>newdata))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=333)</th>
<th align="center">Female (N=224)</th>
<th align="center">Total (N=557)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>ps</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.652</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">64</td>
<td align="center">44</td>
<td align="center">108</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">0.554 (0.600)</td>
<td align="center">0.528 (0.602)</td>
<td align="center">0.543 (0.600)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">0.000 - 2.000</td>
<td align="center">0.000 - 2.000</td>
<td align="center">0.000 - 2.000</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">64</td>
<td align="center">44</td>
<td align="center">108</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">12.720 (1.925)</td>
<td align="center">12.063 (1.395)</td>
<td align="center">12.457 (1.760)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">9.000 - 18.200</td>
<td align="center">9.100 - 15.900</td>
<td align="center">9.000 - 18.200</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>bmi</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.650</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">9</td>
<td align="center">6</td>
<td align="center">15</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">27.539 (4.780)</td>
<td align="center">27.337 (5.508)</td>
<td align="center">27.458 (5.081)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">17.927 - 47.458</td>
<td align="center">16.649 - 49.130</td>
<td align="center">16.649 - 49.130</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<ul>
<li>The second approach does the same analysis but uses the subset argument within <code>tableby</code> to subset the data.</li>
</ul>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>ps <span class="op">+</span><span class="st"> </span>hgb <span class="op">+</span><span class="st"> </span>bmi, <span class="dt">subset=</span>age<span class="op">&gt;</span><span class="dv">50</span> <span class="op">&amp;</span><span class="st"> </span>arm<span class="op">==</span><span class="st">&quot;F: FOLFOX&quot;</span>, <span class="dt">data=</span>mockstudy))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=333)</th>
<th align="center">Female (N=224)</th>
<th align="center">Total (N=557)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>ps</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.652</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">64</td>
<td align="center">44</td>
<td align="center">108</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">0.554 (0.600)</td>
<td align="center">0.528 (0.602)</td>
<td align="center">0.543 (0.600)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">0.000 - 2.000</td>
<td align="center">0.000 - 2.000</td>
<td align="center">0.000 - 2.000</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">64</td>
<td align="center">44</td>
<td align="center">108</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">12.720 (1.925)</td>
<td align="center">12.063 (1.395)</td>
<td align="center">12.457 (1.760)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">9.000 - 18.200</td>
<td align="center">9.100 - 15.900</td>
<td align="center">9.000 - 18.200</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.650</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">9</td>
<td align="center">6</td>
<td align="center">15</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">27.539 (4.780)</td>
<td align="center">27.337 (5.508)</td>
<td align="center">27.458 (5.081)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">17.927 - 47.458</td>
<td align="center">16.649 - 49.130</td>
<td align="center">16.649 - 49.130</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="create-combinations-of-variables-on-the-fly" class="section level2">
<h2>8. Create combinations of variables on the fly</h2>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1"><span class="co">## create a variable combining the levels of mdquality.s and sex</span></a>
<a class="sourceLine" id="cb80-2" data-line-number="2"><span class="kw">with</span>(mockstudy, <span class="kw">table</span>(<span class="kw">interaction</span>(mdquality.s,sex)))</a></code></pre></div>
<pre><code>## 
##   0.Male   1.Male 0.Female 1.Female 
##       77      686       47      437</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span><span class="kw">interaction</span>(mdquality.s,sex), <span class="dt">data=</span>mockstudy))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>interaction(mdquality.s, sex)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.493</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">55</td>
<td align="center">156</td>
<td align="center">41</td>
<td align="center">252</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   0.Male</td>
<td align="center">29 (7.8%)</td>
<td align="center">31 (5.8%)</td>
<td align="center">17 (5.0%)</td>
<td align="center">77 (6.2%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   1.Male</td>
<td align="center">214 (57.4%)</td>
<td align="center">285 (53.3%)</td>
<td align="center">187 (55.2%)</td>
<td align="center">686 (55.0%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   0.Female</td>
<td align="center">12 (3.2%)</td>
<td align="center">21 (3.9%)</td>
<td align="center">14 (4.1%)</td>
<td align="center">47 (3.8%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   1.Female</td>
<td align="center">118 (31.6%)</td>
<td align="center">198 (37.0%)</td>
<td align="center">121 (35.7%)</td>
<td align="center">437 (35.0%)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb83-1" data-line-number="1"><span class="co">## create a new grouping variable with combined levels of arm and sex</span></a>
<a class="sourceLine" id="cb83-2" data-line-number="2"><span class="kw">summary</span>(<span class="kw">tableby</span>(<span class="kw">interaction</span>(mdquality.s, sex) <span class="op">~</span><span class="st">  </span>age <span class="op">+</span><span class="st"> </span>bmi, <span class="dt">data=</span>mockstudy, <span class="dt">subset=</span>arm<span class="op">==</span><span class="st">&quot;F: FOLFOX&quot;</span>))</a></code></pre></div>
<table>
<colgroup>
<col width="23%"></col>
<col width="13%"></col>
<col width="13%"></col>
<col width="13%"></col>
<col width="14%"></col>
<col width="13%"></col>
<col width="6%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">0.Male (N=31)</th>
<th align="center">1.Male (N=285)</th>
<th align="center">0.Female (N=21)</th>
<th align="center">1.Female (N=198)</th>
<th align="center">Total (N=535)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">63.065 (11.702)</td>
<td align="center">60.653 (11.833)</td>
<td align="center">60.810 (10.103)</td>
<td align="center">58.924 (11.366)</td>
<td align="center">60.159 (11.612)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">41.000 - 82.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">42.000 - 81.000</td>
<td align="center">29.000 - 83.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.894</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">0</td>
<td align="center">6</td>
<td align="center">1</td>
<td align="center">5</td>
<td align="center">12</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">26.633 (5.094)</td>
<td align="center">27.387 (4.704)</td>
<td align="center">27.359 (4.899)</td>
<td align="center">27.294 (5.671)</td>
<td align="center">27.307 (5.100)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">20.177 - 41.766</td>
<td align="center">17.927 - 47.458</td>
<td align="center">19.801 - 39.369</td>
<td align="center">16.799 - 44.841</td>
<td align="center">16.799 - 47.458</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="transform-variables-on-the-fly" class="section level2">
<h2>9. Transform variables on the fly</h2>
<p>Certain transformations need to be surrounded by <code>I()</code> so that R knows to treat it as a variable transformation and not some special model feature. If the transformation includes any of the symbols <code>/ - + ^ *</code> then surround the new variable by <code>I()</code>.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb84-1" data-line-number="1">trans &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span><span class="kw">I</span>(age<span class="op">/</span><span class="dv">10</span>) <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(bmi) <span class="op">+</span><span class="st"> </span><span class="kw">factor</span>(mdquality.s, <span class="dt">levels=</span><span class="dv">0</span><span class="op">:</span><span class="dv">1</span>, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">'N'</span>,<span class="st">'Y'</span>)),</a>
<a class="sourceLine" id="cb84-2" data-line-number="2">                 <span class="dt">data=</span>mockstudy)</a>
<a class="sourceLine" id="cb84-3" data-line-number="3"><span class="kw">summary</span>(trans)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">5.967 (1.136)</td>
<td align="center">6.030 (1.163)</td>
<td align="center">5.976 (1.150)</td>
<td align="center">5.999 (1.152)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">2.700 - 8.800</td>
<td align="center">1.900 - 8.800</td>
<td align="center">2.600 - 8.500</td>
<td align="center">1.900 - 8.800</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.811</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">3.287 (0.197)</td>
<td align="center">3.286 (0.183)</td>
<td align="center">3.279 (0.200)</td>
<td align="center">3.285 (0.192)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">2.643 - 3.970</td>
<td align="center">2.812 - 3.894</td>
<td align="center">2.736 - 4.098</td>
<td align="center">2.643 - 4.098</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>factor(mdquality.s, levels = 0:1, labels = c(“N”, “Y”))</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.694</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">55</td>
<td align="center">156</td>
<td align="center">41</td>
<td align="center">252</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   N</td>
<td align="center">41 (11.0%)</td>
<td align="center">52 (9.7%)</td>
<td align="center">31 (9.1%)</td>
<td align="center">124 (9.9%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Y</td>
<td align="center">332 (89.0%)</td>
<td align="center">483 (90.3%)</td>
<td align="center">308 (90.9%)</td>
<td align="center">1123 (90.1%)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>The labels for these variables aren’t exactly what we’d like, so we can change modify those after the fact. Instead of typing out the very long variable names, you can modify specific labels by position.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" data-line-number="1"><span class="kw">labels</span>(trans)</a></code></pre></div>
<pre><code>##                                                           arm 
##                                               &quot;Treatment Arm&quot; 
##                                                     I(age/10) 
##                                                    &quot;Age, yrs&quot; 
##                                                      log(bmi) 
##                                    &quot;Body Mass Index (kg/m^2)&quot; 
##       factor(mdquality.s, levels = 0:1, labels = c(&quot;N&quot;, &quot;Y&quot;)) 
## &quot;factor(mdquality.s, levels = 0:1, labels = c(\&quot;N\&quot;, \&quot;Y\&quot;))&quot;</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" data-line-number="1"><span class="kw">labels</span>(trans)[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">'Age per 10 yrs'</span>, <span class="st">'log(BMI)'</span>, <span class="st">'MD Quality'</span>)</a>
<a class="sourceLine" id="cb87-2" data-line-number="2"><span class="kw">labels</span>(trans)</a></code></pre></div>
<pre><code>##                                                     arm 
##                                         &quot;Treatment Arm&quot; 
##                                               I(age/10) 
##                                        &quot;Age per 10 yrs&quot; 
##                                                log(bmi) 
##                                              &quot;log(BMI)&quot; 
## factor(mdquality.s, levels = 0:1, labels = c(&quot;N&quot;, &quot;Y&quot;)) 
##                                            &quot;MD Quality&quot;</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" data-line-number="1"><span class="kw">summary</span>(trans)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age per 10 yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">5.967 (1.136)</td>
<td align="center">6.030 (1.163)</td>
<td align="center">5.976 (1.150)</td>
<td align="center">5.999 (1.152)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">2.700 - 8.800</td>
<td align="center">1.900 - 8.800</td>
<td align="center">2.600 - 8.500</td>
<td align="center">1.900 - 8.800</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>log(BMI)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.811</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">3.287 (0.197)</td>
<td align="center">3.286 (0.183)</td>
<td align="center">3.279 (0.200)</td>
<td align="center">3.285 (0.192)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">2.643 - 3.970</td>
<td align="center">2.812 - 3.894</td>
<td align="center">2.736 - 4.098</td>
<td align="center">2.643 - 4.098</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>MD Quality</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.694</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">55</td>
<td align="center">156</td>
<td align="center">41</td>
<td align="center">252</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   N</td>
<td align="center">41 (11.0%)</td>
<td align="center">52 (9.7%)</td>
<td align="center">31 (9.1%)</td>
<td align="center">124 (9.9%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Y</td>
<td align="center">332 (89.0%)</td>
<td align="center">483 (90.3%)</td>
<td align="center">308 (90.9%)</td>
<td align="center">1123 (90.1%)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>Note that if we had not changed <code>mdquality.s</code> to a factor, it would have been summarized as though it were a continuous variable.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb90-1" data-line-number="1"><span class="kw">class</span>(mockstudy<span class="op">$</span>mdquality.s)</a></code></pre></div>
<p>[1] “integer”</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(arm<span class="op">~</span>mdquality.s, <span class="dt">data=</span>mockstudy))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>mdquality.s</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.695</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">55</td>
<td align="center">156</td>
<td align="center">41</td>
<td align="center">252</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">0.890 (0.313)</td>
<td align="center">0.903 (0.297)</td>
<td align="center">0.909 (0.289)</td>
<td align="center">0.901 (0.299)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">0.000 - 1.000</td>
<td align="center">0.000 - 1.000</td>
<td align="center">0.000 - 1.000</td>
<td align="center">0.000 - 1.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>Another option would be to specify the test and summary statistics. In fact, if I had a set of variables coded 0/1 and that was all I was summarizing, then I could change the global option for continuous variables to use the chi-square test and show countpct.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb92-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span><span class="kw">chisq</span>(mdquality.s, <span class="st">&quot;Nmiss&quot;</span>,<span class="st">&quot;countpct&quot;</span>), <span class="dt">data=</span>mockstudy))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>mdquality.s</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.694</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">55</td>
<td align="center">156</td>
<td align="center">41</td>
<td align="center">252</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   0</td>
<td align="center">41 (11.0%)</td>
<td align="center">52 (9.7%)</td>
<td align="center">31 (9.1%)</td>
<td align="center">124 (9.9%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   1</td>
<td align="center">332 (89.0%)</td>
<td align="center">483 (90.3%)</td>
<td align="center">308 (90.9%)</td>
<td align="center">1123 (90.1%)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="subsetting-change-the-ordering-of-the-variables-delete-a-variable-sort-by-p-value-filter-by-p-value" class="section level2">
<h2>10. Subsetting (change the ordering of the variables, delete a variable, sort by p-value, filter by p-value)</h2>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" data-line-number="1">mytab &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>alk.phos <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy)</a>
<a class="sourceLine" id="cb93-2" data-line-number="2">mytab2 &lt;-<span class="st"> </span>mytab[<span class="kw">c</span>(<span class="st">'age'</span>,<span class="st">'sex'</span>,<span class="st">'alk.phos'</span>)]</a>
<a class="sourceLine" id="cb93-3" data-line-number="3"><span class="kw">summary</span>(mytab2)</a></code></pre></div>
<table>
<colgroup>
<col width="25%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="7%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">27.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">26.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="odd">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>alk.phos</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.226</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">175.577 (128.608)</td>
<td align="center">161.984 (121.978)</td>
<td align="center">173.506 (138.564)</td>
<td align="center">168.969 (128.492)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">11.000 - 858.000</td>
<td align="center">10.000 - 1014.000</td>
<td align="center">7.000 - 982.000</td>
<td align="center">7.000 - 1014.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb94-1" data-line-number="1"><span class="kw">summary</span>(mytab[<span class="kw">c</span>(<span class="st">'age'</span>,<span class="st">'sex'</span>)], <span class="dt">digits =</span> <span class="dv">2</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">59.67 (11.36)</td>
<td align="center">60.30 (11.63)</td>
<td align="center">59.76 (11.50)</td>
<td align="center">59.99 (11.52)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">27.00 - 88.00</td>
<td align="center">19.00 - 88.00</td>
<td align="center">26.00 - 85.00</td>
<td align="center">19.00 - 88.00</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="odd">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" data-line-number="1"><span class="kw">summary</span>(mytab[<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>)], <span class="dt">digits =</span> <span class="dv">3</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">27.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">26.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="odd">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb96-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">sort</span>(mytab, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<table>
<colgroup>
<col width="25%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="7%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">27.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">26.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>alk.phos</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.226</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">175.577 (128.608)</td>
<td align="center">161.984 (121.978)</td>
<td align="center">173.506 (138.564)</td>
<td align="center">168.969 (128.492)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">11.000 - 858.000</td>
<td align="center">10.000 - 1014.000</td>
<td align="center">7.000 - 982.000</td>
<td align="center">7.000 - 1014.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="odd">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" data-line-number="1"><span class="kw">summary</span>(mytab[mytab <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.5</span>])</a></code></pre></div>
<table>
<colgroup>
<col width="25%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="7%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="even">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>alk.phos</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.226</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">175.577 (128.608)</td>
<td align="center">161.984 (121.978)</td>
<td align="center">173.506 (138.564)</td>
<td align="center">168.969 (128.492)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">11.000 - 858.000</td>
<td align="center">10.000 - 1014.000</td>
<td align="center">7.000 - 982.000</td>
<td align="center">7.000 - 1014.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb98-1" data-line-number="1"><span class="kw">head</span>(mytab, <span class="dv">1</span>) <span class="co"># can also use tail()</span></a></code></pre></div>
<p>tableby Object</p>
<p>Function Call: tableby(formula = arm ~ sex + alk.phos + age, data = mockstudy)</p>
<p>Variable(s): arm ~ sex</p>
</div>
<div id="merge-two-tableby-objects-together" class="section level2">
<h2>11. Merge two <code>tableby</code> objects together</h2>
<p>It is possible to combine two tableby objects so that they print out together. Overlapping by-variables will have their x-variables concatenated, and (if <code>all=TRUE</code>) non-overlapping by-variables will have their tables printed separately.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" data-line-number="1"><span class="co">## demographics</span></a>
<a class="sourceLine" id="cb99-2" data-line-number="2">tab1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy,</a>
<a class="sourceLine" id="cb99-3" data-line-number="3">                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss&quot;</span>,<span class="st">&quot;meansd&quot;</span>), <span class="dt">total=</span><span class="ot">FALSE</span>))</a>
<a class="sourceLine" id="cb99-4" data-line-number="4"><span class="co">## lab data</span></a>
<a class="sourceLine" id="cb99-5" data-line-number="5">tab2 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>hgb <span class="op">+</span><span class="st"> </span>alk.phos, <span class="dt">data=</span>mockstudy,</a>
<a class="sourceLine" id="cb99-6" data-line-number="6">                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss&quot;</span>,<span class="st">&quot;median&quot;</span>,<span class="st">&quot;q1q3&quot;</span>),</a>
<a class="sourceLine" id="cb99-7" data-line-number="7">                                        <span class="dt">numeric.test=</span><span class="st">&quot;kwt&quot;</span>, <span class="dt">total=</span><span class="ot">FALSE</span>))</a>
<a class="sourceLine" id="cb99-8" data-line-number="8">tab12 &lt;-<span class="st"> </span><span class="kw">merge</span>(tab1, tab2)</a>
<a class="sourceLine" id="cb99-9" data-line-number="9"><span class="kw">class</span>(tab12)</a></code></pre></div>
<p>[1] “tableby” “arsenal_table”</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" data-line-number="1"><span class="kw">summary</span>(tab12)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="even">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.570</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Median</td>
<td align="center">12.100</td>
<td align="center">12.200</td>
<td align="center">12.400</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Q1, Q3</td>
<td align="center">11.000, 13.450</td>
<td align="center">11.100, 13.600</td>
<td align="center">11.175, 13.625</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>alk.phos</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.104</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Median</td>
<td align="center">133.000</td>
<td align="center">116.000</td>
<td align="center">122.000</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Q1, Q3</td>
<td align="center">89.000, 217.000</td>
<td align="center">85.000, 194.750</td>
<td align="center">87.750, 210.250</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>For tables with two different outcomes, consider the <code>all=TRUE</code> argument:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb101-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">merge</span>(</a>
<a class="sourceLine" id="cb101-2" data-line-number="2">  <span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>age, <span class="dt">data =</span> mockstudy),</a>
<a class="sourceLine" id="cb101-3" data-line-number="3">  <span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>bmi, <span class="dt">data =</span> mockstudy),</a>
<a class="sourceLine" id="cb101-4" data-line-number="4">  <span class="dt">all =</span> <span class="ot">TRUE</span></a>
<a class="sourceLine" id="cb101-5" data-line-number="5">))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.048</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">60.455 (11.369)</td>
<td align="center">59.247 (11.722)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">19.000 - 88.000</td>
<td align="center">22.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.892</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">9</td>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">33</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">27.290 (5.552)</td>
<td align="center">27.210 (5.173)</td>
<td align="center">27.106 (5.751)</td>
<td align="center">27.206 (5.432)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">14.053 - 53.008</td>
<td align="center">16.649 - 49.130</td>
<td align="center">15.430 - 60.243</td>
<td align="center">14.053 - 60.243</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="add-a-title-to-the-table" class="section level2">
<h2>12. Add a title to the table</h2>
<p>When creating a pdf the tables are automatically numbered and the title appears below the table. In Word and HTML, the titles appear un-numbered and above the table.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" data-line-number="1">t1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy)</a>
<a class="sourceLine" id="cb102-2" data-line-number="2"><span class="kw">summary</span>(t1, <span class="dt">title=</span><span class="st">'Demographics'</span>)</a></code></pre></div>
<table>
<caption>Demographics</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="even">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">27.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">26.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="modify-how-missing-values-are-displayed" class="section level2">
<h2>13. Modify how missing values are displayed</h2>
<p>Depending on the report you are writing you have the following options:</p>
<ul>
<li><p>Show how many subjects have each variable</p></li>
<li><p>Show how many subjects are missing each variable</p></li>
<li><p>Show how many subjects are missing each variable only if there are any missing values</p></li>
<li><p>Don’t indicate missing values at all</p></li>
</ul>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb103-1" data-line-number="1"><span class="co">## look at how many missing values there are for each variable</span></a>
<a class="sourceLine" id="cb103-2" data-line-number="2"><span class="kw">apply</span>(<span class="kw">is.na</span>(mockstudy),<span class="dv">2</span>,sum)</a></code></pre></div>
<pre><code>##        case         age         arm         sex        race     fu.time     fu.stat          ps 
##           0           0           0           0           7           0           0         266 
##         hgb         bmi    alk.phos         ast mdquality.s     age.ord  age.ordnew     dtentry 
##         266          33         266         266         252           0           1           5</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb105-1" data-line-number="1"><span class="co">## Show how many subjects have each variable (non-missing)</span></a>
<a class="sourceLine" id="cb105-2" data-line-number="2"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>ast <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy,</a>
<a class="sourceLine" id="cb105-3" data-line-number="3">                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;N&quot;</span>,<span class="st">&quot;median&quot;</span>), <span class="dt">total=</span><span class="ot">FALSE</span>)))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.921</td>
</tr>
<tr class="even">
<td align="left">   N</td>
<td align="center">754</td>
<td align="center">479</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Median</td>
<td align="center">27.000</td>
<td align="center">27.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.048</td>
</tr>
<tr class="odd">
<td align="left">   N</td>
<td align="center">916</td>
<td align="center">583</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Median</td>
<td align="center">61.000</td>
<td align="center">60.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb106-1" data-line-number="1"><span class="co">## Always list the number of missing values</span></a>
<a class="sourceLine" id="cb106-2" data-line-number="2"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>ast <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy,</a>
<a class="sourceLine" id="cb106-3" data-line-number="3">                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss2&quot;</span>,<span class="st">&quot;median&quot;</span>), <span class="dt">total=</span><span class="ot">FALSE</span>)))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.921</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">162</td>
<td align="center">104</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Median</td>
<td align="center">27.000</td>
<td align="center">27.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.048</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Median</td>
<td align="center">61.000</td>
<td align="center">60.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb107-1" data-line-number="1"><span class="co">## Only show the missing values if there are some (default)</span></a>
<a class="sourceLine" id="cb107-2" data-line-number="2"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>ast <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy, </a>
<a class="sourceLine" id="cb107-3" data-line-number="3">                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss&quot;</span>,<span class="st">&quot;mean&quot;</span>),<span class="dt">total=</span><span class="ot">FALSE</span>)))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.921</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">162</td>
<td align="center">104</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean</td>
<td align="center">35.873</td>
<td align="center">36.029</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.048</td>
</tr>
<tr class="odd">
<td align="left">   Mean</td>
<td align="center">60.455</td>
<td align="center">59.247</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb108-1" data-line-number="1"><span class="co">## Don't show N at all</span></a>
<a class="sourceLine" id="cb108-2" data-line-number="2"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>ast <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy, </a>
<a class="sourceLine" id="cb108-3" data-line-number="3">                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;mean&quot;</span>),<span class="dt">total=</span><span class="ot">FALSE</span>)))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.921</td>
</tr>
<tr class="even">
<td align="left">   Mean</td>
<td align="center">35.873</td>
<td align="center">36.029</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.048</td>
</tr>
<tr class="even">
<td align="left">   Mean</td>
<td align="center">60.455</td>
<td align="center">59.247</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>One might also consider the use of <code>includeNA()</code> to include NAs in the counts and percents for categorical variables.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb109-1" data-line-number="1">mockstudy<span class="op">$</span>ps.cat &lt;-<span class="st"> </span><span class="kw">factor</span>(mockstudy<span class="op">$</span>ps)</a>
<a class="sourceLine" id="cb109-2" data-line-number="2"><span class="kw">attr</span>(mockstudy<span class="op">$</span>ps.cat, <span class="st">&quot;label&quot;</span>) &lt;-<span class="st"> &quot;ps&quot;</span></a>
<a class="sourceLine" id="cb109-3" data-line-number="3"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span><span class="kw">includeNA</span>(ps.cat), <span class="dt">data =</span> mockstudy, <span class="dt">cat.stats =</span> <span class="st">&quot;countpct&quot;</span>))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>ps</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.354</td>
</tr>
<tr class="even">
<td align="left">   0</td>
<td align="center">391 (42.7%)</td>
<td align="center">244 (41.9%)</td>
<td align="center">635 (42.4%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   1</td>
<td align="center">329 (35.9%)</td>
<td align="center">202 (34.6%)</td>
<td align="center">531 (35.4%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   2</td>
<td align="center">34 (3.7%)</td>
<td align="center">33 (5.7%)</td>
<td align="center">67 (4.5%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   (Missing)</td>
<td align="center">162 (17.7%)</td>
<td align="center">104 (17.8%)</td>
<td align="center">266 (17.7%)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="modify-the-number-of-digits-used" class="section level2">
<h2>14. Modify the number of digits used</h2>
<p>Within tableby.control function there are 4 options for controlling the number of significant digits shown.</p>
<ul>
<li><p>digits: controls the number of digits after the decimal place for continuous values</p></li>
<li><p>digits.count: controls the number of digits after the decimal point for counts</p></li>
<li><p>digits.pct: controls the number of digits after the decimal point for percents</p></li>
<li><p>digits.p: controls the number of digits after the decimal point for p-values</p></li>
</ul>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb110-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>fu.time, <span class="dt">data=</span>mockstudy), <span class="dt">digits=</span><span class="dv">4</span>, <span class="dt">digits.p=</span><span class="dv">2</span>, <span class="dt">digits.pct=</span><span class="dv">1</span>)</a></code></pre></div>
<table>
<colgroup>
<col width="23%"></col>
<col width="17%"></col>
<col width="17%"></col>
<col width="17%"></col>
<col width="17%"></col>
<col width="6%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.19</td>
</tr>
<tr class="even">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.61</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">59.6729 (11.3645)</td>
<td align="center">60.3010 (11.6323)</td>
<td align="center">59.7632 (11.4993)</td>
<td align="center">59.9853 (11.5188)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">27.0000 - 88.0000</td>
<td align="center">19.0000 - 88.0000</td>
<td align="center">26.0000 - 85.0000</td>
<td align="center">19.0000 - 88.0000</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>fu.time</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">&lt; 0.01</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">553.5841 (419.6065)</td>
<td align="center">731.2460 (487.7443)</td>
<td align="center">607.2421 (435.5092)</td>
<td align="center">649.0841 (462.5109)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">9.0000 - 2170.0000</td>
<td align="center">0.0000 - 2472.0000</td>
<td align="center">17.0000 - 2118.0000</td>
<td align="center">0.0000 - 2472.0000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>With the exception of <code>digits.p</code>, all of these can be specified on a per-variable basis using the in-formula functions that specify which tests are run:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb111-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span><span class="kw">chisq</span>(sex, <span class="dt">digits.pct=</span><span class="dv">1</span>) <span class="op">+</span><span class="st"> </span><span class="kw">anova</span>(age, <span class="dt">digits=</span><span class="dv">4</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb111-2" data-line-number="2"><span class="st">                  </span><span class="kw">anova</span>(fu.time, <span class="dt">digits =</span> <span class="dv">1</span>), <span class="dt">data=</span>mockstudy))</a></code></pre></div>
<table>
<colgroup>
<col width="25%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="7%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.190</td>
</tr>
<tr class="even">
<td align="left">   Male</td>
<td align="center">277 (64.7%)</td>
<td align="center">411 (59.5%)</td>
<td align="center">228 (60.0%)</td>
<td align="center">916 (61.1%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Female</td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.614</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">59.6729 (11.3645)</td>
<td align="center">60.3010 (11.6323)</td>
<td align="center">59.7632 (11.4993)</td>
<td align="center">59.9853 (11.5188)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">27.0000 - 88.0000</td>
<td align="center">19.0000 - 88.0000</td>
<td align="center">26.0000 - 85.0000</td>
<td align="center">19.0000 - 88.0000</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>fu.time</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">553.6 (419.6)</td>
<td align="center">731.2 (487.7)</td>
<td align="center">607.2 (435.5)</td>
<td align="center">649.1 (462.5)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">9.0 - 2170.0</td>
<td align="center">0.0 - 2472.0</td>
<td align="center">17.0 - 2118.0</td>
<td align="center">0.0 - 2472.0</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="create-a-user-defined-summary-statistic" class="section level2">
<h2>15. Create a user-defined summary statistic</h2>
<p>For purposes of this example, the code below creates a trimmed mean function (trims 10%) and use that to summarize the data. Note the use of the <code>...</code> which tells R to pass extra arguments on - this is required for user-defined functions. In this case, <code>na.rm=T</code> is passed to <code>myfunc</code>. The <em>weights</em> argument is also required, even though it isn’t passed on to the internal function in this particular example.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb112-1" data-line-number="1">trim10 &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">weights=</span><span class="kw">rep</span>(<span class="dv">1</span>,<span class="kw">length</span>(x)), ...){</a>
<a class="sourceLine" id="cb112-2" data-line-number="2">  <span class="kw">mean</span>(x, <span class="dt">trim=</span>.<span class="dv">1</span>, ...)</a>
<a class="sourceLine" id="cb112-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb112-4" data-line-number="4"></a>
<a class="sourceLine" id="cb112-5" data-line-number="5"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>hgb, <span class="dt">data=</span>mockstudy, </a>
<a class="sourceLine" id="cb112-6" data-line-number="6">                <span class="dt">control=</span><span class="kw">tableby.control</span>(<span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss&quot;</span>,<span class="st">&quot;trim10&quot;</span>), <span class="dt">numeric.test=</span><span class="st">&quot;kwt&quot;</span>,</a>
<a class="sourceLine" id="cb112-7" data-line-number="7">                    <span class="dt">stats.labels=</span><span class="kw">list</span>(<span class="dt">Nmiss=</span><span class="st">'Missing values'</span>, <span class="dt">trim10=</span><span class="st">&quot;Trimmed Mean, 10%&quot;</span>))))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">&lt; 0.001</td>
</tr>
<tr class="even">
<td align="left">   Missing values</td>
<td align="center">162</td>
<td align="center">104</td>
<td align="center">266</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Trimmed Mean, 10%</td>
<td align="center">12.6</td>
<td align="center">11.9</td>
<td align="center">12.3</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>For statistics to be formatted appropriately, you may want to use <code>as.tbstat()</code> or <code>as.countpct()</code>. For example, suppose you want to create a trimmed mean function that trims by both 5 and 10 percent. The first example shows them separated by a comma; the second puts the 10% trimmed mean in brackets</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb113-1" data-line-number="1">trim510comma &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">weights=</span><span class="kw">rep</span>(<span class="dv">1</span>,<span class="kw">length</span>(x)), ...){</a>
<a class="sourceLine" id="cb113-2" data-line-number="2">  tmp &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">mean</span>(x, <span class="dt">trim =</span> <span class="fl">0.05</span>, ...), <span class="kw">mean</span>(x, <span class="dt">trim =</span> <span class="fl">0.1</span>, ...))</a>
<a class="sourceLine" id="cb113-3" data-line-number="3">  <span class="kw">as.tbstat</span>(tmp, <span class="dt">sep =</span> <span class="st">&quot;, &quot;</span>)</a>
<a class="sourceLine" id="cb113-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb113-5" data-line-number="5">trim510bracket &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">weights=</span><span class="kw">rep</span>(<span class="dv">1</span>,<span class="kw">length</span>(x)), ...){</a>
<a class="sourceLine" id="cb113-6" data-line-number="6">  tmp &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">mean</span>(x, <span class="dt">trim =</span> <span class="fl">0.05</span>, ...), <span class="kw">mean</span>(x, <span class="dt">trim =</span> <span class="fl">0.1</span>, ...))</a>
<a class="sourceLine" id="cb113-7" data-line-number="7">  <span class="kw">as.tbstat</span>(tmp, <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>, <span class="dt">parens =</span> <span class="kw">c</span>(<span class="st">&quot;[&quot;</span>, <span class="st">&quot;]&quot;</span>))</a>
<a class="sourceLine" id="cb113-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb113-9" data-line-number="9"></a>
<a class="sourceLine" id="cb113-10" data-line-number="10"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>hgb, <span class="dt">data=</span>mockstudy, <span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss&quot;</span>, <span class="st">&quot;trim510comma&quot;</span>), <span class="dt">test =</span> <span class="ot">FALSE</span>))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">162</td>
<td align="center">104</td>
<td align="center">266</td>
</tr>
<tr class="odd">
<td align="left">   trim510comma</td>
<td align="center">12.570, 12.564</td>
<td align="center">11.924, 11.910</td>
<td align="center">12.308, 12.291</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb114-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>hgb, <span class="dt">data=</span>mockstudy, <span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss&quot;</span>, <span class="st">&quot;trim510bracket&quot;</span>), <span class="dt">test =</span> <span class="ot">FALSE</span>))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">162</td>
<td align="center">104</td>
<td align="center">266</td>
</tr>
<tr class="odd">
<td align="left">   trim510bracket</td>
<td align="center">12.570 [12.564]</td>
<td align="center">11.924 [11.910]</td>
<td align="center">12.308 [12.291]</td>
</tr>
</tbody>
</table>
<p>Or perhaps it’s useful to put the amount of trimming in parentheses. Since it is a percent, we can flag it as such:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb115-1" data-line-number="1">trim10pct &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">weights=</span><span class="kw">rep</span>(<span class="dv">1</span>,<span class="kw">length</span>(x)), ...){</a>
<a class="sourceLine" id="cb115-2" data-line-number="2">  tmp &lt;-<span class="st"> </span><span class="kw">mean</span>(x, <span class="dt">trim =</span> <span class="fl">0.05</span>, ...)</a>
<a class="sourceLine" id="cb115-3" data-line-number="3">  <span class="kw">as.countpct</span>(<span class="kw">c</span>(tmp, <span class="dv">10</span>), <span class="dt">sep =</span> <span class="st">&quot; &quot;</span>, <span class="dt">parens =</span> <span class="kw">c</span>(<span class="st">&quot;(&quot;</span>, <span class="st">&quot;)&quot;</span>), <span class="dt">which.count =</span> <span class="dv">0</span>, <span class="dt">which.pct =</span> <span class="dv">2</span>, <span class="dt">pct =</span> <span class="st">&quot;%&quot;</span>)</a>
<a class="sourceLine" id="cb115-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb115-5" data-line-number="5"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>hgb, <span class="dt">data=</span>mockstudy, <span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss&quot;</span>, <span class="st">&quot;trim10pct&quot;</span>),</a>
<a class="sourceLine" id="cb115-6" data-line-number="6">                <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">digits.pct =</span> <span class="dv">0</span>, <span class="dt">test =</span> <span class="ot">FALSE</span>))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>hgb</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">162</td>
<td align="center">104</td>
<td align="center">266</td>
</tr>
<tr class="odd">
<td align="left">   trim10pct</td>
<td align="center">12.57 (10%)</td>
<td align="center">11.92 (10%)</td>
<td align="center">12.31 (10%)</td>
</tr>
</tbody>
</table>
</div>
<div id="use-case-weights-for-creating-summary-statistics" class="section level2">
<h2>16. Use case-weights for creating summary statistics</h2>
<p>When comparing groups, they are often unbalanced when it comes to nuisances such as age and sex. The <code>tableby</code> function allows you to create weighted summary statistics. If this option us used then p-values are not calculated (<code>test=FALSE</code>).</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb116-1" data-line-number="1"><span class="co">##create fake group that is not balanced by age/sex </span></a>
<a class="sourceLine" id="cb116-2" data-line-number="2"><span class="kw">set.seed</span>(<span class="dv">200</span>)</a>
<a class="sourceLine" id="cb116-3" data-line-number="3">mockstudy<span class="op">$</span>fake_arm &lt;-<span class="st"> </span><span class="kw">ifelse</span>(mockstudy<span class="op">$</span>age<span class="op">&gt;</span><span class="dv">60</span> <span class="op">&amp;</span><span class="st"> </span>mockstudy<span class="op">$</span>sex<span class="op">==</span><span class="st">'Female'</span>,<span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">'A'</span>,<span class="st">'B'</span>),<span class="dt">replace=</span>T, <span class="dt">prob=</span><span class="kw">c</span>(.<span class="dv">2</span>,.<span class="dv">8</span>)),</a>
<a class="sourceLine" id="cb116-4" data-line-number="4">                            <span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">'A'</span>,<span class="st">'B'</span>),<span class="dt">replace=</span>T, <span class="dt">prob=</span><span class="kw">c</span>(.<span class="dv">8</span>,.<span class="dv">4</span>)))</a>
<a class="sourceLine" id="cb116-5" data-line-number="5"></a>
<a class="sourceLine" id="cb116-6" data-line-number="6">mockstudy<span class="op">$</span>agegp &lt;-<span class="st"> </span><span class="kw">cut</span>(mockstudy<span class="op">$</span>age, <span class="dt">breaks=</span><span class="kw">c</span>(<span class="dv">18</span>,<span class="dv">50</span>,<span class="dv">60</span>,<span class="dv">70</span>,<span class="dv">90</span>), <span class="dt">right=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb116-7" data-line-number="7"></a>
<a class="sourceLine" id="cb116-8" data-line-number="8"><span class="co">## create weights based on agegp and sex distribution</span></a>
<a class="sourceLine" id="cb116-9" data-line-number="9">tab1 &lt;-<span class="st"> </span><span class="kw">with</span>(mockstudy,<span class="kw">table</span>(agegp, sex))</a>
<a class="sourceLine" id="cb116-10" data-line-number="10">tab2 &lt;-<span class="st"> </span><span class="kw">with</span>(mockstudy, <span class="kw">table</span>(agegp, sex, fake_arm))</a>
<a class="sourceLine" id="cb116-11" data-line-number="11">tab2</a></code></pre></div>
<pre><code>## , , fake_arm = A
## 
##          sex
## agegp     Male Female
##   [18,50)   73     62
##   [50,60)  128     94
##   [60,70)  139      7
##   [70,90)  102      0
## 
## , , fake_arm = B
## 
##          sex
## agegp     Male Female
##   [18,50)   79     48
##   [50,60)  130     84
##   [60,70)  156    166
##   [70,90)  109    122</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb118-1" data-line-number="1">gpwts &lt;-<span class="st"> </span><span class="kw">rep</span>(tab1, <span class="kw">length</span>(<span class="kw">unique</span>(mockstudy<span class="op">$</span>fake_arm)))<span class="op">/</span>tab2</a>
<a class="sourceLine" id="cb118-2" data-line-number="2">gpwts[gpwts<span class="op">&gt;</span><span class="dv">50</span>] &lt;-<span class="st"> </span><span class="dv">30</span></a>
<a class="sourceLine" id="cb118-3" data-line-number="3"></a>
<a class="sourceLine" id="cb118-4" data-line-number="4"><span class="co">## apply weights to subjects</span></a>
<a class="sourceLine" id="cb118-5" data-line-number="5">index &lt;-<span class="st"> </span><span class="kw">with</span>(mockstudy, <span class="kw">cbind</span>(<span class="kw">as.numeric</span>(agegp), <span class="kw">as.numeric</span>(sex), <span class="kw">as.numeric</span>(<span class="kw">as.factor</span>(fake_arm)))) </a>
<a class="sourceLine" id="cb118-6" data-line-number="6">mockstudy<span class="op">$</span>wts &lt;-<span class="st"> </span>gpwts[index]</a>
<a class="sourceLine" id="cb118-7" data-line-number="7"></a>
<a class="sourceLine" id="cb118-8" data-line-number="8"><span class="co">## show weights by treatment arm group</span></a>
<a class="sourceLine" id="cb118-9" data-line-number="9"><span class="kw">tapply</span>(mockstudy<span class="op">$</span>wts,mockstudy<span class="op">$</span>fake_arm, summary)</a></code></pre></div>
<pre><code>## $A
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   1.774   1.894   2.069   2.276   2.082  24.714 
## 
## $B
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   1.000   1.042   1.924   1.677   1.985   2.292</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb120-1" data-line-number="1">orig &lt;-<span class="st"> </span><span class="kw">tableby</span>(fake_arm <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span><span class="kw">Surv</span>(fu.time<span class="op">/</span><span class="dv">365</span>, fu.stat), <span class="dt">data=</span>mockstudy, <span class="dt">test=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb120-2" data-line-number="2"><span class="kw">summary</span>(orig, <span class="dt">title=</span><span class="st">'No Case Weights used'</span>)</a></code></pre></div>
<table>
<caption>No Case Weights used</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A (N=605)</th>
<th align="center">B (N=894)</th>
<th align="center">Total (N=1499)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">57.413 (11.618)</td>
<td align="center">61.726 (11.125)</td>
<td align="center">59.985 (11.519)</td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">22.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
</tr>
<tr class="even">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">   Male</td>
<td align="center">442 (73.1%)</td>
<td align="center">474 (53.0%)</td>
<td align="center">916 (61.1%)</td>
</tr>
<tr class="even">
<td align="left">   Female</td>
<td align="center">163 (26.9%)</td>
<td align="center">420 (47.0%)</td>
<td align="center">583 (38.9%)</td>
</tr>
<tr class="odd">
<td align="left"><strong>Surv(fu.time/365, fu.stat)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">   Events</td>
<td align="center">554</td>
<td align="center">802</td>
<td align="center">1356</td>
</tr>
<tr class="odd">
<td align="left">   Median Survival</td>
<td align="center">1.504</td>
<td align="center">1.493</td>
<td align="center">1.496</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb121-1" data-line-number="1">tab1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(fake_arm <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span><span class="kw">Surv</span>(fu.time<span class="op">/</span><span class="dv">365</span>, fu.stat), <span class="dt">data=</span>mockstudy, <span class="dt">weights=</span>wts)</a>
<a class="sourceLine" id="cb121-2" data-line-number="2"><span class="kw">summary</span>(tab1, <span class="dt">title=</span><span class="st">'Case Weights used'</span>)</a></code></pre></div>
<table>
<caption>Case Weights used</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A (N=1377)</th>
<th align="center">B (N=1499)</th>
<th align="center">Total (N=2876)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">58.009 (10.925)</td>
<td align="center">60.151 (11.428)</td>
<td align="center">59.126 (11.235)</td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">22.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
</tr>
<tr class="even">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">   Male</td>
<td align="center">916 (66.5%)</td>
<td align="center">916 (61.1%)</td>
<td align="center">1832 (63.7%)</td>
</tr>
<tr class="even">
<td align="left">   Female</td>
<td align="center">461 (33.5%)</td>
<td align="center">583 (38.9%)</td>
<td align="center">1044 (36.3%)</td>
</tr>
<tr class="odd">
<td align="left"><strong>Surv(fu.time/365, fu.stat)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">   Events</td>
<td align="center">1252</td>
<td align="center">1348</td>
<td align="center">2599</td>
</tr>
<tr class="odd">
<td align="left">   Median Survival</td>
<td align="center">1.534</td>
<td align="center">1.496</td>
<td align="center">1.532</td>
</tr>
</tbody>
</table>
</div>
<div id="create-your-own-p-value-and-add-it-to-the-table" class="section level2">
<h2>17. Create your own p-value and add it to the table</h2>
<p>When using weighted summary statistics, it is often desirable to then show a p-value from a model that corresponds to the weighted analysis. It is possible to add your own p-value and modify the column title for that new p-value. Another use for this would be to add standardized differences or confidence intervals instead of a p-value.</p>
<p>To add the p-value, you simply need to create a data frame and use the function <code>modpval.tableby()</code>. The first few columns in the data.frame are required: (1) the by-variable, (2) the strata value (if the table has a strata term), (3) the x-variable, and (4) the new p-value (or test statistic). Another optional column can be used to indicate what method was used to calculate the p-value. If you specify <code>use.pname=TRUE</code> then the column name indicating the p-value will be also be used in the tableby summary.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb122-1" data-line-number="1">mypval &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb122-2" data-line-number="2">  <span class="dt">byvar =</span> <span class="st">&quot;fake_arm&quot;</span>,</a>
<a class="sourceLine" id="cb122-3" data-line-number="3">  <span class="dt">variable =</span> <span class="kw">c</span>(<span class="st">'age'</span>,<span class="st">'sex'</span>,<span class="st">'Surv(fu.time/365, fu.stat)'</span>), </a>
<a class="sourceLine" id="cb122-4" data-line-number="4">  <span class="dt">adj.pvalue =</span> <span class="kw">c</span>(.<span class="dv">953</span>,.<span class="dv">811</span>,.<span class="dv">01</span>), </a>
<a class="sourceLine" id="cb122-5" data-line-number="5">  <span class="dt">method =</span> <span class="kw">c</span>(<span class="st">'Age/Sex adjusted model results'</span>)</a>
<a class="sourceLine" id="cb122-6" data-line-number="6">)</a>
<a class="sourceLine" id="cb122-7" data-line-number="7">tab2 &lt;-<span class="st"> </span><span class="kw">modpval.tableby</span>(tab1, mypval, <span class="dt">use.pname=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb122-8" data-line-number="8"><span class="kw">summary</span>(tab2, <span class="dt">title=</span><span class="st">'Case Weights used, p-values added'</span>, <span class="dt">pfootnote=</span><span class="ot">TRUE</span>)</a></code></pre></div>
<table>
<caption>Case Weights used, p-values added</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A (N=1377)</th>
<th align="center">B (N=1499)</th>
<th align="center">Total (N=2876)</th>
<th align="right">adj.pvalue</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.953<sup>1</sup></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">58.009 (10.925)</td>
<td align="center">60.151 (11.428)</td>
<td align="center">59.126 (11.235)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">22.000 - 85.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Gender</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.811<sup>1</sup></td>
</tr>
<tr class="odd">
<td align="left">   Male</td>
<td align="center">916 (66.5%)</td>
<td align="center">916 (61.1%)</td>
<td align="center">1832 (63.7%)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Female</td>
<td align="center">461 (33.5%)</td>
<td align="center">583 (38.9%)</td>
<td align="center">1044 (36.3%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Surv(fu.time/365, fu.stat)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.010<sup>1</sup></td>
</tr>
<tr class="even">
<td align="left">   Events</td>
<td align="center">1252</td>
<td align="center">1348</td>
<td align="center">2599</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Median Survival</td>
<td align="center">1.534</td>
<td align="center">1.496</td>
<td align="center">1.532</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<ol style="list-style-type: decimal">
<li>Age/Sex adjusted model results</li>
</ol>
</div>
<div id="for-two-level-categorical-variables-or-one-line-numeric-variables-simplify-the-output." class="section level2">
<h2>18. For two-level categorical variables or one-line numeric variables, simplify the output.</h2>
<p>If the <code>cat.simplify</code> option is set to <code>TRUE</code>, then only the second level of two-level categorical varialbes is shown. In the example below, <code>sex</code> has two levels, and “Female” is the second level, hence only the counts and percents for Female are shown. Similarly, “mdquality.s” was turned to a factor, and “1” is the second level, but since there are missings, the table ignores <code>cat.simplify</code> and displays all levels (since the output can no longer be displayed on one line).</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb123-1" data-line-number="1">table2 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm<span class="op">~</span>sex <span class="op">+</span><span class="st"> </span><span class="kw">factor</span>(mdquality.s), <span class="dt">data=</span>mockstudy, <span class="dt">cat.simplify=</span><span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb123-2" data-line-number="2"><span class="kw">summary</span>(table2, <span class="dt">labelTranslations=</span><span class="kw">c</span>(<span class="dt">sex=</span><span class="st">&quot;Female&quot;</span>, <span class="st">&quot;factor(mdquality.s)&quot;</span>=<span class="st">&quot;MD Quality&quot;</span>))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Female</strong></td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right">0.190</td>
</tr>
<tr class="even">
<td align="left"><strong>MD Quality</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.694</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">55</td>
<td align="center">156</td>
<td align="center">41</td>
<td align="center">252</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   0</td>
<td align="center">41 (11.0%)</td>
<td align="center">52 (9.7%)</td>
<td align="center">31 (9.1%)</td>
<td align="center">124 (9.9%)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   1</td>
<td align="center">332 (89.0%)</td>
<td align="center">483 (90.3%)</td>
<td align="center">308 (90.9%)</td>
<td align="center">1123 (90.1%)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>Similarly, if <code>numeric.simplify</code> is set to <code>TRUE</code>, then any numerics which only have one row of summary statistics are simplified into a single row. Note again that <code>ast</code> has missing values and so is not simplified to a single row.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb124-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>ast, <span class="dt">data =</span> mockstudy,</a>
<a class="sourceLine" id="cb124-2" data-line-number="2">                <span class="dt">numeric.simplify=</span><span class="ot">TRUE</span>, <span class="dt">numeric.stats=</span><span class="kw">c</span>(<span class="st">&quot;Nmiss&quot;</span>, <span class="st">&quot;meansd&quot;</span>)))</a></code></pre></div>
<table style="width:100%;">
<colgroup>
<col width="26%"></col>
<col width="16%"></col>
<col width="17%"></col>
<col width="16%"></col>
<col width="16%"></col>
<col width="7%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="right">0.614</td>
</tr>
<tr class="even">
<td align="left"><strong>ast</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.507</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">69</td>
<td align="center">141</td>
<td align="center">56</td>
<td align="center">266</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">37.292 (28.036)</td>
<td align="center">35.202 (26.659)</td>
<td align="center">35.670 (25.807)</td>
<td align="center">35.933 (26.843)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>The in-formula functions to change which tests are run can also be used to specify these options for each variable at a time.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb125-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span><span class="kw">anova</span>(age, <span class="st">&quot;meansd&quot;</span>, <span class="dt">numeric.simplify=</span><span class="ot">TRUE</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb125-2" data-line-number="2"><span class="st">                  </span><span class="kw">chisq</span>(sex, <span class="dt">cat.simplify=</span><span class="ot">TRUE</span>), <span class="dt">data =</span> mockstudy))</a></code></pre></div>
<table>
<colgroup>
<col width="14%"></col>
<col width="18%"></col>
<col width="20%"></col>
<col width="18%"></col>
<col width="18%"></col>
<col width="8%"></col>
</colgroup>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">A: IFL (N=428)</th>
<th align="center">F: FOLFOX (N=691)</th>
<th align="center">G: IROX (N=380)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center">59.673 (11.365)</td>
<td align="center">60.301 (11.632)</td>
<td align="center">59.763 (11.499)</td>
<td align="center">59.985 (11.519)</td>
<td align="right">0.614</td>
</tr>
<tr class="even">
<td align="left"><strong>Gender</strong></td>
<td align="center">151 (35.3%)</td>
<td align="center">280 (40.5%)</td>
<td align="center">152 (40.0%)</td>
<td align="center">583 (38.9%)</td>
<td align="right">0.190</td>
</tr>
</tbody>
</table>
</div>
<div id="use-tableby-within-an-sweave-document" class="section level2">
<h2>19. Use <code>tableby</code> within an Sweave document</h2>
<p>For those users who wish to create tables within an Sweave document, the following code seems to work.</p>
<pre><code>\documentclass{article}

\usepackage{longtable}
\usepackage{pdfpages}

\begin{document}

\section{Read in Data}
&lt;&lt;echo=TRUE&gt;&gt;=
require(arsenal)
require(knitr)
require(rmarkdown)
data(mockstudy)

tab1 &lt;- tableby(arm~sex+age, data=mockstudy)
@

\section{Convert Summary.Tableby to LaTeX}
&lt;&lt;echo=TRUE, results='hide', message=FALSE&gt;&gt;=
capture.output(summary(tab1), file=&quot;Test.md&quot;)

## Convert R Markdown Table to LaTeX
render(&quot;Test.md&quot;, pdf_document(keep_tex=TRUE))
@ 

\includepdf{Test.pdf}

\end{document}</code></pre>
</div>
<div id="export-tableby-object-to-a-.csv-file" class="section level2">
<h2>20. Export <code>tableby</code> object to a .CSV file</h2>
<p>When looking at multiple variables it is sometimes useful to export the results to a csv file. The <code>as.data.frame</code> function creates a data frame object that can be exported or further manipulated within R.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb127-1" data-line-number="1">tab1 &lt;-<span class="st"> </span><span class="kw">summary</span>(<span class="kw">tableby</span>(arm<span class="op">~</span>sex<span class="op">+</span>age, <span class="dt">data=</span>mockstudy), <span class="dt">text =</span> <span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb127-2" data-line-number="2"><span class="kw">as.data.frame</span>(tab1)</a></code></pre></div>
<pre><code>##              A: IFL (N=428) F: FOLFOX (N=691) G: IROX (N=380)  Total (N=1499) p value
## 1    Gender                                                                     0.190
## 2      Male     277 (64.7%)       411 (59.5%)     228 (60.0%)     916 (61.1%)        
## 3    Female     151 (35.3%)       280 (40.5%)     152 (40.0%)     583 (38.9%)        
## 4  Age, yrs                                                                     0.614
## 5 Mean (SD) 59.673 (11.365)   60.301 (11.632) 59.763 (11.499) 59.985 (11.519)        
## 6     Range 27.000 - 88.000   19.000 - 88.000 26.000 - 85.000 19.000 - 88.000</code></pre>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb129-1" data-line-number="1"><span class="co"># write.csv(tab1, '/my/path/here/my_table.csv')</span></a></code></pre></div>
</div>
<div id="write-tableby-object-to-a-separate-word-or-html-file" class="section level2">
<h2>21. Write <code>tableby</code> object to a separate Word or HTML file</h2>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb130-1" data-line-number="1"><span class="co">## write to an HTML document</span></a>
<a class="sourceLine" id="cb130-2" data-line-number="2">tab1 &lt;-<span class="st"> </span><span class="kw">tableby</span>(arm <span class="op">~</span><span class="st"> </span>sex <span class="op">+</span><span class="st"> </span>age, <span class="dt">data=</span>mockstudy)</a>
<a class="sourceLine" id="cb130-3" data-line-number="3"><span class="kw">write2html</span>(tab1, <span class="st">&quot;~/trash.html&quot;</span>)</a>
<a class="sourceLine" id="cb130-4" data-line-number="4"></a>
<a class="sourceLine" id="cb130-5" data-line-number="5"><span class="co">## write to a Word document</span></a>
<a class="sourceLine" id="cb130-6" data-line-number="6"><span class="kw">write2word</span>(tab1, <span class="st">&quot;~/trash.doc&quot;</span>, <span class="dt">title=</span><span class="st">&quot;My table in Word&quot;</span>)</a></code></pre></div>
</div>
<div id="use-tableby-in-r-shiny" class="section level2">
<h2>22. Use <code>tableby</code> in R Shiny</h2>
<p>The easiest way to output a <code>tableby()</code> object in an R Shiny app is to use the <code>tableOutput()</code> UI in combination with the <code>renderTable()</code> server function and <code>as.data.frame(summary(tableby()))</code>:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb131-1" data-line-number="1"><span class="co"># A standalone shiny app</span></a>
<a class="sourceLine" id="cb131-2" data-line-number="2"><span class="kw">library</span>(shiny)</a>
<a class="sourceLine" id="cb131-3" data-line-number="3"><span class="kw">library</span>(arsenal)</a>
<a class="sourceLine" id="cb131-4" data-line-number="4"><span class="kw">data</span>(mockstudy)</a>
<a class="sourceLine" id="cb131-5" data-line-number="5"></a>
<a class="sourceLine" id="cb131-6" data-line-number="6"><span class="kw">shinyApp</span>(</a>
<a class="sourceLine" id="cb131-7" data-line-number="7">  <span class="dt">ui =</span> <span class="kw">fluidPage</span>(<span class="kw">tableOutput</span>(<span class="st">&quot;table&quot;</span>)),</a>
<a class="sourceLine" id="cb131-8" data-line-number="8">  <span class="dt">server =</span> <span class="cf">function</span>(input, output) {</a>
<a class="sourceLine" id="cb131-9" data-line-number="9">    output<span class="op">$</span>table &lt;-<span class="st"> </span><span class="kw">renderTable</span>({</a>
<a class="sourceLine" id="cb131-10" data-line-number="10">      <span class="kw">as.data.frame</span>(<span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>age, <span class="dt">data =</span> mockstudy), <span class="dt">text =</span> <span class="st">&quot;html&quot;</span>))</a>
<a class="sourceLine" id="cb131-11" data-line-number="11">    }, <span class="dt">sanitize.text.function =</span> <span class="cf">function</span>(x) x)</a>
<a class="sourceLine" id="cb131-12" data-line-number="12">  }</a>
<a class="sourceLine" id="cb131-13" data-line-number="13">)</a></code></pre></div>
<p>This can be especially powerful if you feed the selections from a <code>selectInput(multiple = TRUE)</code> into <code>formulize()</code> to make the table dynamic!</p>
</div>
<div id="use-tableby-in-bookdown" class="section level2">
<h2>23. Use <code>tableby</code> in bookdown</h2>
<p>Since the backbone of <code>tableby()</code> is <code>knitr::kable()</code>, tables still render well in bookdown. However, <code>print.summary.tableby()</code> doesn’t use the <code>caption=</code> argument of <code>kable()</code>, so some tables may not have a properly numbered caption. To fix this, use the method described <a href="https://bookdown.org/yihui/bookdown/tables.html">on the bookdown site</a> to give the table a tag/ID.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb132-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>age, <span class="dt">data =</span> mockstudy), <span class="dt">title=</span><span class="st">&quot;(</span><span class="ch">\\</span><span class="st">#tab:mytableby) Caption here&quot;</span>)</a></code></pre></div>
</div>
<div id="adjust-tableby-for-multiple-p-values" class="section level2">
<h2>24. Adjust <code>tableby</code> for multiple p-values</h2>
<p>The <code>padjust()</code> function is a new S3 generic piggybacking off of <code>p.adjust()</code>. It works on both <code>tableby</code> and <code>summary.tableby</code> objects:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb133-1" data-line-number="1">tab &lt;-<span class="st"> </span><span class="kw">summary</span>(<span class="kw">tableby</span>(sex <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>fu.time <span class="op">+</span><span class="st"> </span>bmi <span class="op">+</span><span class="st"> </span>mdquality.s, <span class="dt">data =</span> mockstudy))</a>
<a class="sourceLine" id="cb133-2" data-line-number="2">tab</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.048</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">60.455 (11.369)</td>
<td align="center">59.247 (11.722)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">19.000 - 88.000</td>
<td align="center">22.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>fu.time</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.978</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">649.345 (454.332)</td>
<td align="center">648.674 (475.472)</td>
<td align="center">649.084 (462.511)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">0.000 - 2472.000</td>
<td align="center">9.000 - 2441.000</td>
<td align="center">0.000 - 2472.000</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.012</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">22</td>
<td align="center">11</td>
<td align="center">33</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">27.491 (5.030)</td>
<td align="center">26.760 (5.984)</td>
<td align="center">27.206 (5.432)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">14.053 - 60.243</td>
<td align="center">15.430 - 53.008</td>
<td align="center">14.053 - 60.243</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>mdquality.s</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.827</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">153</td>
<td align="center">99</td>
<td align="center">252</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">0.899 (0.301)</td>
<td align="center">0.903 (0.296)</td>
<td align="center">0.901 (0.299)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">0.000 - 1.000</td>
<td align="center">0.000 - 1.000</td>
<td align="center">0.000 - 1.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb134-1" data-line-number="1"><span class="kw">padjust</span>(tab, <span class="dt">method =</span> <span class="st">&quot;bonferroni&quot;</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.191</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">60.455 (11.369)</td>
<td align="center">59.247 (11.722)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">19.000 - 88.000</td>
<td align="center">22.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>fu.time</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">649.345 (454.332)</td>
<td align="center">648.674 (475.472)</td>
<td align="center">649.084 (462.511)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">0.000 - 2472.000</td>
<td align="center">9.000 - 2441.000</td>
<td align="center">0.000 - 2472.000</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.048</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">22</td>
<td align="center">11</td>
<td align="center">33</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">27.491 (5.030)</td>
<td align="center">26.760 (5.984)</td>
<td align="center">27.206 (5.432)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">14.053 - 60.243</td>
<td align="center">15.430 - 53.008</td>
<td align="center">14.053 - 60.243</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"><strong>mdquality.s</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">1.000</td>
</tr>
<tr class="even">
<td align="left">   N-Miss</td>
<td align="center">153</td>
<td align="center">99</td>
<td align="center">252</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Mean (SD)</td>
<td align="center">0.899 (0.301)</td>
<td align="center">0.903 (0.296)</td>
<td align="center">0.901 (0.299)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Range</td>
<td align="center">0.000 - 1.000</td>
<td align="center">0.000 - 1.000</td>
<td align="center">0.000 - 1.000</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="tabulate-multiple-endpoints" class="section level2">
<h2>25. Tabulate multiple endpoints</h2>
<p>You can now use <code>list()</code> on the left-hand side of <code>tableby()</code> to give multiple endpoints.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb135-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(<span class="kw">list</span>(sex, mdquality.s, ps) <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>bmi, <span class="dt">data =</span> mockstudy))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.048</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">60.455 (11.369)</td>
<td align="center">59.247 (11.722)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">19.000 - 88.000</td>
<td align="center">22.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.012</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">22</td>
<td align="center">11</td>
<td align="center">33</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">27.491 (5.030)</td>
<td align="center">26.760 (5.984)</td>
<td align="center">27.206 (5.432)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">14.053 - 60.243</td>
<td align="center">15.430 - 53.008</td>
<td align="center">14.053 - 60.243</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">0 (N=124)</th>
<th align="center">1 (N=1123)</th>
<th align="center">Total (N=1247)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.766</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">60.089 (11.627)</td>
<td align="center">59.763 (11.537)</td>
<td align="center">59.796 (11.542)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">29.000 - 82.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.225</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">3</td>
<td align="center">18</td>
<td align="center">21</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">26.684 (6.331)</td>
<td align="center">27.309 (5.274)</td>
<td align="center">27.247 (5.388)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">16.071 - 60.243</td>
<td align="center">14.053 - 53.008</td>
<td align="center">14.053 - 60.243</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="center">0 (N=635)</th>
<th align="center">1 (N=531)</th>
<th align="center">2 (N=67)</th>
<th align="center">Total (N=1233)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.335</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">59.935 (11.261)</td>
<td align="center">60.800 (11.721)</td>
<td align="center">59.254 (12.090)</td>
<td align="center">60.271 (11.507)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">22.000 - 85.000</td>
<td align="center">26.000 - 88.000</td>
<td align="center">28.000 - 80.000</td>
<td align="center">22.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.028</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">7</td>
<td align="center">20</td>
<td align="center">1</td>
<td align="center">28</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">27.539 (5.222)</td>
<td align="center">26.842 (5.436)</td>
<td align="center">26.178 (5.808)</td>
<td align="center">27.169 (5.358)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">14.053 - 48.384</td>
<td align="center">15.430 - 60.243</td>
<td align="center">16.071 - 44.922</td>
<td align="center">14.053 - 60.243</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>To avoid confusion about which table is which endpoint, you can set <code>term.name=TRUE</code> in <code>summary()</code>. This takes the labels for each by-variable and puts them in the top-left of the table.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb136-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(<span class="kw">list</span>(sex, mdquality.s, ps) <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>bmi, <span class="dt">data =</span> mockstudy), <span class="dt">term.name =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Gender</th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.048</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">60.455 (11.369)</td>
<td align="center">59.247 (11.722)</td>
<td align="center">59.985 (11.519)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">19.000 - 88.000</td>
<td align="center">22.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.012</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">22</td>
<td align="center">11</td>
<td align="center">33</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">27.491 (5.030)</td>
<td align="center">26.760 (5.984)</td>
<td align="center">27.206 (5.432)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">14.053 - 60.243</td>
<td align="center">15.430 - 53.008</td>
<td align="center">14.053 - 60.243</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="left">mdquality.s</th>
<th align="center">0 (N=124)</th>
<th align="center">1 (N=1123)</th>
<th align="center">Total (N=1247)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.766</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">60.089 (11.627)</td>
<td align="center">59.763 (11.537)</td>
<td align="center">59.796 (11.542)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">29.000 - 82.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center">19.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.225</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">3</td>
<td align="center">18</td>
<td align="center">21</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">26.684 (6.331)</td>
<td align="center">27.309 (5.274)</td>
<td align="center">27.247 (5.388)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">16.071 - 60.243</td>
<td align="center">14.053 - 53.008</td>
<td align="center">14.053 - 60.243</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="left">ps</th>
<th align="center">0 (N=635)</th>
<th align="center">1 (N=531)</th>
<th align="center">2 (N=67)</th>
<th align="center">Total (N=1233)</th>
<th align="right">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.335</td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">59.935 (11.261)</td>
<td align="center">60.800 (11.721)</td>
<td align="center">59.254 (12.090)</td>
<td align="center">60.271 (11.507)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">22.000 - 85.000</td>
<td align="center">26.000 - 88.000</td>
<td align="center">28.000 - 80.000</td>
<td align="center">22.000 - 88.000</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="right">0.028</td>
</tr>
<tr class="odd">
<td align="left">   N-Miss</td>
<td align="center">7</td>
<td align="center">20</td>
<td align="center">1</td>
<td align="center">28</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">   Mean (SD)</td>
<td align="center">27.539 (5.222)</td>
<td align="center">26.842 (5.436)</td>
<td align="center">26.178 (5.808)</td>
<td align="center">27.169 (5.358)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">   Range</td>
<td align="center">14.053 - 48.384</td>
<td align="center">15.430 - 60.243</td>
<td align="center">16.071 - 44.922</td>
<td align="center">14.053 - 60.243</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="tabulate-data-by-a-non-test-group-strata" class="section level2">
<h2>26. Tabulate data by a non-test group (strata)</h2>
<p>You can also specify a second grouping variable that doesn’t get tested (but instead separates results): a <em>strata</em> variable.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb137-1" data-line-number="1"><span class="kw">summary</span>(<span class="kw">tableby</span>(<span class="kw">list</span>(sex, ps) <span class="op">~</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>bmi, <span class="dt">strata =</span> arm, <span class="dt">data =</span> mockstudy))</a></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left">Treatment Arm</th>
<th align="left"></th>
<th align="center">Male (N=916)</th>
<th align="center">Female (N=583)</th>
<th align="center">Total (N=1499)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">A: IFL</td>
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.572</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   Mean (SD)</td>
<td align="center">59.903 (11.347)</td>
<td align="center">59.252 (11.422)</td>
<td align="center">59.673 (11.365)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   Range</td>
<td align="center">28.000 - 83.000</td>
<td align="center">27.000 - 88.000</td>
<td align="center">27.000 - 88.000</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.050</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   N-Miss</td>
<td align="center">7</td>
<td align="center">2</td>
<td align="center">9</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   Mean (SD)</td>
<td align="center">27.685 (5.072)</td>
<td align="center">26.575 (6.287)</td>
<td align="center">27.290 (5.552)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   Range</td>
<td align="center">14.053 - 48.384</td>
<td align="center">16.880 - 53.008</td>
<td align="center">14.053 - 53.008</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">F: FOLFOX</td>
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.286</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   Mean (SD)</td>
<td align="center">60.691 (11.598)</td>
<td align="center">59.729 (11.679)</td>
<td align="center">60.301 (11.632)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   Range</td>
<td align="center">19.000 - 88.000</td>
<td align="center">22.000 - 83.000</td>
<td align="center">19.000 - 88.000</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.768</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   N-Miss</td>
<td align="center">12</td>
<td align="center">8</td>
<td align="center">20</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   Mean (SD)</td>
<td align="center">27.259 (4.715)</td>
<td align="center">27.139 (5.789)</td>
<td align="center">27.210 (5.173)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   Range</td>
<td align="center">17.927 - 47.458</td>
<td align="center">16.649 - 49.130</td>
<td align="center">16.649 - 49.130</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">G: IROX</td>
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.051</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   Mean (SD)</td>
<td align="center">60.702 (10.999)</td>
<td align="center">58.355 (12.113)</td>
<td align="center">59.763 (11.499)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   Range</td>
<td align="center">29.000 - 85.000</td>
<td align="center">26.000 - 82.000</td>
<td align="center">26.000 - 85.000</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.020</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   N-Miss</td>
<td align="center">3</td>
<td align="center">1</td>
<td align="center">4</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   Mean (SD)</td>
<td align="center">27.672 (5.505)</td>
<td align="center">26.262 (6.021)</td>
<td align="center">27.106 (5.751)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   Range</td>
<td align="center">17.377 - 60.243</td>
<td align="center">15.430 - 45.354</td>
<td align="center">15.430 - 60.243</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="left">Treatment Arm</th>
<th align="left"></th>
<th align="center">0 (N=635)</th>
<th align="center">1 (N=531)</th>
<th align="center">2 (N=67)</th>
<th align="center">Total (N=1233)</th>
<th align="center">p value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">A: IFL</td>
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.413</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   Mean (SD)</td>
<td align="center">60.101 (10.948)</td>
<td align="center">60.579 (12.026)</td>
<td align="center">56.842 (13.226)</td>
<td align="center">60.131 (11.535)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   Range</td>
<td align="center">27.000 - 81.000</td>
<td align="center">28.000 - 88.000</td>
<td align="center">34.000 - 75.000</td>
<td align="center">27.000 - 88.000</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.023</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   N-Miss</td>
<td align="center">1</td>
<td align="center">6</td>
<td align="center">1</td>
<td align="center">8</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   Mean (SD)</td>
<td align="center">27.850 (5.318)</td>
<td align="center">26.224 (5.347)</td>
<td align="center">26.954 (5.560)</td>
<td align="center">27.128 (5.385)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   Range</td>
<td align="center">14.053 - 48.384</td>
<td align="center">17.029 - 53.008</td>
<td align="center">17.177 - 37.223</td>
<td align="center">14.053 - 53.008</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left">F: FOLFOX</td>
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.272</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   Mean (SD)</td>
<td align="center">60.173 (11.096)</td>
<td align="center">61.342 (11.918)</td>
<td align="center">63.138 (9.303)</td>
<td align="center">60.845 (11.391)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   Range</td>
<td align="center">22.000 - 82.000</td>
<td align="center">26.000 - 88.000</td>
<td align="center">44.000 - 80.000</td>
<td align="center">22.000 - 88.000</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.225</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   N-Miss</td>
<td align="center">5</td>
<td align="center">11</td>
<td align="center">0</td>
<td align="center">16</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   Mean (SD)</td>
<td align="center">27.569 (5.004)</td>
<td align="center">27.192 (5.248)</td>
<td align="center">25.904 (5.338)</td>
<td align="center">27.315 (5.134)</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   Range</td>
<td align="center">16.649 - 43.867</td>
<td align="center">16.799 - 49.130</td>
<td align="center">20.833 - 44.922</td>
<td align="center">16.649 - 49.130</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left">G: IROX</td>
<td align="left"><strong>Age, yrs</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.312</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   Mean (SD)</td>
<td align="center">59.361 (11.904)</td>
<td align="center">60.081 (11.037)</td>
<td align="center">55.737 (13.523)</td>
<td align="center">59.451 (11.653)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   Range</td>
<td align="center">26.000 - 85.000</td>
<td align="center">28.000 - 84.000</td>
<td align="center">28.000 - 76.000</td>
<td align="center">26.000 - 85.000</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><strong>Body Mass Index (kg/m^2)</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center">0.642</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   N-Miss</td>
<td align="center">1</td>
<td align="center">3</td>
<td align="center">0</td>
<td align="center">4</td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">   Mean (SD)</td>
<td align="center">27.143 (5.462)</td>
<td align="center">26.910 (5.824)</td>
<td align="center">25.861 (6.890)</td>
<td align="center">26.970 (5.694)</td>
<td align="center"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">   Range</td>
<td align="center">17.615 - 46.204</td>
<td align="center">15.430 - 60.243</td>
<td align="center">16.071 - 44.734</td>
<td align="center">15.430 - 60.243</td>
<td align="center"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="available-function-options" class="section level1">
<h1>Available Function Options</h1>
<div id="summary-statistics" class="section level2">
<h2>Summary statistics</h2>
<p>The <strong>default</strong> summary statistics, by varible type, are:</p>
<ul>
<li><code>numeric.stats</code>: Continuous variables will show by default <code>Nmiss, meansd, range</code></li>
<li><code>cat.stats</code>: Categorical and factor variables will show by default <code>Nmiss, countpct</code></li>
<li><code>ordered.stats</code>: Ordered factors will show by default <code>Nmiss, countpct</code></li>
<li><code>surv.stats</code>: Survival variables will show by default <code>Nmiss, Nevents, medsurv</code></li>
<li><code>date.stats</code>: Date variables will show by default <code>Nmiss, median, range</code></li>
</ul>
<p>There are a number of extra functions defined specifically for the tableby function.</p>
<ul>
<li><code>N</code>: a count of the number of observations for a particular group</li>
<li><code>Nmiss</code>: only show the count of the number of missing values if there are some missing values</li>
<li><code>Nmiss2</code>: always show a count of the number of missing values for a variable within each group</li>
<li><code>meansd</code>: print the mean and standard deviation in the format <code>mean(sd)</code></li>
<li><code>meanCI</code>: print the mean and a (t) confidence interval</li>
<li><code>count</code>: print the number of values in a category</li>
<li><code>countN</code>: print the number of values in a category plus the total N for the group in the format <code>N/Total</code></li>
<li><code>countpct</code>: print the number of values in a category plus the column-percentage in the format <code>N (%)</code></li>
<li><code>countrowpct</code>: print the number of values in a category plus the row-percentage in the format <code>N (%)</code></li>
<li><code>countcellpct</code>: print the number of values in a category plus the cell-percentage in the format <code>N (%)</code></li>
<li><code>binomCI</code>: print the proportion in a category plus a binomial confidence interval.</li>
<li><code>rowbinomCI</code>: print the row proportion in a category plus a binomial confidence interval.</li>
<li><code>medianq1q3</code>: print the median, 25th, and 75th quantiles <code>median (Q1, Q3)</code></li>
<li><code>q1q3</code>: print the 25th and 75th quantiles <code>Q1, Q3</code></li>
<li><code>iqr</code>: print the inter-quartile range.</li>
<li><code>medianrange</code>: print the median, minimum and maximum values <code>median (minimum, maximum)</code></li>
<li><code>medianmad</code>: print the median and median absolute deviation (mad)</li>
<li><code>Nevents</code>: print number of events for a survival object within each grouping level</li>
<li><code>medSurv</code>: print the median survival</li>
<li><code>NeventsSurv</code>: print number of events and survival at given times</li>
<li><code>NriskSurv</code>: print the number still at risk and survival at given times</li>
<li><code>Nrisk</code>: print the number still at risk at given times</li>
<li><code>medTime</code>: print the median follow-up time</li>
<li><code>sum</code></li>
<li><code>max</code></li>
<li><code>min</code></li>
<li><code>mean</code></li>
<li><code>sd</code></li>
<li><code>var</code></li>
<li><code>median</code></li>
<li><code>range</code></li>
<li><code>gmean</code>, <code>gsd</code>, <code>gmeansd</code>, <code>gmeanCI</code>: geometric means, sds, and confidence intervals.</li>
</ul>
</div>
<div id="testing-options" class="section level2">
<h2>Testing options</h2>
<p>The tests used to calculate p-values differ by the variable type, but can be specified explicitly in the formula statement or in the control function.</p>
<p>The following tests are accepted:</p>
<ul>
<li><p><code>anova</code>: analysis of variance test; the default test for continuous variables. When the grouping variable has two levels, it is equivalent to the two-sample t-test with equal variance.</p></li>
<li><p><code>kwt</code>: Kruskal-Wallis test, optional test for continuous variables. When the grouping variable has two levels, it is equivalent to the Wilcoxon Rank Sum test.</p></li>
<li><p><code>chisq</code>: chi-square goodness of fit test for equal counts of a categorical variable across categories; the default for categorical or factor variables</p></li>
<li><p><code>fe</code>: Fisher’s exact test for categorical variables; optional</p></li>
<li><p><code>logrank</code>: log-rank test, the default test for time-to-event variables</p></li>
<li><p><code>trend</code>: The <code>independence_test</code> function from the <code>coin</code> is used to test for trends. Whenthe grouping variable has two levels, it is equivalent to the Armitage trend test. This is the default for ordered factors</p></li>
<li><p><code>notest</code>: Don’t perform a test.</p></li>
</ul>
</div>
<div id="tableby.control-settings" class="section level2">
<h2><code>tableby.control</code> settings</h2>
<p>A quick way to see what arguments are possible to utilize in a function is to use the <code>args()</code> command. Settings involving the number of digits can be set in <code>tableby.control</code> or in <code>summary.tableby</code>.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb138-1" data-line-number="1"><span class="kw">args</span>(tableby.control)</a></code></pre></div>
<pre><code>## function (test = TRUE, total = TRUE, test.pname = NULL, numeric.simplify = FALSE, 
##     cat.simplify = FALSE, ordered.simplify = FALSE, date.simplify = FALSE, 
##     numeric.test = &quot;anova&quot;, cat.test = &quot;chisq&quot;, ordered.test = &quot;trend&quot;, 
##     surv.test = &quot;logrank&quot;, date.test = &quot;kwt&quot;, test.always = FALSE, 
##     numeric.stats = c(&quot;Nmiss&quot;, &quot;meansd&quot;, &quot;range&quot;), cat.stats = c(&quot;Nmiss&quot;, 
##         &quot;countpct&quot;), ordered.stats = c(&quot;Nmiss&quot;, &quot;countpct&quot;), 
##     surv.stats = c(&quot;Nmiss&quot;, &quot;Nevents&quot;, &quot;medSurv&quot;), date.stats = c(&quot;Nmiss&quot;, 
##         &quot;median&quot;, &quot;range&quot;), stats.labels = list(Nmiss = &quot;N-Miss&quot;, 
##         Nmiss2 = &quot;N-Miss&quot;, meansd = &quot;Mean (SD)&quot;, medianrange = &quot;Median (Range)&quot;, 
##         median = &quot;Median&quot;, medianq1q3 = &quot;Median (Q1, Q3)&quot;, q1q3 = &quot;Q1, Q3&quot;, 
##         iqr = &quot;IQR&quot;, mean = &quot;Mean&quot;, sd = &quot;SD&quot;, var = &quot;Var&quot;, max = &quot;Max&quot;, 
##         min = &quot;Min&quot;, meanCI = &quot;Mean (CI)&quot;, sum = &quot;Sum&quot;, gmean = &quot;Geom Mean&quot;, 
##         gsd = &quot;Geom SD&quot;, gmeansd = &quot;Geom Mean (Geom SD)&quot;, gmeanCI = &quot;Geom Mean (CI)&quot;, 
##         range = &quot;Range&quot;, Npct = &quot;N (Pct)&quot;, Nevents = &quot;Events&quot;, 
##         medSurv = &quot;Median Survival&quot;, medTime = &quot;Median Follow-Up&quot;, 
##         medianmad = &quot;Median (MAD)&quot;, overall = &quot;Overall&quot;, total = &quot;Total&quot;, 
##         difference = &quot;Difference&quot;), digits = 3L, digits.count = 0L, 
##     digits.pct = 1L, digits.p = 3L, format.p = TRUE, digits.n = 0L, 
##     conf.level = 0.95, chisq.correct = FALSE, simulate.p.value = FALSE, 
##     B = 2000, times = 1:5, ...) 
## NULL</code></pre>
</div>
<div id="summary.tableby-settings" class="section level2">
<h2><code>summary.tableby</code> settings</h2>
<p>The <code>summary.tableby</code> function has options that modify how the table appears (such as adding a title or modifying labels).</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb140-1" data-line-number="1"><span class="kw">args</span>(arsenal<span class="op">:::</span>summary.tableby)</a></code></pre></div>
<pre><code>## function (object, ..., labelTranslations = NULL, text = FALSE, 
##     title = NULL, pfootnote = FALSE, term.name = &quot;&quot;) 
## NULL</code></pre>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
